{"version":3,"sources":["images/slack_icon.svg","routes/Main.js","stores/UserStore.js","PrivateRoute.js","components/UserAvatar.js","components/SideMenu.js","components/MonthOptions.js","routes/TimeRecord.js","routes/BreakTime.js","routes/FixedTime.js","routes/OAuth.js","routes/Expense.js","serviceWorker.js","index.js","App.js"],"names":["module","exports","useStyles","makeStyles","theme","root","flexGrow","fontWeight","menuButton","marginRight","spacing","title","slack","width","height","container","marginTop","marginBottom","paddingTop","paddingBottom","paddingLeft","paddingRight","processor","remark","use","reactRenderer","Main","classes","history","useReactRouter","useEffect","code","qs","parse","window","location","search","undefined","push","className","AppBar","position","Toolbar","IconButton","edge","color","aria-label","Typography","variant","Button","onClick","process","src","alt","Container","maxWidth","component","Paper","processSync","contents","userStore","authenticated","accessToken","user","this","bool","emit","token","EventEmitter","PrivateRoute","children","rest","useState","isAuthenticated","render","to","pathname","state","from","userAvatar","UserAvatar","getUser","anchorEl","setAnchorEl","event","currentTarget","Avatar","Popper","open","Boolean","ClickAwayListener","onClickAway","MenuList","autoFocusItem","onKeyDown","key","preventDefault","MenuItem","setUser","setAccessToken","setAuthenticated","drawerList","nested","SideMenu","drawerOpen","setDrawerOpen","adminOpen","setAdminOpen","Drawer","onClose","List","ListItem","button","Link","ListItemIcon","ListItemText","primary","Divider","Fragment","Collapse","in","timeout","unmountOnExit","disablePadding","MonthOptions","options","month","value","table","whiteSpace","summaryContainer","tableToolbar","marginLeft","holidayCell","customerField","dateField","dayOfWeek","kindMap","TimeRecord","Date","getFullYear","year","setYear","getMonth","setMonth","rows","setRows","severity","setSeverity","message","setMessage","snackbarOpen","setSnackbarOpen","oldRows","setOldRows","detailDialogOpen","setDetailDialogOpen","detailRow","setDetailRow","summaryRows","setSummaryRows","loadTimeRecords","useCallback","axios","get","params","getAccessToken","then","response","records","data","forEach","record","edit","id","date","day","holiday","customer","kind","start_time","end_time","total_time","over_time","midnight_time","deduction_time","note","catch","error","loadSummary","fixed_time","actual_time","statutory_time","statutory_midnight_time","recordToRow","row","backupRow","hasOwnProperty","String","Object","assign","KindOptions","entries","handleCloseSnackbar","reason","validationTime","start","end","now","starts","split","ends","getDate","Number","TimeItem","props","ListItemAvatar","secondary","CssBaseline","Snackbar","autoHideDuration","Alert","Dialog","fullWidth","DialogTitle","DialogContent","DialogActions","TextField","required","label","margin","defaultValue","onChange","target","FormControl","InputLabel","htmlFor","NativeSelect","inputProps","Tooltip","responseType","blob","Blob","type","saveAs","TableContainer","Table","size","TableHead","TableRow","TableCell","align","TableBody","map","scope","style","textAlign","autoFocus","slice","handleChangeCustomer","handleChangeKind","handleChangeStartTime","handleChangeEndTime","handleChangeNote","regex","RegExp","test","rowYear","rowMonth","rowDate","post","put","handleClickDone","oldRow","handleClickCancel","handleClickEdit","delete","handleClickDelete","handleClickDetails","dialogTitle","BreakTime","selectedYear","setSelectedYear","selectedMonth","setSelectedMonth","addModalOpen","setAddModelOpen","setCustomer","startTime","setStartTime","endTime","setEndTime","loadBreakTimes","Grid","item","xs","disabled","from_year","from_month","to_year","to_month","indexOf","FixedTime","loadFixedTimes","OAuth","on","client_id","client_secret","redirect_uri","userId","removeAllListeners","ReactLink","tableContainer","Expense","addTransportOpen","setAddTransportOpen","setDate","journal","setJournal","breakdown","setBreakdown","billTo","setBillTo","setCost","setTransport","setDeparture","setArrival","work","handleChangeCost","hostname","match","ReactDOM","exact","path","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"mHAAAA,EAAOC,QAAU,IAA0B,wC,kVCiBrCC,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCC,KAAM,CACFC,SAAU,EACV,sBAAuB,CACnBC,WAAY,KAEhB,sBAAuB,CACnBA,WAAY,MAGpBC,WAAY,CACRC,YAAaL,EAAMM,QAAQ,IAE/BC,MAAO,CACHL,SAAU,GAEdM,MAAO,CACHC,MAAO,GACPC,OAAQ,GACRL,YAAaL,EAAMM,QAAQ,IAE/BK,UAAW,CACPC,UAAWZ,EAAMM,QAAQ,GACzBO,aAAcb,EAAMM,QAAQ,GAC5BQ,WAAYd,EAAMM,QAAQ,GAC1BS,cAAef,EAAMM,QAAQ,GAC7BU,YAAahB,EAAMM,QAAQ,IAC3BW,aAAcjB,EAAMM,QAAQ,SAI9BY,EAAYC,MAASC,IAAIC,KAsJhBC,MApJf,WACI,IAAMC,EAAUzB,IACR0B,EAAYC,MAAZD,QAkBR,OAhBAE,qBAAU,WACN,IAAMC,EAAOC,IAAGC,MAAMC,OAAOC,SAASC,QAAQL,UACjCM,IAATN,GACAH,EAAQU,KAAR,sBAA4BP,MAEjC,CAACH,IAYA,yBAAKW,UAAWZ,EAAQtB,MACpB,kBAACmC,EAAA,EAAD,CAAQC,SAAS,UACb,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAYC,KAAK,QAAQL,UAAWZ,EAAQnB,WAAYqC,MAAM,UAAUC,aAAW,QAC/E,kBAAC,IAAD,OAEJ,kBAACC,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,gEAGA,kBAACsC,EAAA,EAAD,CAAQJ,MAAM,UAAUK,QAhBtB,WAGdhB,OAAOC,SAAP,sDAFiBgB,0BAEjB,0CADoBA,oCAeJ,yBAAKC,IAAKxC,IAAO2B,UAAWZ,EAAQf,MAAOyC,IAAI,UADnD,sBAOR,kBAACC,EAAA,EAAD,CAAWC,SAAS,KAAKhB,UAAWZ,EAAQZ,UAAWyC,UAAWC,KAC9D,6BACKnC,EAAUoC,YACP,+6HAqGFC,a,yDC7JPC,EAFG,I,YA7Bd,aAAe,IAAD,8BACV,+CACKC,eAAgB,EACrB,EAAKC,YAAc,GACnB,EAAKC,KAAO,GAJF,E,+EAOV,OAAOC,KAAKH,gB,uCAECI,GACbD,KAAKH,cAAgBI,EACrBD,KAAKE,KAAK,Y,uCAGV,OAAOF,KAAKF,c,qCAEDK,GACXH,KAAKF,YAAcK,EACnBH,KAAKE,KAAK,Y,gCAGV,OAAOF,KAAKD,O,8BAERA,GACJC,KAAKD,KAAOA,EACZC,KAAKE,KAAK,c,UA1BME,eCET,SAASC,EAAT,GAA8C,IAAtBC,EAAqB,EAArBA,SAAaC,EAAQ,8BAChCC,mBAASZ,EAAUa,mBAApCZ,EADiD,oBAExD,OACI,kBAAC,QAAD,iBAAWU,EAAX,CAAiBG,OAAQ,gBAAGvC,EAAH,EAAGA,SAAH,OACrB0B,EAAiBS,EAAa,kBAAC,WAAD,CAAUK,GAAI,CAAEC,SAAU,IAAKC,MAAO,CAAEC,KAAM3C,U,yUCKlFjC,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnC2E,WAAY,CACRtE,YAAaL,EAAMM,QAAQ,QAIpB,SAASsE,KACpB,IAAMrD,EAAUzB,KADiB,EAElBsE,mBAASZ,EAAUqB,WAA3BlB,EAF0B,sBAGDS,mBAAS,MAHR,mBAG1BU,EAH0B,KAGhBC,EAHgB,KAIzBvD,EAAYC,MAAZD,QAwCR,OACI,6BACI,kBAACqB,EAAA,EAAD,CAAQJ,MAAM,UAAUK,QAnCR,SAACkC,GACrBD,EAAYD,EAAW,KAAOE,EAAMC,iBAmC5B,kBAACC,GAAA,EAAD,CAAQjC,IAAI,SAASD,IAAKW,EAAI,QAAJ,SAA6BxB,UAAWZ,EAAQoD,aACzEhB,EAAI,QAAJ,WAEL,kBAACwB,GAAA,EAAD,CAAQC,KAAMC,QAAQP,GAAWA,SAAUA,GACvC,kBAACzB,EAAA,EAAD,KACI,kBAACiC,GAAA,EAAD,CAAmBC,YAtBX,WACpBR,EAAY,QAsBI,kBAACS,GAAA,EAAD,CAAUC,cAAeJ,QAAQP,GAAWY,UAjClC,SAACV,GACvB,QAAUA,EAAMW,MAChBX,EAAMY,iBACNb,EAAY,SA+BI,kBAACc,GAAA,EAAD,CAAU/C,QAjBP,WACvBU,EAAUsC,QAAQ,MAClBtC,EAAUuC,eAAe,MACzBvC,EAAUwC,kBAAiB,GAC3BxE,EAAQU,KAAK,OAaO,uC,iPClDtBpC,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCI,WAAY,CACRC,YAAaL,EAAMM,QAAQ,IAE/B2F,WAAY,CACRxF,MAAO,KAEXyF,OAAQ,CACJlF,YAAahB,EAAMM,QAAQ,QAIpB,SAAS6F,KACpB,IAAM5E,EAAUzB,KADe,EAEKsE,oBAAS,GAFd,mBAExBgC,EAFwB,KAEZC,EAFY,OAGhBjC,mBAASZ,EAAUqB,WAA3BlB,EAHwB,sBAIGS,oBAAS,GAJZ,mBAIxBkC,EAJwB,KAIbC,EAJa,KAiC/B,OACI,6BACI,kBAAChE,EAAA,EAAD,CAAYC,KAAK,QAAQL,UAAWZ,EAAQnB,WAAYqC,MAAM,UAAUC,aAAW,OAAOI,QAAS,kBAAMuD,GAAc,KACnH,kBAAC,IAAD,OAEJ,kBAACG,GAAA,EAAD,CAAQpB,KAAMgB,EAAYK,QAAS,kBAAMJ,GAAc,KACnD,yBAAKlE,UAAWZ,EAAQ0E,YACpB,kBAACS,GAAA,EAAD,CAAMtD,UAAU,OACZ,kBAACuD,GAAA,EAAD,CAAUC,QAAM,EAACxD,UAAWyD,IAAMtC,GAAG,eACjC,kBAACuC,GAAA,EAAD,KAAc,kBAAC,KAAD,OACd,kBAACC,GAAA,EAAD,CAAcC,QAAQ,8BAE1B,kBAACL,GAAA,EAAD,CAAUC,QAAM,EAACxD,UAAWyD,IAAMtC,GAAG,YACjC,kBAACuC,GAAA,EAAD,KAAc,kBAAC,KAAD,OACd,kBAACC,GAAA,EAAD,CAAcC,QAAQ,8BAE1B,kBAACC,GAAA,EAAD,MACA,kBAACN,GAAA,EAAD,CAAUC,QAAM,EAACxD,UAAWyD,IAAMtC,GAAG,cACjC,kBAACuC,GAAA,EAAD,KAAc,kBAAC,KAAD,OACd,kBAACC,GAAA,EAAD,CAAcC,QAAQ,0CAE1B,kBAACL,GAAA,EAAD,CAAUC,QAAM,EAACxD,UAAWyD,IAAMtC,GAAG,cACjC,kBAACuC,GAAA,EAAD,KAAc,kBAAC,KAAD,OACd,kBAACC,GAAA,EAAD,CAAcC,QAAQ,0CAE1B,mBApDF,WACd,GAAIrD,EAAI,SACJ,OACI,kBAAC,IAAMuD,SAAP,KACI,kBAACD,GAAA,EAAD,MACA,kBAACN,GAAA,EAAD,CAAUC,QAAM,EAAC9D,QAAS,kBAAMyD,GAAcD,KAC1C,kBAACQ,GAAA,EAAD,KACI,kBAAC,KAAD,OAEJ,kBAACC,GAAA,EAAD,CAAcC,QAAQ,iBACrBV,EAAY,kBAAC,KAAD,MAAiB,kBAAC,KAAD,OAElC,kBAACa,GAAA,EAAD,CAAUC,GAAId,EAAWe,QAAQ,OAAOC,eAAa,GACjD,kBAACZ,GAAA,EAAD,CAAMtD,UAAU,MAAMmE,gBAAc,GAChC,kBAACZ,GAAA,EAAD,CAAUC,QAAM,EAACzE,UAAWZ,EAAQ2E,QAChC,kBAACY,GAAA,EAAD,KACI,kBAAC,KAAD,OAEJ,kBAACC,GAAA,EAAD,CAAcC,QAAQ,yCAkC9B,U,2EC3FT,SAASQ,KAEpB,IADA,IAAMC,EAAU,GACPC,EAAQ,EAAGA,GAAS,GAAIA,IAC7BD,EAAQvF,KAAK,4BAAQyD,IAAK+B,EAAOC,MAAOD,GAAQA,IAEpD,OAAOD,EC0CX,IAAM3H,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCC,KAAM,CACFC,SAAU,EACV,sBAAuB,CACnBC,WAAY,KAEhB,sBAAuB,CACnBA,WAAY,MAGpBI,MAAO,CACHL,SAAU,GAEd0H,MAAO,CACH,uBAAwB,CACpBC,WAAY,UAEhB,uBAAwB,CACpB,sBAAuB,CACnB,uBAAwB,CACpB1H,WAAY,QAK5BQ,UAAW,CACPC,UAAWZ,EAAMM,QAAQ,GACzBO,aAAcb,EAAMM,QAAQ,IAEhCwH,iBAAkB,CACdjH,aAAcb,EAAMM,QAAQ,IAEhCyH,aAAc,CACV,yBAA0B,CACtB1H,YAAaL,EAAMM,QAAQ,GAC3B0H,WAAYhI,EAAMM,QAAQ,GAC1BG,MAAO,KAEXI,aAAcb,EAAMM,QAAQ,IAEhC2H,YAAa,CACTxF,MAAO,WAEXyF,cAAe,CACXzH,MAAO,IAEX0H,UAAW,CACP1H,MAAM,QAIR2H,GAAY,CAAC,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,UAC3CC,GAAU,CACZ,EAAK,GACL,GAAM,eAAM,GAAM,mBAAU,GAAM,mBAClC,GAAM,eAAM,GAAM,mBAAU,GAAM,mBAClC,GAAM,eAAM,GAAM,mBAAU,GAAM,mBAClC,GAAM,eAAM,GAAM,mBAAU,GAAM,mBAClC,GAAM,gBAEK,SAASC,KACpB,IAAM/G,EAAUzB,KADiB,EAETsE,oBAAS,IAAImE,MAAOC,eAFX,mBAE1BC,EAF0B,KAEpBC,EAFoB,OAGPtE,oBAAS,IAAImE,MAAOI,WAAa,GAH1B,mBAG1BjB,EAH0B,KAGnBkB,EAHmB,OAITxE,mBAAS,IAJA,mBAI1ByE,EAJ0B,KAIpBC,EAJoB,OAKD1E,mBAAS,SALR,mBAK1B2E,EAL0B,KAKhBC,EALgB,OAMH5E,mBAAS,IANN,mBAM1B6E,EAN0B,KAMjBC,EANiB,OAOO9E,oBAAS,GAPhB,mBAO1B+E,EAP0B,KAOZC,EAPY,OAQHhF,mBAAS,IARN,mBAQ1BiF,EAR0B,KAQjBC,EARiB,OASelF,oBAAS,GATxB,mBAS1BmF,EAT0B,KASRC,EATQ,QAUCpF,mBAAS,IAVV,qBAU1BqF,GAV0B,MAUfC,GAVe,SAWKtF,mBAAS,IAXd,qBAW1BuF,GAX0B,MAWbC,GAXa,MAgB3BC,GAAkBC,uBAAY,WAChCC,IAAMC,IAAN,UAAajH,sCAAb,yBAA4D0F,EAA5D,YAAoEf,GAAS,CACzEuC,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IAAMC,EAAUD,EAASE,KAAT,QACVzB,EAAO,GACbwB,EAAQE,SAAQ,SAACC,GACb3B,EAAK3G,KAAK,CACNuI,MAAM,EACNC,GAAIF,EAAM,eACV/B,KAAM+B,EAAM,KACZ9C,MAAO8C,EAAM,MACbG,KAAMH,EAAM,KACZI,IAAKxC,GAAUoC,EAAM,KACrBK,QAASL,EAAM,QAAc,IAAM,GACnCM,SAAUN,EAAM,SAChBO,KAAMP,EAAM,KACZQ,WAAYR,EAAM,WAClBS,SAAUT,EAAM,SAChBU,WAAYV,EAAM,WAClBW,UAAWX,EAAM,UACjBY,cAAeZ,EAAM,cACrBa,eAAgBb,EAAM,eACtBc,KAAMd,EAAM,UAEpB1B,EAAQD,GACRS,EAAW,OACZiC,OAAM,SAACC,GACNxC,EAAY,SACZE,EAAWsC,EAAK,SAChBpC,GAAgB,QAErB,CAACX,EAAMf,IAKJ+D,GAAc3B,uBAAY,WAC5BC,IAAMC,IAAN,UAAajH,sCAAb,yBAA4D0F,EAA5D,YAAoEf,EAApE,YAAqF,CACjFuC,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IAAMC,EAAUD,EAASE,KAAT,QACVzB,EAAO,GACbwB,EAAQE,SAAQ,SAACC,GACb3B,EAAK3G,KAAK,CACN4I,SAAUN,EAAM,SAChBkB,WAAYlB,EAAM,WAClBmB,YAAanB,EAAM,YACnBW,UAAWX,EAAM,UACjBY,cAAeZ,EAAM,cACrBoB,eAAgBpB,EAAM,eACtBqB,wBAAyBrB,EAAM,wBAC/Ba,eAAgBb,EAAM,oBAG9BZ,GAAef,MAChB0C,OAAM,SAACC,GACNxC,EAAY,SACZE,EAAWsC,EAAK,SAChBpC,GAAgB,QAErB,CAACX,EAAMf,IAKVhG,qBAAU,WACF+G,EAAO,IACPoB,KACA4B,QAEL,CAAChD,EAAMf,EAAOmC,GAAiB4B,KAKlC,IAgIMK,GAAc,SAACtB,EAAQuB,GACzBA,EAAItB,MAAO,EACXsB,EAAIrB,GAAKF,EAAM,eACfuB,EAAIjB,SAAWN,EAAM,SACrBuB,EAAIhB,KAAOP,EAAM,KACjBuB,EAAIf,WAAaR,EAAM,WACvBuB,EAAId,SAAWT,EAAM,SACrBuB,EAAIb,WAAaV,EAAM,WACvBuB,EAAIT,KAAOd,EAAM,MA0EfwB,GAAY,SAACD,GACV1C,EAAQ4C,eAAeC,OAAOH,EAAIpB,SACnCtB,EAAQ6C,OAAOH,EAAIpB,OAASwB,OAAOC,OAAO,GAAIL,KAsEhDM,GAAc,WAEhB,IADA,IAAM5E,EAAU,GAChB,MAAyB0E,OAAOG,QAAQjE,IAAxC,eAAkD,CAAC,IAAD,0BAAxC1C,EAAwC,KAAnCgC,EAAmC,KAC9CF,EAAQvF,KAAK,4BAAQyD,IAAKA,EAAKgC,MAAOhC,GAAMgC,IAEhD,OAAOF,GASL8E,GAAsB,SAACvH,EAAOwH,GAC5B,cAAgBA,GAGpBpD,GAAgB,IAUdqD,GAAiB,SAACC,EAAOC,GAC3B,IAAMC,EAAM,IAAIrE,KACVsE,EAASH,EAAMI,MAAM,KACrBC,EAAOJ,EAAIG,MAAM,KAGvB,OAFY,IAAIvE,KAAKqE,EAAIpE,cAAeoE,EAAIjE,WAAYiE,EAAII,UAAWC,OAAOJ,EAAO,IAAKI,OAAOJ,EAAO,KAC5F,IAAItE,KAAKqE,EAAIpE,cAAeoE,EAAIjE,WAAYiE,EAAII,UAAWC,OAAOF,EAAK,IAAKE,OAAOF,EAAK,MAmBlGG,GAAW,SAACC,GACd,OACI,kBAACxG,GAAA,EAAD,KACI,kBAACyG,GAAA,EAAD,KACI,kBAAClI,GAAA,EAAD,KACI,kBAAC,KAAD,QAGR,kBAAC6B,GAAA,EAAD,CAAcC,QAASmG,EAAMnG,QAASqG,UAAWF,EAAME,cAKnE,OACI,0BAAMlL,UAAWZ,EAAQtB,MACrB,kBAACqN,GAAA,EAAD,MAEA,kBAAClL,EAAA,EAAD,CAAQC,SAAS,UACb,kBAACC,EAAA,EAAD,KACI,kBAAC6D,GAAD,MACA,kBAACxD,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,gEAGA,kBAACqE,GAAD,QAIR,kBAAC2I,GAAA,EAAD,CAAUnI,KAAM+D,EAAcqE,iBAAkB,IAAM/G,QAAS8F,IAC3D,kBAACkB,GAAA,EAAD,CAAO1E,SAAUA,EAAUnG,QAAQ,SAAS6D,QAAS8F,IAAsBtD,IAG/E,kBAACyE,GAAA,EAAD,CAAQtI,KAAMmE,EAAkB9C,QAAS,kBAAM+C,GAAoB,IAAQmE,WAAW,EAAMxK,SAAS,MACjG,kBAACyK,GAAA,EAAD,KAAcnE,GAAUhB,KAAxB,IAA+BgB,GAAU/B,MAAzC,IAAiD+B,GAAUkB,MAC3D,kBAACkD,GAAA,EAAD,KACI,kBAACnH,GAAA,EAAD,KACI,kBAACwG,GAAD,CAAUlG,QAAQ,eAAKqG,UAAW5D,GAAUyB,aAC5C,kBAACjE,GAAA,EAAD,CAASrE,QAAQ,QAAQQ,UAAU,OACnC,kBAAC8J,GAAD,CAAUlG,QAAQ,eAAKqG,UAAW5D,GAAU0B,YAC5C,kBAAClE,GAAA,EAAD,CAASrE,QAAQ,QAAQQ,UAAU,OACnC,kBAAC8J,GAAD,CAAUlG,QAAQ,2BAAOqG,UAAW5D,GAAU2B,gBAC9C,kBAACnE,GAAA,EAAD,CAASrE,QAAQ,QAAQQ,UAAU,OACnC,kBAAC8J,GAAD,CAAUlG,QAAQ,eAAKqG,UAAW5D,GAAU4B,mBAGpD,kBAACyC,GAAA,EAAD,KACI,kBAACjL,EAAA,EAAD,CAAQC,QAAS,kBAAM0G,GAAoB,IAAQ/G,MAAM,WAAzD,wBAMR,kBAACS,EAAA,EAAD,CAAWC,SAAS,KAAKhB,UAAWZ,EAAQZ,WACxC,kBAAC2B,EAAA,EAAD,CAASH,UAAWZ,EAAQwG,cACxB,kBAACpF,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,4BAGA,kBAACwN,EAAA,EAAD,CAAWC,UAAU,EAAMC,MAAM,SAAIC,OAAO,SAASC,aAAc1F,EAAM2F,SAAU,SAACpJ,GAAD,OAAW0D,EAAQ1D,EAAMqJ,OAAO1G,UACnH,kBAAC2G,GAAA,EAAD,CAAaN,UAAU,EAAME,OAAO,UAChC,kBAACK,GAAA,EAAD,CAAYC,QAAQ,gBAApB,UACA,kBAACC,GAAA,EAAD,CAAc9G,MAAOD,EAAOgH,WAAY,CAAChE,GAAI,gBAC/B0D,SAAU,SAACpJ,GAAD,OAAW4D,EAAS5D,EAAMqJ,OAAO1G,SACrD,kBAACH,GAAD,QAGR,kBAACmH,GAAA,EAAD,CAASpO,MAAM,gBACX,kBAACgC,EAAA,EAAD,CAAYO,QA/YN,WAEtB,IAAK2F,EAID,OAHAO,EAAY,SACZE,EAAW,iFACXE,GAAgB,GAIpBS,KACA4B,OAsYoB,kBAAC,IAAD,QAGR,kBAACkD,GAAA,EAAD,CAASpO,MAAM,wCACX,kBAACgC,EAAA,EAAD,CAAYO,QApYJ,WAExB,IAAK2F,EAID,OAHAO,EAAY,SACZE,EAAW,iFACXE,GAAgB,GAIpBW,IAAMC,IAAN,UAAajH,sCAAb,yBAA4D0F,EAA5D,YAAoEf,EAApE,aAAsF,CAClFuC,OAAQ,CACJlG,MAAOP,EAAU0G,kBAErB0E,aAAc,SACfzE,MAAK,SAACC,GACL,IAAMyE,EAAO,IAAIC,KAAK,CAAC1E,EAASE,MAAO,CACnCyE,KAAM3E,EAASE,KAAKyE,OAExBC,kBAAOH,EAAD,sBAAYpG,GAAZ,OAAmBf,EAAnB,aACP6D,OAAM,SAACC,GACNxC,EAAY,SACZE,EAAWsC,EAAK,SAChBpC,GAAgB,QA+WA,kBAAC,KAAD,SAIZ,kBAAC6F,EAAA,EAAD,CAAgB7L,UAAWC,IAAOlB,UAAWZ,EAAQuG,kBACjD,kBAACoH,EAAA,EAAD,CAAOC,KAAK,QAAQhN,UAAWZ,EAAQqG,OACnC,kBAACwH,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,kBAGR,kBAACC,EAAA,EAAD,KACK7F,GAAY8F,KAAI,SAAA1D,GAAG,OAChB,kBAACsD,EAAA,EAAD,CAAU1J,IAAKoG,EAAIjB,UACf,kBAACwE,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAIjB,UAC/B,kBAACwE,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAIL,YAC/B,kBAAC4D,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAIJ,aAC/B,kBAAC2D,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAIZ,WAC/B,kBAACmE,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAIX,eAC/B,kBAACkE,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAIH,gBAC/B,kBAAC0D,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAIF,yBAC/B,kBAACyD,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAIV,uBAMnD,kBAAC4D,EAAA,EAAD,CAAgB7L,UAAWC,KACvB,kBAAC6L,EAAA,EAAD,CAAO/M,UAAWZ,EAAQqG,MAAOlF,aAAW,cAAcyM,KAAK,SAC3D,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,SAASG,MAAM,OAAhC,gBACA,kBAACJ,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,kBAGR,kBAACC,EAAA,EAAD,KACK3G,EAAK4G,KAAI,SAAA1D,GAAG,OACT,kBAACsD,EAAA,EAAD,CAAU1J,IAAKoG,EAAIpB,MACf,kBAAC2E,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAIpB,MAC/B,kBAAC2E,EAAA,EAAD,CAAWC,MAAM,UAAUxD,EAAInB,KAC/B,kBAAC0E,EAAA,EAAD,CAAWC,MAAM,SAASpN,UAAWZ,EAAQ0G,aAAc8D,EAAIlB,SAC/D,kBAACyE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACsD,EAAA,EAAD,CAAWI,aAAcpC,EAAIjB,SAAU3I,UAAWZ,EAAQ2G,cAC/CwG,WAAY,CAACiB,MAAO,CAACC,UAAW,WAChCC,WAAW,EACXzB,SAAU,SAACpJ,GAAD,OAnPhC,SAAC+G,EAAKjB,GAC/BkB,GAAUD,GACVA,EAAIjB,SAAWA,EACfhC,EAAQD,EAAKiH,SAgPuDC,CAAqBhE,EAAK/G,EAAMqJ,OAAO1G,UAEvE,8BAAOoE,EAAIjB,WAGnB,kBAACwE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACgE,GAAA,EAAD,CAAc9G,MAAOoE,EAAIhB,KACXqD,SAAU,SAACpJ,GAAD,OA/OvC,SAAC+G,EAAKhB,GAC3BiB,GAAUD,GACVA,EAAIhB,KAAOA,EACXjC,EAAQD,EAAKiH,SA4O0DE,CAAiBjE,EAAK/G,EAAMqJ,OAAO1G,SAClE,kBAAC0E,GAAD,OAGJ,8BAAOhE,GAAQ0D,EAAIhB,QAG3B,kBAACuE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACsD,EAAA,EAAD,CAAWI,aAAcpC,EAAIf,WAAY7I,UAAWZ,EAAQ4G,UACjDuG,WAAY,CAACiB,MAAO,CAACC,UAAW,WAChCxB,SAAU,SAACpJ,GAAD,OA9O/B,SAAC+G,EAAKf,GAChCgB,GAAUD,GACVA,EAAIf,WAAaA,EACjBlC,EAAQD,EAAKiH,SA2OuDG,CAAsBlE,EAAK/G,EAAMqJ,OAAO1G,UAExE,8BAAOoE,EAAIf,aAGnB,kBAACsE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACsD,EAAA,EAAD,CAAWI,aAAcpC,EAAId,SAAU9I,UAAWZ,EAAQ4G,UAC/CuG,WAAY,CAACiB,MAAO,CAACC,UAAW,WAChCxB,SAAU,SAACpJ,GAAD,OA3OjC,SAAC+G,EAAKd,GAC9Be,GAAUD,GACVA,EAAId,SAAWA,EACfnC,EAAQD,EAAKiH,SAwOuDI,CAAoBnE,EAAK/G,EAAMqJ,OAAO1G,UAEtE,8BAAOoE,EAAId,WAGlBc,EAAItB,KACD,kBAAC6E,EAAA,EAAD,CAAWC,MAAM,UACb,kBAACxB,EAAA,EAAD,CAAWI,aAAcpC,EAAIT,KAClB8C,SAAU,SAACpJ,GAAD,OAvOpC,SAAC+G,EAAKT,GAC3BU,GAAUD,GACVA,EAAIT,KAAOA,EACXxC,EAAQD,EAAKiH,SAoOuDK,CAAiBpE,EAAK/G,EAAMqJ,OAAO1G,WAGvE,kBAAC2H,EAAA,EAAD,KAAW,8BAAOvD,EAAIT,OAE1B,kBAACgE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,6BACI,kBAAClI,EAAA,EAAD,CAAYG,aAAW,OAAOI,QAAS,kBA9c3D,SAACiJ,GACrB,IAAMqE,EAAQC,OAAO,mBACrB,GAAItE,EAAIf,aAAeoF,EAAME,KAAKvE,EAAIf,YAIlC,OAHAhC,EAAY,SACZE,EAAW,oHACXE,GAAgB,GAGpB,GAAI2C,EAAId,WAAamF,EAAME,KAAKvE,EAAId,UAIhC,OAHAjC,EAAY,SACZE,EAAW,oHACXE,GAAgB,GAGpB,GAAI2C,EAAIf,YAAce,EAAId,WAAawB,GAAeV,EAAIf,WAAYe,EAAId,UAItE,OAHAjC,EAAY,SACZE,EAAW,6IACXE,GAAgB,GAIpB,IAAMmH,EAAUxE,EAAItD,KACd+H,EAAWzE,EAAIrE,MACf+I,EAAU1E,EAAIpB,KAChB,IAAMoB,EAAIrB,GACVX,IAAM2G,KAAN,UAAc3N,sCAAd,yBAA6DwN,EAA7D,YAAwEC,EAAxE,YAAoFC,GAAW,CAC3F3F,SAAUiB,EAAIjB,SACdC,KAAMgB,EAAIhB,KACVC,WAAYe,EAAIf,WAChBC,SAAUc,EAAId,SACdK,KAAMS,EAAIT,MACX,CACCrB,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL0B,GAAY1B,EAASE,KAAT,OAAyByB,GACrCjD,EAAQD,EAAKiH,SACb9G,EAAY,WACZE,EAAW,8CACXE,GAAgB,GAChBqC,QACDF,OAAM,SAACC,GACNxC,EAAY,SACZE,EAAWsC,EAAK,SAChBpC,GAAgB,MAKpBW,IAAM4G,IAAN,UAAa5N,sCAAb,yBAA4DwN,EAA5D,YAAuEC,EAAvE,YAAmFC,GAAW,CAC1F3F,SAAUiB,EAAIjB,SACdC,KAAMgB,EAAIhB,KACVC,WAAYe,EAAIf,WAChBC,SAAUc,EAAId,SACdK,KAAMS,EAAIT,MACX,CACCrB,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL0B,GAAY1B,EAASE,KAAT,OAAyByB,GACrCjD,EAAQD,EAAKiH,SACb9G,EAAY,WACZE,EAAW,8CACXE,GAAgB,GAChBqC,QACDF,OAAM,SAACC,GACNxC,EAAY,SACZE,EAAWsC,EAAK,SAChBpC,GAAgB,MAwY6DwH,CAAgB7E,KACzD,kBAAC,KAAD,OAEJ,kBAACxJ,EAAA,EAAD,CAAYG,aAAW,SAASI,QAAS,kBApW3D,SAACiJ,GACvB,IAAM8E,EAASxH,EAAQ6C,OAAOH,EAAIpB,OAC9BkG,IACA9E,EAAIjB,SAAW+F,EAAO/F,SACtBiB,EAAIhB,KAAO8F,EAAO9F,KAClBgB,EAAIf,WAAa6F,EAAO7F,WACxBe,EAAId,SAAW4F,EAAO5F,SACtBc,EAAIb,WAAa2F,EAAO3F,WACxBa,EAAIT,KAAOuF,EAAOvF,YACXjC,EAAQ6C,OAAOH,EAAIpB,OAC1BrB,EAAWD,IAEf0C,EAAItB,MAAO,EACX3B,EAAQD,EAAKiH,SAuV0EgB,CAAkB/E,KAC7D,kBAAC,KAAD,QAIR,6BACI,kBAACxJ,EAAA,EAAD,CAAYG,aAAW,OAAOI,QAAS,kBAtX3D,SAACiJ,UACd1C,EAAQ6C,OAAOH,EAAIpB,OAC1BrB,EAAWD,GACX0C,EAAItB,MAAO,EACX3B,EAAQD,EAAKiH,SAkXwEiB,CAAgBhF,KACzD,kBAAC,IAAD,OAEJ,kBAACxJ,EAAA,EAAD,CAAYG,aAAW,SAASI,QAAS,kBAxV3D,SAACiJ,GACvB,IAAMwE,EAAUxE,EAAItD,KACd+H,EAAWzE,EAAIrE,MACf+I,EAAU1E,EAAIpB,KACpBZ,IAAMiH,OAAN,UAAgBjO,sCAAhB,yBAA+DwN,EAA/D,YAA0EC,EAA1E,YAAsFC,GAAW,CAC7FxG,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,WACJ4B,EAAIrB,GAAK,EACTqB,EAAIjB,SAAW,KACfiB,EAAIhB,KAAO,EACXgB,EAAIf,WAAa,KACjBe,EAAId,SAAW,KACfc,EAAIb,WAAa,KACjBa,EAAIT,KAAO,KACXxC,EAAQD,EAAKiH,SACb9G,EAAY,WACZE,EAAW,8CACXE,GAAgB,GAChBqC,QACDF,OAAM,SAACC,GACNxC,EAAY,SACZE,EAAWsC,EAAK,SAChBpC,GAAgB,MAgUmE6H,CAAkBlF,KAC7D,kBAAC,KAAD,OAEJ,kBAAC4C,GAAA,EAAD,CAASpO,MAAM,gBACX,kBAACgC,EAAA,EAAD,CAAYG,aAAW,UAAUI,QAAS,kBA3M/D,SAACiJ,GACxBvC,GAAoB,GACpBE,GAAaqC,GAyM+EmF,CAAmBnF,KAC/D,kBAAC,KAAD,mB,sDCjrBlDjM,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCC,KAAM,CACFC,SAAU,EACV,sBAAuB,CACnBC,WAAY,KAEhB,sBAAuB,CACnBA,WAAY,MAGpBI,MAAO,CACHL,SAAU,GAEdS,UAAW,CACPC,UAAWZ,EAAMM,QAAQ,GACzBO,aAAcb,EAAMM,QAAQ,IAEhCyH,aAAc,CACV,yBAA0B,CACtB1H,YAAaL,EAAMM,QAAQ,GAC3B0H,WAAYhI,EAAMM,QAAQ,GAC1BG,MAAO,KAEXI,aAAcb,EAAMM,QAAQ,IAEhCsH,MAAO,CACH,uBAAwB,CACpBC,WAAY,SACZ,uBAAwB,CACpBpH,MAAO,MAGf,uBAAwB,CACpB,sBAAuB,CACnB,uBAAwB,CACpBN,WAAY,QAK5BgR,YAAa,CACT,sBAAuB,CACnBhR,WAAY,UAKT,SAASiR,KACpB,IAAM7P,EAAUzB,KADgB,EAEQsE,oBAAS,IAAImE,MAAOC,eAF5B,mBAEzB6I,EAFyB,KAEXC,EAFW,OAGUlN,oBAAS,IAAImE,MAAOI,WAAa,GAH3C,mBAGzB4I,EAHyB,KAGVC,EAHU,OAIRpN,mBAAS,IAJD,mBAIzByE,EAJyB,KAInBC,EAJmB,OAKF1E,mBAAS,IALP,mBAKzBiF,EALyB,KAKhBC,EALgB,OAMQlF,oBAAS,GANjB,mBAMzBqN,EANyB,KAMXC,EANW,OAORtN,mBAASiN,GAPD,mBAOzB5I,EAPyB,KAOnBC,EAPmB,OAQNtE,mBAASmN,GARH,mBAQzB7J,EARyB,KAQlBkB,EARkB,OASAxE,mBAAS,IATT,mBASzB0G,EATyB,KASf6G,EATe,QAUEvN,mBAAS,IAVX,qBAUzBwN,GAVyB,MAUdC,GAVc,SAWFzN,mBAAS,IAXP,qBAWzB0N,GAXyB,MAWhBC,GAXgB,SAYA3N,mBAAS,SAZT,qBAYzB2E,GAZyB,MAYfC,GAZe,SAaF5E,mBAAS,IAbP,qBAazB6E,GAbyB,MAahBC,GAbgB,SAcQ9E,oBAAS,GAdjB,qBAczB+E,GAdyB,MAcXC,GAdW,MAmB1B4I,GAAiBlI,uBAAY,WAC/BC,IAAMC,IAAN,UAAajH,sCAAb,wBAA2DsO,EAA3D,YAA2EE,GAAiB,CACxFtH,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IACMvB,EADUuB,EAASE,KAAT,QACKmF,KAAI,SAAAjF,GACrB,MAAO,CACHC,MAAM,EACNC,GAAIF,EAAM,cACV/B,KAAM+B,EAAM,KACZ9C,MAAO8C,EAAM,MACbM,SAAUN,EAAM,SAChBQ,WAAYR,EAAM,WAClBS,SAAUT,EAAM,aAGxB1B,EAAQD,MACT0C,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,QAErB,CAACiI,EAAcE,IAKlB7P,qBAAU,WACF2P,EAAe,GACfW,OAEL,CAACX,EAAcE,EAAeS,KAKjC,IA8TMhG,GAAY,SAACD,GACV1C,EAAQ4C,eAAeC,OAAOH,EAAIrB,OACnCrB,EAAQ6C,OAAOH,EAAIrB,KAAOyB,OAAOC,OAAO,GAAIL,KAU9CQ,GAAsB,SAACvH,EAAOwH,GAC5B,cAAgBA,GAGpBpD,IAAgB,IAUdqD,GAAiB,SAACC,EAAOC,GAC3B,IAAMC,EAAM,IAAIrE,KACVsE,EAASH,EAAMI,MAAM,KACrBC,EAAOJ,EAAIG,MAAM,KAGvB,OAFY,IAAIvE,KAAKqE,EAAIpE,cAAeoE,EAAIjE,WAAYiE,EAAII,UAAWC,OAAOJ,EAAO,IAAKI,OAAOJ,EAAO,KAC5F,IAAItE,KAAKqE,EAAIpE,cAAeoE,EAAIjE,WAAYiE,EAAII,UAAWC,OAAOF,EAAK,IAAKE,OAAOF,EAAK,MAIxG,OACI,0BAAM5K,UAAWZ,EAAQtB,MACrB,kBAACqN,GAAA,EAAD,MAEA,kBAAClL,EAAA,EAAD,CAAQC,SAAS,UACb,kBAACC,EAAA,EAAD,KACI,kBAAC6D,GAAD,MACA,kBAACxD,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,gEAGA,kBAACqE,GAAD,QAIR,kBAAC8I,GAAA,EAAD,CAAQtI,KAAMqM,EAAchL,QAAS,kBAAMiL,GAAgB,KACvD,kBAAC9D,GAAA,EAAD,CAAazL,UAAWZ,EAAQ4P,aAAhC,wCACA,kBAACtD,GAAA,EAAD,KACI,kBAACoE,GAAA,EAAD,CAAMtR,WAAW,EAAML,QAAS,GAC5B,kBAAC2R,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,SAAIN,WAAW,EAAMK,UAAU,EAAME,OAAO,QAClDC,aAAc1F,EAAM2J,UAAU,KAE7C,kBAACH,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,SAAIN,WAAW,EAAMK,UAAU,EAAME,OAAO,QAClDC,aAAczG,EAAO0K,UAAU,KAE9C,kBAACH,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,IACtB,kBAACF,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAW8B,WAAW,EAAM5B,MAAM,eAAKN,WAAW,EAAMK,UAAU,EAAME,OAAO,QACpEE,SAAU,SAACpJ,GAAD,OAAW2M,EAAY3M,EAAMqJ,OAAO1G,WAE7D,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,2BAAON,WAAW,EAAMK,UAAU,EAAME,OAAO,QACrDE,SAAU,SAACpJ,GAAD,OAAW6M,GAAa7M,EAAMqJ,OAAO1G,WAE9D,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,2BAAON,WAAW,EAAMK,UAAU,EAAME,OAAO,QACrDE,SAAU,SAACpJ,GAAD,OAAW+M,GAAW/M,EAAMqJ,OAAO1G,aAIpE,kBAACmG,GAAA,EAAD,KACI,kBAACjL,EAAA,EAAD,CAAQC,QAnUQ,WAC5B4O,GAAgB,IAkUsCjP,MAAM,WAAhD,kCAGA,kBAACI,EAAA,EAAD,CAAQC,QA/TK,WACzB,IAAKgI,EAID,OAHA9B,GAAY,SACZE,GAAW,uFACXE,IAAgB,GAGpB,IAAKwI,GAID,OAHA5I,GAAY,SACZE,GAAW,mGACXE,IAAgB,GAGpB,IAAK0I,GAID,OAHA9I,GAAY,SACZE,GAAW,mGACXE,IAAgB,GAGpB,IAAMgH,EAAQC,OAAO,mBACrB,OAAKD,EAAME,KAAKsB,IAMXxB,EAAME,KAAKwB,IAMXrF,GAAemF,GAAWE,SAO/B/H,IAAM2G,KAAN,UAAc3N,sCAAd,gBAA4D,CACxD0F,KAAMA,EACNf,MAAOA,EACPoD,SAAUA,EACVE,WAAY4G,GACZ3G,SAAU6G,IACX,CACC7H,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IAAMI,EAASJ,EAASE,KAAT,OACfzB,EAAK3G,KAAK,CACNuI,MAAM,EACNC,GAAIF,EAAM,cACV/B,KAAM+B,EAAM,KACZ9C,MAAO8C,EAAM,MACbM,SAAUN,EAAM,SAChBQ,WAAYR,EAAM,WAClBS,SAAUT,EAAM,WAEpB1B,EAAQD,EAAKiH,SACb4B,GAAgB,GAChB1I,GAAY,WACZE,GAAW,4EACXE,IAAgB,MACjBmC,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,OAnChBJ,GAAY,SACZE,GAAW,qKACXE,IAAgB,KARhBJ,GAAY,SACZE,GAAW,gIACXE,IAAgB,KARhBJ,GAAY,SACZE,GAAW,gIACXE,IAAgB,KAwS+B3G,MAAM,WAA7C,kBAMR,kBAAC8K,GAAA,EAAD,CAAUnI,KAAM+D,GAAcqE,iBAAkB,IAAM/G,QAAS8F,IAC3D,kBAACkB,GAAA,EAAD,CAAO1E,SAAUA,GAAUnG,QAAQ,SAAS6D,QAAS8F,IAAsBtD,KAG/E,kBAAC/F,EAAA,EAAD,CAAWC,SAAS,KAAKhB,UAAWZ,EAAQZ,WACxC,kBAAC2B,EAAA,EAAD,CAASH,UAAWZ,EAAQwG,cACxB,kBAACpF,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,wCAGA,kBAACwN,EAAA,EAAD,CAAWC,UAAU,EAAMC,MAAM,SAAIC,OAAO,SAASC,aAAckD,EACxDjD,SAAU,SAACpJ,GAAD,OAAWsM,EAAgBtM,EAAMqJ,OAAO1G,UAC7D,kBAAC2G,GAAA,EAAD,CAAaN,UAAU,EAAME,OAAO,UAChC,kBAACK,GAAA,EAAD,CAAYC,QAAQ,gBAApB,UACA,kBAACC,GAAA,EAAD,CAAc9G,MAAO4J,EAAe7C,WAAY,CAAChE,GAAI,gBACvC0D,SAAU,SAACpJ,GAAD,OAAWwM,EAAiBxM,EAAMqJ,OAAO1G,SAC7D,kBAACH,GAAD,QAGR,kBAACmH,GAAA,EAAD,CAASpO,MAAM,gBACX,kBAACgC,EAAA,EAAD,CAAYO,QAvaN,WAEtB,IAAKuO,EAID,OAHArI,GAAY,SACZE,GAAW,iFACXE,IAAgB,GAIpB4I,OA+ZoB,kBAAC,IAAD,QAGR,kBAACrD,GAAA,EAAD,CAASpO,MAAM,gBACX,kBAACgC,EAAA,EAAD,CAAYO,QA7ZT,WACnB4F,EAAQ2I,GACRzI,EAAS2I,GACTI,EAAY,IACZE,GAAa,IACbE,GAAW,IACXL,GAAgB,KAwZI,kBAAC,KAAD,QAGR,kBAAC/C,GAAA,EAAD,CAASpO,MAAM,4BACX,kBAACgC,EAAA,EAAD,CAAYO,QAtZR,WAEpB,IAAKuO,EAID,OAHArI,GAAY,SACZE,GAAW,iFACXE,IAAgB,GAIpBW,IAAM2G,KAAN,UAAc3N,sCAAd,qBAAiE,CAC7DsP,UAAW,IAAMpF,OAAOsE,GAAiBtE,OAAOoE,GAAgB,EAAIpE,OAAOoE,GAC3EiB,WAAYrF,OAAOsE,GAAiB,EACpCgB,QAAStF,OAAOoE,GAChBmB,SAAUvF,OAAOsE,IACnB,CACEtH,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IACMvB,EADUuB,EAASE,KAAT,QACKmF,KAAI,SAAAjF,GACrB,MAAO,CACHC,MAAM,EACNC,GAAIF,EAAM,cACV/B,KAAM+B,EAAM,KACZ9C,MAAO8C,EAAM,MACbM,SAAUN,EAAM,SAChBQ,WAAYR,EAAM,WAClBS,SAAUT,EAAM,aAGxB1B,EAAQD,GACRG,GAAY,WACZE,GAAW,wFACXE,IAAgB,MACjBmC,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,QAiXA,kBAAC,KAAD,SAIZ,kBAAC6F,EAAA,EAAD,CAAgB7L,UAAWC,KACvB,kBAAC6L,EAAA,EAAD,CAAOC,KAAK,QAAQhN,UAAWZ,EAAQqG,MAAOlF,aAAW,aACrD,kBAAC0M,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,UAAjB,UACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,UACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,kBAGR,kBAACC,EAAA,EAAD,KACK3G,EAAK4G,KAAI,SAAA1D,GAAG,OACT,kBAACsD,EAAA,EAAD,CAAU1J,IAAKoG,EAAIrB,IACf,kBAAC4E,EAAA,EAAD,CAAWC,MAAM,UAAS,8BAAOxD,EAAItD,OACrC,kBAAC6G,EAAA,EAAD,CAAWC,MAAM,UAAS,8BAAOxD,EAAIrE,QACrC,kBAAC4H,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACsD,EAAA,EAAD,CAAWI,aAAcpC,EAAIjB,SAClB4D,WAAY,CAACiB,MAAO,CAACC,UAAW,WAChCC,WAAW,EACXzB,SAAU,SAACpJ,GAAD,OAjLhC,SAAC+G,EAAKjB,GAC/BkB,GAAUD,GACVA,EAAIjB,SAAWA,EACfhC,EAAQD,EAAKiH,SA8KuDC,CAAqBhE,EAAK/G,EAAMqJ,OAAO1G,UAEvE,8BAAOoE,EAAIjB,WAGnB,kBAACwE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACsD,EAAA,EAAD,CAAWI,aAAcpC,EAAIf,WAClB0D,WAAY,CAACiB,MAAO,CAACC,UAAW,WAChCxB,SAAU,SAACpJ,GAAD,OA9K/B,SAAC+G,EAAKf,GAChCgB,GAAUD,GACVA,EAAIf,WAAaA,EACjBlC,EAAQD,EAAKiH,SA2KuDG,CAAsBlE,EAAK/G,EAAMqJ,OAAO1G,UAExE,8BAAOoE,EAAIf,aAGnB,kBAACsE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACsD,EAAA,EAAD,CAAWI,aAAcpC,EAAId,SAClByD,WAAY,CAACiB,MAAO,CAACC,UAAW,WAChCxB,SAAU,SAACpJ,GAAD,OA3KjC,SAAC+G,EAAKd,GAC9Be,GAAUD,GACVA,EAAId,SAAWA,EACfnC,EAAQD,EAAKiH,SAwKuDI,CAAoBnE,EAAK/G,EAAMqJ,OAAO1G,UAEtE,8BAAOoE,EAAId,WAGnB,kBAACqE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,6BACI,kBAAClI,EAAA,EAAD,CAAYG,aAAW,OAAOI,QAAS,kBA1U3D,SAACiJ,GACrB,IAAKA,EAAIjB,SAIL,OAHA9B,GAAY,SACZE,GAAW,uFACXE,IAAgB,GAGpB,IAAK2C,EAAIf,WAIL,OAHAhC,GAAY,SACZE,GAAW,mGACXE,IAAgB,GAGpB,IAAK2C,EAAId,SAIL,OAHAjC,GAAY,SACZE,GAAW,mGACXE,IAAgB,GAGpB,IAAMgH,EAAQC,OAAO,mBACrB,OAAKD,EAAME,KAAKvE,EAAIf,YAMfoF,EAAME,KAAKvE,EAAId,UAMfwB,GAAeV,EAAIf,WAAYe,EAAId,eAOxClB,IAAM4G,IAAN,UAAa5N,sCAAb,wBAA2DgJ,EAAIrB,IAAM,CACjEjC,KAAMsD,EAAItD,KACVf,MAAOqE,EAAIrE,MACXoD,SAAUiB,EAAIjB,SACdE,WAAYe,EAAIf,WAChBC,SAAUc,EAAId,UACf,CACChB,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IAAMI,EAASJ,EAASE,KAAT,OACfyB,EAAItB,MAAO,EACXsB,EAAItD,KAAO+B,EAAM,KACjBuB,EAAIrE,MAAQ8C,EAAM,MAClBuB,EAAIjB,SAAWN,EAAM,SACrBuB,EAAIf,WAAaR,EAAM,WACvBuB,EAAId,SAAWT,EAAM,SACrB1B,EAAQD,EAAKiH,SACb9G,GAAY,WACZE,GAAW,8CACXE,IAAgB,MACjBmC,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,OA/BhBJ,GAAY,SACZE,GAAW,qKACXE,IAAgB,KARhBJ,GAAY,SACZE,GAAW,gIACXE,IAAgB,KARhBJ,GAAY,SACZE,GAAW,gIACXE,IAAgB,IAmTiEwH,CAAgB7E,KACzD,kBAAC,KAAD,OAEJ,kBAACxJ,EAAA,EAAD,CAAYG,aAAW,SAASI,QAAS,kBApQ3D,SAACiJ,GACvB,IAAM8E,EAASxH,EAAQ6C,OAAOH,EAAIrB,KAC9BmG,IACA9E,EAAIjB,SAAW+F,EAAO/F,SACtBiB,EAAIf,WAAa6F,EAAO7F,WACxBe,EAAId,SAAW4F,EAAO5F,gBACf5B,EAAQ6C,OAAOH,EAAIrB,KAC1BpB,EAAWD,IAEf0C,EAAItB,MAAO,EACX3B,EAAQD,EAAKiH,SA0P0EgB,CAAkB/E,KAC7D,kBAAC,KAAD,QAIR,6BACI,kBAACxJ,EAAA,EAAD,CAAYG,aAAW,OAAOI,QAAS,kBAxP3D,SAACiJ,UACd1C,EAAQ6C,OAAOH,EAAIrB,KAC1BpB,EAAWD,GACX0C,EAAItB,MAAO,EACX3B,EAAQD,EAAKiH,SAoPwEiB,CAAgBhF,KACzD,kBAAC,IAAD,OAEJ,kBAACxJ,EAAA,EAAD,CAAYG,aAAW,SAASI,QAAS,kBA/O3D,SAACiJ,GACvBhC,IAAMiH,OAAN,UAAgBjO,sCAAhB,wBAA8DgJ,EAAIrB,IAAM,CACpET,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,kBACGtB,EAAKA,EAAK4J,QAAQ1G,IACzBjD,EAAQD,EAAKiH,SACb9G,GAAY,WACZE,GAAW,8CACXE,IAAgB,MACjBmC,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,MAiOmE6H,CAAkBlF,KAC7D,kBAAC,KAAD,kBC3lBpD,IAAMjM,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCC,KAAM,CACFC,SAAU,EACV,sBAAuB,CACnBC,WAAY,KAEhB,sBAAuB,CACnBA,WAAY,MAGpBI,MAAO,CACHL,SAAU,GAEdS,UAAW,CACPC,UAAWZ,EAAMM,QAAQ,GACzBO,aAAcb,EAAMM,QAAQ,IAEhCyH,aAAc,CACV,yBAA0B,CACtB1H,YAAaL,EAAMM,QAAQ,GAC3B0H,WAAYhI,EAAMM,QAAQ,GAC1BG,MAAO,KAEXI,aAAcb,EAAMM,QAAQ,IAEhCsH,MAAO,CACH,uBAAwB,CACpBC,WAAY,SACZ,uBAAwB,CACpBpH,MAAO,MAGf,uBAAwB,CACpB,sBAAuB,CACnB,uBAAwB,CACpBN,WAAY,QAK5BgR,YAAa,CACT,sBAAuB,CACnBhR,WAAY,UAKT,SAASuS,KACpB,IAAMnR,EAAUzB,KADgB,EAEQsE,oBAAS,IAAImE,MAAOC,eAF5B,mBAEzB6I,EAFyB,KAEXC,EAFW,OAGUlN,oBAAS,IAAImE,MAAOI,WAAa,GAH3C,mBAGzB4I,EAHyB,KAGVC,EAHU,OAIRpN,mBAAS,IAJD,mBAIzByE,EAJyB,KAInBC,EAJmB,OAKF1E,mBAAS,IALP,mBAKzBiF,EALyB,KAKhBC,EALgB,OAMQlF,oBAAS,GANjB,mBAMzBqN,EANyB,KAMXC,EANW,OAORtN,mBAASiN,GAPD,mBAOzB5I,EAPyB,KAOnBC,EAPmB,OAQNtE,mBAASmN,GARH,mBAQzB7J,EARyB,KAQlBkB,EARkB,OASAxE,mBAAS,IATT,mBASzB0G,EATyB,KASf6G,EATe,QAUEvN,mBAAS,IAVX,qBAUzBwN,GAVyB,MAUdC,GAVc,SAWFzN,mBAAS,IAXP,qBAWzB0N,GAXyB,MAWhBC,GAXgB,SAYA3N,mBAAS,SAZT,qBAYzB2E,GAZyB,MAYfC,GAZe,SAaF5E,mBAAS,IAbP,qBAazB6E,GAbyB,MAahBC,GAbgB,SAcQ9E,oBAAS,GAdjB,qBAczB+E,GAdyB,MAcXC,GAdW,MAmB1BuJ,GAAiB7I,uBAAY,WAC/BC,IAAMC,IAAN,UAAajH,sCAAb,wBAA2DsO,EAA3D,YAA2EE,GAAiB,CACxFtH,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IACMvB,EADUuB,EAASE,KAAT,QACKmF,KAAI,SAAAjF,GACrB,MAAO,CACHC,MAAM,EACNC,GAAIF,EAAM,cACV/B,KAAM+B,EAAM,KACZ9C,MAAO8C,EAAM,MACbM,SAAUN,EAAM,SAChBQ,WAAYR,EAAM,WAClBS,SAAUT,EAAM,aAGxB1B,EAAQD,MACT0C,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,QAErB,CAACiI,EAAcE,IAKlB7P,qBAAU,WACF2P,EAAe,GACfsB,OAEL,CAACtB,EAAcE,EAAeoB,KAKjC,IA8TM3G,GAAY,SAACD,GACV1C,EAAQ4C,eAAeC,OAAOH,EAAIrB,OACnCrB,EAAQ6C,OAAOH,EAAIrB,KAAOyB,OAAOC,OAAO,GAAIL,KAU9CQ,GAAsB,SAACvH,EAAOwH,GAC5B,cAAgBA,GAGpBpD,IAAgB,IAUdqD,GAAiB,SAACC,EAAOC,GAC3B,IAAMC,EAAM,IAAIrE,KACVsE,EAASH,EAAMI,MAAM,KACrBC,EAAOJ,EAAIG,MAAM,KAGvB,OAFY,IAAIvE,KAAKqE,EAAIpE,cAAeoE,EAAIjE,WAAYiE,EAAII,UAAWC,OAAOJ,EAAO,IAAKI,OAAOJ,EAAO,KAC5F,IAAItE,KAAKqE,EAAIpE,cAAeoE,EAAIjE,WAAYiE,EAAII,UAAWC,OAAOF,EAAK,IAAKE,OAAOF,EAAK,MAIxG,OACI,0BAAM5K,UAAWZ,EAAQtB,MACrB,kBAACqN,GAAA,EAAD,MAEA,kBAAClL,EAAA,EAAD,CAAQC,SAAS,UACb,kBAACC,EAAA,EAAD,KACI,kBAAC6D,GAAD,MACA,kBAACxD,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,gEAGA,kBAACqE,GAAD,QAIR,kBAAC8I,GAAA,EAAD,CAAQtI,KAAMqM,EAAchL,QAAS,kBAAMiL,GAAgB,KACvD,kBAAC9D,GAAA,EAAD,CAAazL,UAAWZ,EAAQ4P,aAAhC,wCACA,kBAACtD,GAAA,EAAD,KACI,kBAACoE,GAAA,EAAD,CAAMtR,WAAW,EAAML,QAAS,GAC5B,kBAAC2R,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,SAAIN,WAAW,EAAMK,UAAU,EAAME,OAAO,QAClDC,aAAc1F,EAAM2J,UAAU,KAE7C,kBAACH,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,SAAIN,WAAW,EAAMK,UAAU,EAAME,OAAO,QAClDC,aAAczG,EAAO0K,UAAU,KAE9C,kBAACH,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,IACtB,kBAACF,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAW8B,WAAW,EAAM5B,MAAM,eAAKN,WAAW,EAAMK,UAAU,EAAME,OAAO,QACpEE,SAAU,SAACpJ,GAAD,OAAW2M,EAAY3M,EAAMqJ,OAAO1G,WAE7D,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,2BAAON,WAAW,EAAMK,UAAU,EAAME,OAAO,QACrDE,SAAU,SAACpJ,GAAD,OAAW6M,GAAa7M,EAAMqJ,OAAO1G,WAE9D,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,2BAAON,WAAW,EAAMK,UAAU,EAAME,OAAO,QACrDE,SAAU,SAACpJ,GAAD,OAAW+M,GAAW/M,EAAMqJ,OAAO1G,aAIpE,kBAACmG,GAAA,EAAD,KACI,kBAACjL,EAAA,EAAD,CAAQC,QAnUQ,WAC5B4O,GAAgB,IAkUsCjP,MAAM,WAAhD,kCAGA,kBAACI,EAAA,EAAD,CAAQC,QA/TK,WACzB,IAAKgI,EAID,OAHA9B,GAAY,SACZE,GAAW,uFACXE,IAAgB,GAGpB,IAAKwI,GAID,OAHA5I,GAAY,SACZE,GAAW,mGACXE,IAAgB,GAGpB,IAAK0I,GAID,OAHA9I,GAAY,SACZE,GAAW,mGACXE,IAAgB,GAGpB,IAAMgH,EAAQC,OAAO,mBACrB,OAAKD,EAAME,KAAKsB,IAMXxB,EAAME,KAAKwB,IAMXrF,GAAemF,GAAWE,SAO/B/H,IAAM2G,KAAN,UAAc3N,sCAAd,gBAA4D,CACxD0F,KAAMA,EACNf,MAAOA,EACPoD,SAAUA,EACVE,WAAY4G,GACZ3G,SAAU6G,IACX,CACC7H,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IAAMI,EAASJ,EAASE,KAAT,OACfzB,EAAK3G,KAAK,CACNuI,MAAM,EACNC,GAAIF,EAAM,cACV/B,KAAM+B,EAAM,KACZ9C,MAAO8C,EAAM,MACbM,SAAUN,EAAM,SAChBQ,WAAYR,EAAM,WAClBS,SAAUT,EAAM,WAEpB1B,EAAQD,EAAKiH,SACb4B,GAAgB,GAChB1I,GAAY,WACZE,GAAW,4EACXE,IAAgB,MACjBmC,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,OAnChBJ,GAAY,SACZE,GAAW,qKACXE,IAAgB,KARhBJ,GAAY,SACZE,GAAW,gIACXE,IAAgB,KARhBJ,GAAY,SACZE,GAAW,gIACXE,IAAgB,KAwS+B3G,MAAM,WAA7C,kBAMR,kBAAC8K,GAAA,EAAD,CAAUnI,KAAM+D,GAAcqE,iBAAkB,IAAM/G,QAAS8F,IAC3D,kBAACkB,GAAA,EAAD,CAAO1E,SAAUA,GAAUnG,QAAQ,SAAS6D,QAAS8F,IAAsBtD,KAG/E,kBAAC/F,EAAA,EAAD,CAAWC,SAAS,KAAKhB,UAAWZ,EAAQZ,WACxC,kBAAC2B,EAAA,EAAD,CAASH,UAAWZ,EAAQwG,cACxB,kBAACpF,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,wCAGA,kBAACwN,EAAA,EAAD,CAAWC,UAAU,EAAMC,MAAM,SAAIC,OAAO,SAASC,aAAckD,EACxDjD,SAAU,SAACpJ,GAAD,OAAWsM,EAAgBtM,EAAMqJ,OAAO1G,UAC7D,kBAAC2G,GAAA,EAAD,CAAaN,UAAU,EAAME,OAAO,UAChC,kBAACK,GAAA,EAAD,CAAYC,QAAQ,gBAApB,UACA,kBAACC,GAAA,EAAD,CAAc9G,MAAO4J,EAAe7C,WAAY,CAAChE,GAAI,gBACvC0D,SAAU,SAACpJ,GAAD,OAAWwM,EAAiBxM,EAAMqJ,OAAO1G,SAC7D,kBAACH,GAAD,QAGR,kBAACmH,GAAA,EAAD,CAASpO,MAAM,gBACX,kBAACgC,EAAA,EAAD,CAAYO,QAvaN,WAEtB,IAAKuO,EAID,OAHArI,GAAY,SACZE,GAAW,iFACXE,IAAgB,GAIpBuJ,OA+ZoB,kBAAC,IAAD,QAGR,kBAAChE,GAAA,EAAD,CAASpO,MAAM,gBACX,kBAACgC,EAAA,EAAD,CAAYO,QA7ZT,WACnB4F,EAAQ2I,GACRzI,EAAS2I,GACTI,EAAY,IACZE,GAAa,IACbE,GAAW,IACXL,GAAgB,KAwZI,kBAAC,KAAD,QAGR,kBAAC/C,GAAA,EAAD,CAASpO,MAAM,4BACX,kBAACgC,EAAA,EAAD,CAAYO,QAtZR,WAEpB,IAAKuO,EAID,OAHArI,GAAY,SACZE,GAAW,iFACXE,IAAgB,GAIpBW,IAAM2G,KAAN,UAAc3N,sCAAd,qBAAiE,CAC7DsP,UAAW,IAAMpF,OAAOsE,GAAiBtE,OAAOoE,GAAgB,EAAIpE,OAAOoE,GAC3EiB,WAAYrF,OAAOsE,GAAiB,EACpCgB,QAAStF,OAAOoE,GAChBmB,SAAUvF,OAAOsE,IACnB,CACEtH,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IACMvB,EADUuB,EAASE,KAAT,QACKmF,KAAI,SAAAjF,GACrB,MAAO,CACHC,MAAM,EACNC,GAAIF,EAAM,cACV/B,KAAM+B,EAAM,KACZ9C,MAAO8C,EAAM,MACbM,SAAUN,EAAM,SAChBQ,WAAYR,EAAM,WAClBS,SAAUT,EAAM,aAGxB1B,EAAQD,GACRG,GAAY,WACZE,GAAW,wFACXE,IAAgB,MACjBmC,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,QAiXA,kBAAC,KAAD,SAIZ,kBAAC6F,EAAA,EAAD,CAAgB7L,UAAWC,KACvB,kBAAC6L,EAAA,EAAD,CAAOC,KAAK,QAAQhN,UAAWZ,EAAQqG,MAAOlF,aAAW,aACrD,kBAAC0M,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,UAAjB,UACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,UACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,kBAGR,kBAACC,EAAA,EAAD,KACK3G,EAAK4G,KAAI,SAAA1D,GAAG,OACT,kBAACsD,EAAA,EAAD,CAAU1J,IAAKoG,EAAIrB,IACf,kBAAC4E,EAAA,EAAD,CAAWC,MAAM,UAAS,8BAAOxD,EAAItD,OACrC,kBAAC6G,EAAA,EAAD,CAAWC,MAAM,UAAS,8BAAOxD,EAAIrE,QACrC,kBAAC4H,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACsD,EAAA,EAAD,CAAWI,aAAcpC,EAAIjB,SAClB4D,WAAY,CAACiB,MAAO,CAACC,UAAW,WAChCC,WAAW,EACXzB,SAAU,SAACpJ,GAAD,OAjLhC,SAAC+G,EAAKjB,GAC/BkB,GAAUD,GACVA,EAAIjB,SAAWA,EACfhC,EAAQD,EAAKiH,SA8KuDC,CAAqBhE,EAAK/G,EAAMqJ,OAAO1G,UAEvE,8BAAOoE,EAAIjB,WAGnB,kBAACwE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACsD,EAAA,EAAD,CAAWI,aAAcpC,EAAIf,WAClB0D,WAAY,CAACiB,MAAO,CAACC,UAAW,WAChCxB,SAAU,SAACpJ,GAAD,OA9K/B,SAAC+G,EAAKf,GAChCgB,GAAUD,GACVA,EAAIf,WAAaA,EACjBlC,EAAQD,EAAKiH,SA2KuDG,CAAsBlE,EAAK/G,EAAMqJ,OAAO1G,UAExE,8BAAOoE,EAAIf,aAGnB,kBAACsE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,kBAACsD,EAAA,EAAD,CAAWI,aAAcpC,EAAId,SAClByD,WAAY,CAACiB,MAAO,CAACC,UAAW,WAChCxB,SAAU,SAACpJ,GAAD,OA3KjC,SAAC+G,EAAKd,GAC9Be,GAAUD,GACVA,EAAId,SAAWA,EACfnC,EAAQD,EAAKiH,SAwKuDI,CAAoBnE,EAAK/G,EAAMqJ,OAAO1G,UAEtE,8BAAOoE,EAAId,WAGnB,kBAACqE,EAAA,EAAD,CAAWC,MAAM,UACZxD,EAAItB,KACD,6BACI,kBAAClI,EAAA,EAAD,CAAYG,aAAW,OAAOI,QAAS,kBA1U3D,SAACiJ,GACrB,IAAKA,EAAIjB,SAIL,OAHA9B,GAAY,SACZE,GAAW,uFACXE,IAAgB,GAGpB,IAAK2C,EAAIf,WAIL,OAHAhC,GAAY,SACZE,GAAW,mGACXE,IAAgB,GAGpB,IAAK2C,EAAId,SAIL,OAHAjC,GAAY,SACZE,GAAW,mGACXE,IAAgB,GAGpB,IAAMgH,EAAQC,OAAO,mBACrB,OAAKD,EAAME,KAAKvE,EAAIf,YAMfoF,EAAME,KAAKvE,EAAId,UAMfwB,GAAeV,EAAIf,WAAYe,EAAId,eAOxClB,IAAM4G,IAAN,UAAa5N,sCAAb,wBAA2DgJ,EAAIrB,IAAM,CACjEjC,KAAMsD,EAAItD,KACVf,MAAOqE,EAAIrE,MACXoD,SAAUiB,EAAIjB,SACdE,WAAYe,EAAIf,WAChBC,SAAUc,EAAId,UACf,CACChB,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,SAACC,GACL,IAAMI,EAASJ,EAASE,KAAT,OACfyB,EAAItB,MAAO,EACXsB,EAAItD,KAAO+B,EAAM,KACjBuB,EAAIrE,MAAQ8C,EAAM,MAClBuB,EAAIjB,SAAWN,EAAM,SACrBuB,EAAIf,WAAaR,EAAM,WACvBuB,EAAId,SAAWT,EAAM,SACrB1B,EAAQD,EAAKiH,SACb9G,GAAY,WACZE,GAAW,8CACXE,IAAgB,MACjBmC,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,OA/BhBJ,GAAY,SACZE,GAAW,qKACXE,IAAgB,KARhBJ,GAAY,SACZE,GAAW,gIACXE,IAAgB,KARhBJ,GAAY,SACZE,GAAW,gIACXE,IAAgB,IAmTiEwH,CAAgB7E,KACzD,kBAAC,KAAD,OAEJ,kBAACxJ,EAAA,EAAD,CAAYG,aAAW,SAASI,QAAS,kBApQ3D,SAACiJ,GACvB,IAAM8E,EAASxH,EAAQ6C,OAAOH,EAAIrB,KAC9BmG,IACA9E,EAAIjB,SAAW+F,EAAO/F,SACtBiB,EAAIf,WAAa6F,EAAO7F,WACxBe,EAAId,SAAW4F,EAAO5F,gBACf5B,EAAQ6C,OAAOH,EAAIrB,KAC1BpB,EAAWD,IAEf0C,EAAItB,MAAO,EACX3B,EAAQD,EAAKiH,SA0P0EgB,CAAkB/E,KAC7D,kBAAC,KAAD,QAIR,6BACI,kBAACxJ,EAAA,EAAD,CAAYG,aAAW,OAAOI,QAAS,kBAxP3D,SAACiJ,UACd1C,EAAQ6C,OAAOH,EAAIrB,KAC1BpB,EAAWD,GACX0C,EAAItB,MAAO,EACX3B,EAAQD,EAAKiH,SAoPwEiB,CAAgBhF,KACzD,kBAAC,IAAD,OAEJ,kBAACxJ,EAAA,EAAD,CAAYG,aAAW,SAASI,QAAS,kBA/O3D,SAACiJ,GACvBhC,IAAMiH,OAAN,UAAgBjO,sCAAhB,wBAA8DgJ,EAAIrB,IAAM,CACpET,OAAQ,CACJlG,MAAOP,EAAU0G,oBAEtBC,MAAK,kBACGtB,EAAKA,EAAK4J,QAAQ1G,IACzBjD,EAAQD,EAAKiH,SACb9G,GAAY,WACZE,GAAW,8CACXE,IAAgB,MACjBmC,OAAM,SAACC,GACNxC,GAAY,SACZE,GAAWsC,EAAK,SAChBpC,IAAgB,MAiOmE6H,CAAkBlF,KAC7D,kBAAC,KAAD,kBCrnBpD,IAAMjM,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCC,KAAM,CACFC,SAAU,EACV,sBAAuB,CACnBC,WAAY,KAEhB,sBAAuB,CACnBA,WAAY,MAGpBC,WAAY,CACRC,YAAaL,EAAMM,QAAQ,IAE/BC,MAAO,CACHL,SAAU,GAEdM,MAAO,CACHC,MAAO,GACPC,OAAQ,GACRL,YAAaL,EAAMM,QAAQ,IAE/BK,UAAW,CACPC,UAAWZ,EAAMM,QAAQ,GACzBO,aAAcb,EAAMM,QAAQ,GAC5BQ,WAAYd,EAAMM,QAAQ,GAC1BS,cAAef,EAAMM,QAAQ,GAC7BU,YAAahB,EAAMM,QAAQ,IAC3BW,aAAcjB,EAAMM,QAAQ,IAC5B,oBAAqB,CACjBM,UAAWZ,EAAMM,QAAQ,SAKtB,SAASsS,KACpB,IAAMrR,EAAUzB,KADY,EAEcsE,oBAAS,GAFvB,mBAErBX,EAFqB,KAENuC,EAFM,OAGI5B,mBAAS,WAHb,mBAGrB2E,EAHqB,KAGXC,EAHW,OAIE5E,mBAAS,iDAJX,mBAIrB6E,EAJqB,KAIZC,EAJY,KA2D5B,OArDAxH,qBAAU,WACN8B,EAAUqP,GAAG,UAAU,WACnB7M,EAAiBxC,EAAUa,sBAE/B,IAAM1C,EAAOC,IAAGC,MAAMC,OAAOC,SAASC,QAAQL,UACjCM,IAATN,EACAoI,IAAMC,IAAI,qCAAsC,CAC5CC,OAAQ,CACJ6I,UAAW/P,0BACXgQ,cAAehQ,mCACfpB,KAAMA,EACNqR,aAAcjQ,oCAEnBoH,MAAK,SAACC,GACL,GAAIA,EAASE,KAAT,GAAqB,CACrB,IAAM5G,EAAc0G,EAASE,KAAT,aACd2I,EAAS7I,EAASE,KAAT,QACfP,IAAMC,IAAI,mCAAoC,CAC1CC,OAAQ,CACJlG,MAAOL,EACPC,KAAMsP,KAEX9I,MAAK,SAACC,GACDA,EAASE,KAAT,IACA9G,EAAUsC,QAAQsE,EAASE,KAAT,MAClB9G,EAAUuC,eAAerC,GACzBF,EAAUwC,kBAAiB,GAC3BxC,EAAU0P,mBAAmB,YAG7BlK,EAAY,SACZE,EAAWkB,EAASE,KAAT,WAEhBiB,OAAM,SAACC,GACNxC,EAAY,SACZE,EAAWsC,EAAK,iBAIpBxC,EAAY,SACZE,EAAWkB,EAASE,KAAT,UAEhBiB,OAAM,SAACC,GACNxC,EAAY,SACZE,EAAWsC,EAAK,aAIpBxC,EAAY,SACZE,EAAW,2GAEjB,IAEKzF,EAAiB,kBAAC,WAAD,CAAUc,GAAG,gBACjC,yBAAKpC,UAAWZ,EAAQtB,MACpB,kBAACmC,EAAA,EAAD,CAAQC,SAAS,UACb,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAYC,KAAK,QAAQL,UAAWZ,EAAQnB,WAAYqC,MAAM,UAAUC,aAAW,QAC/E,kBAAC,IAAD,OAEJ,kBAACC,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,kEAMR,kBAAC2C,EAAA,EAAD,CAAWC,SAAS,KAAKhB,UAAWZ,EAAQZ,WACvC,YAAcoI,EAAY,6BAAME,GAC7B,6BACI,kBAACwE,GAAA,EAAD,CAAO1E,SAAUA,GAAWE,GAC5B,6BAAK,kBAACpG,EAAA,EAAD,CAAQO,UAAW+P,IAAW5O,GAAG,IAAI9B,MAAM,WAA3C,yCC/F7B,IAAM3C,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCC,KAAM,CACFC,SAAU,EACV,sBAAuB,CACnBC,WAAY,KAEhB,sBAAuB,CACnBA,WAAY,MAGpBI,MAAO,CACHL,SAAU,GAEdS,UAAW,CACPC,UAAWZ,EAAMM,QAAQ,GACzBO,aAAcb,EAAMM,QAAQ,IAEhCyH,aAAc,CACV,yBAA0B,CACtB1H,YAAaL,EAAMM,QAAQ,GAC3B0H,WAAYhI,EAAMM,QAAQ,GAC1BG,MAAO,KAEXI,aAAcb,EAAMM,QAAQ,IAEhC8S,eAAgB,CACZvS,aAAcb,EAAMM,QAAQ,IAEhCsH,MAAO,CACH,uBAAwB,CACpBC,WAAY,SACZ,uBAAwB,CACpBpH,MAAO,MAGf,uBAAwB,CACpB,sBAAuB,CACnB,uBAAwB,CACpBN,WAAY,QAK5BgR,YAAa,CACT,sBAAuB,CACnBhR,WAAY,UAKT,SAASkT,KACpB,IAAM9R,EAAUzB,KADc,EAEEsE,mBAAS,SAFX,mBAEvB2E,EAFuB,aAGA3E,mBAAS,KAHT,mBAGvB6E,EAHuB,aAIU7E,oBAAS,IAJnB,mBAIvB+E,EAJuB,KAITC,EAJS,OAKkBhF,oBAAS,GAL3B,mBAKvBkP,EALuB,KAKLC,EALK,OAMNnP,oBAAS,IAAImE,MAAOC,eANd,mBAMvBC,EANuB,KAMjBC,EANiB,OAOJtE,oBAAS,IAAImE,MAAOI,WAAa,GAP7B,mBAOvBjB,EAPuB,KAOhBkB,EAPgB,OAQNxE,oBAAS,IAAImE,MAAOyE,WARd,mBAQvBrC,EARuB,KAQjB6I,EARiB,OASEpP,mBAAS,IATX,mBASbuN,GATa,aAUAvN,mBAAS,GAVT,mBAUvBqP,EAVuB,KAUdC,EAVc,OAWItP,mBAAS,GAXb,mBAWvBuP,EAXuB,KAWZC,EAXY,QAYFxP,mBAAS,GAZP,qBAYvByP,GAZuB,MAYfC,GAZe,SAaN1P,mBAAS,GAbH,qBAajB2P,IAbiB,gBAcI3P,mBAAS,IAdb,qBAcZ4P,IAdY,gBAeI5P,mBAAS,IAfb,qBAeZ6P,IAfY,gBAgBA7P,mBAAS,IAhBT,qBAgBd8P,IAhBc,aA6CxB3H,GAAsB,SAACvH,EAAOwH,GAC5B,cAAgBA,GAGpBpD,GAAgB,IA2CpB,OACI,0BAAMjH,UAAWZ,EAAQtB,MACrB,kBAACqN,GAAA,EAAD,MAEA,kBAAClL,EAAA,EAAD,CAAQC,SAAS,UACb,kBAACC,EAAA,EAAD,KACI,kBAAC6D,GAAD,MACA,kBAACxD,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,gEAGA,kBAACqE,GAAD,QAIR,kBAAC2I,GAAA,EAAD,CAAUnI,KAAM+D,EAAcqE,iBAAkB,IAAM/G,QAAS8F,IAC3D,kBAACkB,GAAA,EAAD,CAAO1E,SAAUA,EAAUnG,QAAQ,SAAS6D,QAAS8F,IAAsBtD,IAG/E,kBAACyE,GAAA,EAAD,CAAQtI,KAAMkO,EAAkB7M,QAAS,kBAAM8M,GAAoB,KAC/D,kBAAC3F,GAAA,EAAD,CAAazL,UAAWZ,EAAQ4P,aAAhC,kCACA,kBAACtD,GAAA,EAAD,KACI,kBAACoE,GAAA,EAAD,CAAMtR,WAAW,EAAML,QAAS,GAC5B,kBAAC2R,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,SAAIN,WAAW,EAAMK,UAAU,EAAME,OAAO,QAClDC,aAAc1F,EAAM2J,UAAU,KAE7C,kBAACH,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,SAAIN,WAAW,EAAMK,UAAU,EAAME,OAAO,QAClDC,aAAczG,EAAO0K,UAAU,KAE9C,kBAACH,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAAC7D,GAAA,EAAD,CAAaN,UAAU,EAAML,WAAW,EAAMO,OAAO,SACjD,kBAACK,GAAA,EAAD,CAAYC,QAAQ,eAApB,UACA,kBAACC,GAAA,EAAD,CAAc9G,MAAOgD,EAAM+D,WAAY,CAAChE,GAAI,eAC9B0D,SAAU,SAACpJ,GAAD,OAAWwO,EAAQxO,EAAMqJ,OAAO1G,SACpD,mBAvGZ,WAIhB,IAHA,IAAMF,EAAU,GACVmF,EAAM,IAAIrE,KACV4L,EAAO,IAAI5L,KAAKqE,EAAIpE,cAAeoE,EAAIjE,WAAY,KAC5C,CACT,IAAMgC,EAAOwJ,EAAKnH,UAGlB,GAFAvF,EAAQvF,KAAK,4BAAQyD,IAAG,UAAKwO,EAAK3L,cAAV,YAA2B2L,EAAKxL,WAAhC,YAA8CgC,IAASA,IAC/EwJ,EAAKX,QAAQ7I,EAAO,GAChBiC,EAAIjE,aAAewL,EAAKxL,WACxB,MAGR,OAAOlB,IA2FqB,SAIZ,kBAACwK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,IAClB,kBAACpE,EAAA,EAAD,CAAW8B,WAAW,EAAM5B,MAAM,eAAKN,WAAW,EAAMK,UAAU,EAAME,OAAO,QACpEE,SAAU,SAACpJ,GAAD,OAAW2M,EAAY3M,EAAMqJ,OAAO1G,WAE7D,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAAC7D,GAAA,EAAD,CAAaN,UAAU,EAAML,WAAW,EAAMO,OAAO,SACjD,kBAACK,GAAA,EAAD,CAAYC,QAAQ,kBAApB,gBACA,kBAACC,GAAA,EAAD,CAAc9G,MAAO8L,EAAS/E,WAAY,CAAChE,GAAI,kBACjC0D,SAAU,SAACpJ,GAAD,OAAWwO,EAAQxO,EAAMqJ,OAAO1G,SACpD,4BAAQA,MAAO,GAAf,gBACA,4BAAQA,MAAO,GAAf,mBAIZ,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAAC7D,GAAA,EAAD,CAAaN,UAAU,EAAML,WAAW,EAAMO,OAAO,SACjD,kBAACK,GAAA,EAAD,CAAYC,QAAQ,oBAApB,gBACA,kBAACC,GAAA,EAAD,CAAc9G,MAAOgM,EAAWjF,WAAY,CAAChE,GAAI,oBACnC0D,SAAU,SAACpJ,GAAD,OAAW4O,EAAa5O,EAAMqJ,OAAO1G,SACzD,4BAAQA,MAAO,GAAf,gBACA,4BAAQA,MAAO,GAAf,gBACA,4BAAQA,MAAO,GAAf,wBACA,4BAAQA,MAAO,GAAf,mBAIZ,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAAC7D,GAAA,EAAD,CAAaN,UAAU,EAAML,WAAW,EAAMO,OAAO,SACjD,kBAACK,GAAA,EAAD,CAAYC,QAAQ,kBAApB,sBACA,kBAACC,GAAA,EAAD,CAAc9G,MAAOkM,GAAQnF,WAAY,CAAChE,GAAI,kBAChC0D,SAAU,SAACpJ,GAAD,OAAW8O,GAAU9O,EAAMqJ,OAAO1G,SACtD,4BAAQA,MAAO,GAAf,gBACA,4BAAQA,MAAO,GAAf,mBAIZ,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,IAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,eAAKN,WAAW,EAAMK,UAAU,EAAME,OAAO,QACnDE,SAAU,SAACpJ,GAAD,OA7FpB,SAACA,GAClB,iBAAiBsL,KAAKtL,EAAMqJ,OAAO1G,OACnCoM,GAAQ9G,OAAOjI,EAAMqJ,OAAO1G,QAG5B3C,EAAMqJ,OAAO1G,MAAQ,GAwF2ByM,CAAiBpP,OAErD,kBAACiN,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,2BAAON,WAAW,EAAMK,UAAU,EAAME,OAAO,QACrDE,SAAU,SAACpJ,GAAD,OAAWgP,GAAahP,EAAMqJ,OAAO1G,WAE9D,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,2BAAON,WAAW,EAAMK,UAAU,EAAME,OAAO,QACrDE,SAAU,SAACpJ,GAAD,OAAWiP,GAAajP,EAAMqJ,OAAO1G,WAE9D,kBAACsK,GAAA,EAAD,CAAMC,MAAM,EAAMC,GAAI,GAClB,kBAACpE,EAAA,EAAD,CAAWE,MAAM,2BAAON,WAAW,EAAMK,UAAU,EAAME,OAAO,QACrDE,SAAU,SAACpJ,GAAD,OAAWkP,GAAWlP,EAAMqJ,OAAO1G,aAIpE,kBAACmG,GAAA,EAAD,KACI,kBAACjL,EAAA,EAAD,CAAQJ,MAAM,UAAUK,QAAS,kBAAMyQ,GAAoB,KAA3D,kCAGA,kBAAC1Q,EAAA,EAAD,CAAQJ,MAAM,UAAUK,QArGF,cAqGtB,kBAMR,kBAACI,EAAA,EAAD,CAAWC,SAAS,KAAKhB,UAAWZ,EAAQZ,WACxC,kBAAC2B,EAAA,EAAD,CAASH,UAAWZ,EAAQwG,cACxB,kBAACpF,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,6BAIJ,kBAAC0O,EAAA,EAAD,CAAgB7L,UAAWC,IAAOlB,UAAWZ,EAAQ6R,gBACjD,kBAAC9Q,EAAA,EAAD,KACI,kBAACK,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,sBACA,kBAACoO,GAAA,EAAD,CAASpO,MAAM,gBACX,kBAACgC,EAAA,EAAD,CAAYO,QAtJJ,WAC5B,IAAM8J,EAAM,IAAIrE,KAChBG,EAAQwD,OAAOU,EAAIpE,gBACnBI,EAASsD,OAAOU,EAAIjE,WAAa,IACjC6K,EAAQtH,OAAOU,EAAII,YACnB2E,EAAY,IACZ+B,EAAW,GACXE,EAAa,GACbE,GAAU,GACVC,GAAQ,GACRC,GAAa,IACbC,GAAa,IACbC,GAAW,IACXX,GAAoB,KA0II,kBAAC,KAAD,SAIZ,kBAACrE,EAAA,EAAD,CAAOC,KAAK,QAAQhN,UAAWZ,EAAQqG,MAAOlF,aAAW,YACrD,kBAAC0M,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,sBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,oBAKhB,kBAACN,EAAA,EAAD,CAAgB7L,UAAWC,IAAOlB,UAAWZ,EAAQ6R,gBACjD,kBAAC9Q,EAAA,EAAD,KACI,kBAACK,EAAA,EAAD,CAAYC,QAAQ,KAAKT,UAAWZ,EAAQhB,OAA5C,gBACA,kBAACoO,GAAA,EAAD,CAASpO,MAAM,gBACX,kBAACgC,EAAA,EAAD,KACI,kBAAC,KAAD,SAIZ,kBAAC2M,EAAA,EAAD,CAAOC,KAAK,QAAQhN,UAAWZ,EAAQqG,MAAOlF,aAAW,YACrD,kBAAC0M,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,gBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,sBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,sBACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,4BACA,kBAACD,EAAA,EAAD,CAAWC,MAAM,UAAjB,sBC1TZlK,QACW,cAA7BvD,OAAOC,SAASsS,UAEe,UAA7BvS,OAAOC,SAASsS,UAEhBvS,OAAOC,SAASsS,SAASC,MACvB,2DCZNC,IAASjQ,OAAO,mBCID,WACX,OACI,kBAAC,IAAD,KACI,kBAAC,SAAD,KACI,kBAAC,QAAD,CAAOkQ,OAAK,EAACC,KAAK,KAAI,kBAAC,EAAD,OACtB,kBAAC,QAAD,CAAOD,OAAK,EAACC,KAAK,UAAS,kBAAC7B,GAAD,OAC3B,kBAAC3O,EAAD,CAAcuQ,OAAK,EAACC,KAAK,eACrB,kBAACnM,GAAD,OAEJ,kBAACrE,EAAD,CAAcuQ,OAAK,EAACC,KAAK,YACrB,kBAACpB,GAAD,OAEJ,kBAACpP,EAAD,CAAcuQ,OAAK,EAACC,KAAK,cACrB,kBAAC/B,GAAD,OAEJ,kBAACzO,EAAD,CAAcuQ,OAAK,EAACC,KAAK,cACrB,kBAACrD,GAAD,OAEJ,kBAAC,QAAD,CAAOqD,KAAK,KAAI,kBAAC,EAAD,WDtBhB,MAASC,SAASC,eAAe,SD6H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM3K,MAAK,SAAA4K,GACjCA,EAAaC,kB","file":"static/js/main.8aa75d8e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/slack_icon.c0dbdffe.svg\";","import React, {useEffect} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport slack from '../images/slack_icon.svg';\r\nimport Container from '@material-ui/core/Container';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport remark from 'remark';\r\nimport reactRenderer from 'remark-react';\r\nimport qs from \"query-string\";\r\nimport useReactRouter from \"use-react-router\";\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        '& .MuiTypography-h5': {\r\n            fontWeight: 600\r\n        },\r\n        '& .MuiTypography-h6': {\r\n            fontWeight: 600\r\n        }\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    title: {\r\n        flexGrow: 1\r\n    },\r\n    slack: {\r\n        width: 32,\r\n        height: 32,\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    container: {\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(5),\r\n        paddingTop: theme.spacing(3),\r\n        paddingBottom: theme.spacing(3),\r\n        paddingLeft: theme.spacing(10),\r\n        paddingRight: theme.spacing(10)\r\n    }\r\n}));\r\n\r\nconst processor = remark().use(reactRenderer);\r\n\r\nfunction Main() {\r\n    const classes = useStyles();\r\n    const { history } = useReactRouter();\r\n\r\n    useEffect(() => {\r\n        const code = qs.parse(window.location.search).code;\r\n        if (code !== undefined) {\r\n            history.push(`/oauth?code=${code}`);\r\n        }\r\n    }, [history]);\r\n\r\n    /**\r\n     * Slackのログインボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    let handleLogin = () => {\r\n        const clientId = process.env.REACT_APP_OAUTH_CLIENT_ID;\r\n        const redirectUri = process.env.REACT_APP_OAUTH_REDIRECT;\r\n        window.location = `https://slack.com/oauth/authorize?client_id=${clientId}&scope=users:read&redirect_uri=${redirectUri}`;\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar position=\"sticky\">\r\n                <Toolbar>\r\n                    <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        株式会社ベイクラフト\r\n                    </Typography>\r\n                    <Button color=\"inherit\" onClick={handleLogin}>\r\n                        <img src={slack} className={classes.slack} alt=\"slack\" />\r\n                        Login with Slack\r\n                    </Button>\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            <Container maxWidth=\"md\" className={classes.container} component={Paper}>\r\n                <div>\r\n                    {processor.processSync(\r\n                        '## Slackボットモジュールについて\\n' +\r\n                        '### 出勤記録\\n' +\r\n                        '以下のような言葉を含むメッセージに反応します。\\n' +\r\n                        '\\n' +\r\n                        '* モーニング\\n' +\r\n                        '* モ〜ニング\\n' +\r\n                        '* もーにんぐ\\n' +\r\n                        '* も〜にんぐ\\n' +\r\n                        '* おっは\\n' +\r\n                        '* おは\\n' +\r\n                        '* へろ\\n' +\r\n                        '* はろ\\n' +\r\n                        '* ヘロ\\n' +\r\n                        '* ハロ\\n' +\r\n                        '* hi\\n' +\r\n                        '* hello\\n' +\r\n                        '* morning\\n' +\r\n                        '* 出勤\\n' +\r\n                        '\\n' +\r\n                        'メッセージには日時を指定することが可能です。\\n' +\r\n                        '日時を指定しない場合は現在日時で記録されます。\\n' +\r\n                        '\\n' +\r\n                        '* おはようございます 2020/1/29 9:00\\n' +\r\n                        '* おはようございます 1/29 9:00\\n' +\r\n                        '* おはようございます 1/29\\n' +\r\n                        '* おはようございます 9:00\\n' +\r\n                        '* おはようございます\\n' +\r\n                        '\\n' +\r\n                        '### 退勤記録\\n' +\r\n                        '以下のような言葉を含むメッセージに反応します。\\n' +\r\n                        '\\n' +\r\n                        '* バイ\\n' +\r\n                        '* バーイ\\n' +\r\n                        '* バ〜イ\\n' +\r\n                        '* バァイ\\n' +\r\n                        '* ばい\\n' +\r\n                        '* ばーい\\n' +\r\n                        '* ば〜い\\n' +\r\n                        '* ばぁい\\n' +\r\n                        '* おやすみ\\n' +\r\n                        '* おつ\\n' +\r\n                        '* おっー\\n' +\r\n                        '* さらば\\n' +\r\n                        '* お先\\n' +\r\n                        '* お疲\\n' +\r\n                        '* 帰\\n' +\r\n                        '* 乙\\n' +\r\n                        '* bye\\n' +\r\n                        '* night\\n' +\r\n                        '* cu\\n' +\r\n                        '* c u\\n' +\r\n                        '* cyou\\n' +\r\n                        '* c you\\n' +\r\n                        '* seeu\\n' +\r\n                        '* see u\\n' +\r\n                        '* seeyou\\n' +\r\n                        '* see you\\n' +\r\n                        '* 退勤\\n' +\r\n                        '* ごきげんよ\\n' +\r\n                        '* グッバイ\\n' +\r\n                        '* グバイ\\n' +\r\n                        '* さようなら\\n' +\r\n                        '\\n' +\r\n                        'メッセージには日時を指定することが可能です。\\n' +\r\n                        '日時を指定しない場合は現在日時で記録されます。\\n' +\r\n                        '\\n' +\r\n                        '* お疲れ様でした 2020/1/29 17:30\\n' +\r\n                        '* お疲れ様でした 1/29 17:30\\n' +\r\n                        '* お疲れ様でした 1/29\\n' +\r\n                        '* お疲れ様でした 17:30\\n' +\r\n                        '* お疲れ様でした\\n' +\r\n                        '\\n' +\r\n                        '### 休暇記録\\n' +\r\n                        '以下のような言葉を含むメッセージに反応します。\\n' +\r\n                        '\\n' +\r\n                        '* 休\\n' +\r\n                        '* やすま\\n' +\r\n                        '* やすみ\\n' +\r\n                        '* やすむ\\n' +\r\n                        '* 休暇\\n' +\r\n                        '\\n' +\r\n                        'メッセージには日付を指定することが可能です。\\n' +\r\n                        '日付を指定しない場合は現在日付で記録されます。\\n' +\r\n                        '「有休」として記録されます。' +\r\n                        '\\n' +\r\n                        '* 休み 2020/1/29\\n' +\r\n                        '* 休み 1/29\\n' +\r\n                        '* 休み\\n' +\r\n                        '\\n' +\r\n                        'メッセージには午前および午後を指定することも可能です。\\n' +\r\n                        '午前が指定された場合は「有休(AM)」、午後が指定された場合は「有休(PM)」として記録されます。\\n' +\r\n                        '\\n' +\r\n                        '* 午前休み\\n' +\r\n                        '* 午後休み\\n' +\r\n                        '* am休み\\n' +\r\n                        '* pm休み\\n' +\r\n                        '\\n' +\r\n                        'また、ダブルクォートで文字列を括ることでメモ情報を記録することができます。\\n' +\r\n                        '\\n' +\r\n                        '* 休み 1/30 \"ここがメモとして記録される\"\\n' +\r\n                        '* 休み \"ここがメモとして記録される\"'\r\n                    ).contents}\r\n                </div>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Main\r\n","import { EventEmitter } from 'events';\r\n\r\nclass UserStore extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n        this.authenticated = false;\r\n        this.accessToken = '';\r\n        this.user = {};\r\n    }\r\n    isAuthenticated() {\r\n        return this.authenticated;\r\n    }\r\n    setAuthenticated(bool) {\r\n        this.authenticated = bool;\r\n        this.emit('change');\r\n    }\r\n    getAccessToken() {\r\n        return this.accessToken;\r\n    }\r\n    setAccessToken(token) {\r\n        this.accessToken = token;\r\n        this.emit('change');\r\n    }\r\n    getUser() {\r\n        return this.user;\r\n    }\r\n    setUser(user) {\r\n        this.user = user;\r\n        this.emit('change');\r\n    }\r\n}\r\n\r\nconst userStore = new UserStore();\r\n\r\nexport default userStore;\r\n","import React, { useState } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport userStore from './stores/UserStore';\r\n\r\nexport default function PrivateRoute({ children, ...rest }) {\r\n    const [authenticated] = useState(userStore.isAuthenticated());\r\n    return (\r\n        <Route {...rest} render={({ location }) =>\r\n            authenticated ? (children) : (<Redirect to={{ pathname: \"/\", state: { from: location }}}/>)\r\n        }/>\r\n    );\r\n}","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport userStore from '../stores/UserStore';\r\nimport useReactRouter from 'use-react-router';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    userAvatar: {\r\n        marginRight: theme.spacing(2)\r\n    }\r\n}));\r\n\r\nexport default function UserAvatar() {\r\n    const classes = useStyles();\r\n    const [user] = useState(userStore.getUser());\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const { history } = useReactRouter();\r\n\r\n    /**\r\n     * ユーザボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param event イベント\r\n     */\r\n    const handleClickUser = (event) => {\r\n        setAnchorEl(anchorEl ? null : event.currentTarget);\r\n    };\r\n\r\n    /**\r\n     * ユーザメニューでキーダウンイベントが発生した場合に呼ばれます。\r\n     *\r\n     * @param event イベント\r\n     */\r\n    const handleKeyDownUserMenu = (event) => {\r\n        if ('Tab' === event.key) {\r\n            event.preventDefault();\r\n            setAnchorEl(null);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * ユーザメニュー以外がクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickAway = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    /**\r\n     * ログアウトメニューが選択された場合に呼ばれます。\r\n     */\r\n    const handleSelectLogout = () => {\r\n        userStore.setUser(null);\r\n        userStore.setAccessToken(null);\r\n        userStore.setAuthenticated(false);\r\n        history.push('/');\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button color=\"inherit\" onClick={handleClickUser}>\r\n                <Avatar alt=\"avatar\" src={user['profile']['image_48']} className={classes.userAvatar} />\r\n                {user['profile']['real_name']}\r\n            </Button>\r\n            <Popper open={Boolean(anchorEl)} anchorEl={anchorEl}>\r\n                <Paper>\r\n                    <ClickAwayListener onClickAway={handleClickAway}>\r\n                        <MenuList autoFocusItem={Boolean(anchorEl)} onKeyDown={handleKeyDownUserMenu}>\r\n                            <MenuItem onClick={handleSelectLogout}>ログアウト</MenuItem>\r\n                        </MenuList>\r\n                    </ClickAwayListener>\r\n                </Paper>\r\n            </Popper>\r\n        </div>\r\n    );\r\n}","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport {Link} from 'react-router-dom';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport TimelapseIcon from '@material-ui/icons/Timelapse';\r\nimport TimerOffIcon from '@material-ui/icons/TimerOff';\r\nimport AttachMoneyIcon from '@material-ui/icons/AttachMoney';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport userStore from '../stores/UserStore';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport BallotIcon from '@material-ui/icons/Ballot';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    menuButton: {\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    drawerList: {\r\n        width: 250\r\n    },\r\n    nested: {\r\n        paddingLeft: theme.spacing(4),\r\n    }\r\n}));\r\n\r\nexport default function SideMenu() {\r\n    const classes = useStyles();\r\n    const [drawerOpen, setDrawerOpen] = useState(false);\r\n    const [user] = useState(userStore.getUser());\r\n    const [adminOpen, setAdminOpen] = useState(false);\r\n\r\n    const AdminMenu = () => {\r\n        if (user['is_admin']) {\r\n            return (\r\n                <React.Fragment>\r\n                    <Divider />\r\n                    <ListItem button onClick={() => setAdminOpen(!adminOpen)}>\r\n                        <ListItemIcon>\r\n                            <BallotIcon/>\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"管理\" />\r\n                        {adminOpen ? <ExpandLess /> : <ExpandMore />}\r\n                    </ListItem>\r\n                    <Collapse in={adminOpen} timeout=\"auto\" unmountOnExit>\r\n                        <List component=\"div\" disablePadding>\r\n                            <ListItem button className={classes.nested}>\r\n                                <ListItemIcon>\r\n                                    <PeopleIcon/>\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"ユーザ一覧\" />\r\n                            </ListItem>\r\n                        </List>\r\n                    </Collapse>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" onClick={() => setDrawerOpen(true)}>\r\n                <MenuIcon />\r\n            </IconButton>\r\n            <Drawer open={drawerOpen} onClose={() => setDrawerOpen(false)}>\r\n                <div className={classes.drawerList}>\r\n                    <List component=\"nav\">\r\n                        <ListItem button component={Link} to=\"/timerecord\">\r\n                            <ListItemIcon><AccessTimeIcon/></ListItemIcon>\r\n                            <ListItemText primary=\"勤怠記録\"/>\r\n                        </ListItem>\r\n                        <ListItem button component={Link} to=\"/expense\">\r\n                            <ListItemIcon><AttachMoneyIcon/></ListItemIcon>\r\n                            <ListItemText primary=\"経費記録\"/>\r\n                        </ListItem>\r\n                        <Divider />\r\n                        <ListItem button component={Link} to=\"/fixedtime\">\r\n                            <ListItemIcon><TimelapseIcon/></ListItemIcon>\r\n                            <ListItemText primary=\"所定時間設定\"/>\r\n                        </ListItem>\r\n                        <ListItem button component={Link} to=\"/breaktime\">\r\n                            <ListItemIcon><TimerOffIcon/></ListItemIcon>\r\n                            <ListItemText primary=\"休憩時間設定\"/>\r\n                        </ListItem>\r\n                        <AdminMenu/>\r\n                    </List>\r\n                </div>\r\n            </Drawer>\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function MonthOptions() {\r\n    const options = [];\r\n    for (let month = 1; month <= 12; month++) {\r\n        options.push(<option key={month} value={month}>{month}</option>);\r\n    }\r\n    return options;\r\n}\r\n","import React, {useState, useEffect, useCallback} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport userStore from '../stores/UserStore';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Container from '@material-ui/core/Container';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport axios from 'axios';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport NativeSelect from '@material-ui/core/NativeSelect';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport { saveAs } from 'file-saver';\r\nimport UserAvatar from '../components/UserAvatar';\r\nimport SideMenu from '../components/SideMenu';\r\nimport DetailsIcon from '@material-ui/icons/Details';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\r\nimport MonthOptions from '../components/MonthOptions';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        '& .MuiTypography-h5': {\r\n            fontWeight: 600\r\n        },\r\n        '& .MuiTypography-h6': {\r\n            fontWeight: 600\r\n        }\r\n    },\r\n    title: {\r\n        flexGrow: 1\r\n    },\r\n    table: {\r\n        '& .MuiTableCell-root': {\r\n            whiteSpace: 'nowrap'\r\n        },\r\n        '& .MuiTableHead-root': {\r\n            '& .MuiTableRow-root': {\r\n                '& .MuiTableCell-root': {\r\n                    fontWeight: 600\r\n                }\r\n            }\r\n        }\r\n    },\r\n    container: {\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(5),\r\n    },\r\n    summaryContainer: {\r\n        marginBottom: theme.spacing(3)\r\n    },\r\n    tableToolbar: {\r\n        '& .MuiFormControl-root': {\r\n            marginRight: theme.spacing(2),\r\n            marginLeft: theme.spacing(1),\r\n            width: 100\r\n        },\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    holidayCell: {\r\n        color: '#f44336',\r\n    },\r\n    customerField: {\r\n        width: 50\r\n    },\r\n    dateField: {\r\n        width:50\r\n    }\r\n}));\r\n\r\nconst dayOfWeek = ['月', '火', '水', '木', '金', '土', '日'];\r\nconst kindMap = {\r\n    '0': '',\r\n    '10': '有休', '11': '有休(AM)', '12': '有休(PM)',\r\n    '20': '欠勤', '21': '欠勤(AM)', '22': '欠勤(PM)',\r\n    '30': '特休', '31': '特休(AM)', '32': '特休(PM)',\r\n    '40': '代休', '41': '代休(AM)', '42': '代休(PM)',\r\n    '50': '休出'};\r\n\r\nexport default function TimeRecord() {\r\n    const classes = useStyles();\r\n    const [year, setYear] = useState(new Date().getFullYear());\r\n    const [month, setMonth] = useState(new Date().getMonth() + 1);\r\n    const [rows, setRows] = useState([]);\r\n    const [severity, setSeverity] = useState('error');\r\n    const [message, setMessage] = useState('');\r\n    const [snackbarOpen, setSnackbarOpen] = useState(false);\r\n    const [oldRows, setOldRows] = useState({});\r\n    const [detailDialogOpen, setDetailDialogOpen] = useState(false);\r\n    const [detailRow, setDetailRow] = useState({});\r\n    const [summaryRows, setSummaryRows] = useState([]);\r\n\r\n    /**\r\n     * 勤怠記録リストを取得します。\r\n     */\r\n    const loadTimeRecords = useCallback(() => {\r\n        axios.get(`${process.env.REACT_APP_REST_URI}/time_records/${year}/${month}`, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const records = response.data['records'];\r\n            const rows = [];\r\n            records.forEach((record) => {\r\n                rows.push({\r\n                    edit: false,\r\n                    id: record['time_record_id'],\r\n                    year: record['year'],\r\n                    month: record['month'],\r\n                    date: record['date'],\r\n                    day: dayOfWeek[record['day']],\r\n                    holiday: record['holiday'] ? 'H' : '',\r\n                    customer: record['customer'],\r\n                    kind: record['kind'],\r\n                    start_time: record['start_time'],\r\n                    end_time: record['end_time'],\r\n                    total_time: record['total_time'],\r\n                    over_time: record['over_time'],\r\n                    midnight_time: record['midnight_time'],\r\n                    deduction_time: record['deduction_time'],\r\n                    note: record['note']});\r\n            });\r\n            setRows(rows);\r\n            setOldRows({});\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    }, [year, month]);\r\n\r\n    /**\r\n     * 勤怠記録要約を取得します。\r\n     */\r\n    const loadSummary = useCallback(() => {\r\n        axios.get(`${process.env.REACT_APP_REST_URI}/time_records/${year}/${month}/summary`, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const records = response.data['records'];\r\n            const rows = [];\r\n            records.forEach((record) => {\r\n                rows.push({\r\n                    customer: record['customer'],\r\n                    fixed_time: record['fixed_time'],\r\n                    actual_time: record['actual_time'],\r\n                    over_time: record['over_time'],\r\n                    midnight_time: record['midnight_time'],\r\n                    statutory_time: record['statutory_time'],\r\n                    statutory_midnight_time: record['statutory_midnight_time'],\r\n                    deduction_time: record['deduction_time']\r\n                });\r\n            });\r\n            setSummaryRows(rows);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    }, [year, month]);\r\n\r\n    /**\r\n     * 画面ロード時に呼ばれます。\r\n     */\r\n    useEffect(() => {\r\n        if (year > 0) {\r\n            loadTimeRecords();\r\n            loadSummary();\r\n        }\r\n    }, [year, month, loadTimeRecords, loadSummary]);\r\n\r\n    /**\r\n     * 検索ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickSearch = () => {\r\n        // 年の入力がない場合はエラー\r\n        if (!year) {\r\n            setSeverity('error');\r\n            setMessage('年が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        loadTimeRecords();\r\n        loadSummary();\r\n    };\r\n\r\n    /**\r\n     * ダウンロードボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickDownload = () => {\r\n        // 年の入力がない場合はエラー\r\n        if (!year) {\r\n            setSeverity('error');\r\n            setMessage('年が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        axios.get(`${process.env.REACT_APP_REST_URI}/time_records/${year}/${month}/download`, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            },\r\n            responseType: 'blob'\r\n        }).then((response) => {\r\n            const blob = new Blob([response.data], {\r\n                type: response.data.type\r\n            });\r\n            saveAs(blob, `勤怠${year}${month}.xlsx`);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * 確定ボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 勤怠情報\r\n     */\r\n    const handleClickDone = (row) => {\r\n        const regex = RegExp(/\\d{1,2}:\\d{1,2}/);\r\n        if (row.start_time && !regex.test(row.start_time)) {\r\n            setSeverity('error');\r\n            setMessage('始業は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (row.end_time && !regex.test(row.end_time)) {\r\n            setSeverity('error');\r\n            setMessage('終業は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (row.start_time && row.end_time && !validationTime(row.start_time, row.end_time)) {\r\n            setSeverity('error');\r\n            setMessage('始業は終業よりも前の時間を入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        const rowYear = row.year;\r\n        const rowMonth = row.month;\r\n        const rowDate = row.date;\r\n        if (0 === row.id) {\r\n            axios.post(`${process.env.REACT_APP_REST_URI}/time_records/${rowYear}/${rowMonth}/${rowDate}`, {\r\n                customer: row.customer,\r\n                kind: row.kind,\r\n                start_time: row.start_time,\r\n                end_time: row.end_time,\r\n                note: row.note\r\n            }, {\r\n                params: {\r\n                    token: userStore.getAccessToken()\r\n                }\r\n            }).then((response) => {\r\n                recordToRow(response.data['record'], row);\r\n                setRows(rows.slice());\r\n                setSeverity('success');\r\n                setMessage('更新しました。');\r\n                setSnackbarOpen(true);\r\n                loadSummary();\r\n            }).catch((error) => {\r\n                setSeverity('error');\r\n                setMessage(error['message']);\r\n                setSnackbarOpen(true);\r\n            });\r\n\r\n        }\r\n        else {\r\n            axios.put(`${process.env.REACT_APP_REST_URI}/time_records/${rowYear}/${rowMonth}/${rowDate}`, {\r\n                customer: row.customer,\r\n                kind: row.kind,\r\n                start_time: row.start_time,\r\n                end_time: row.end_time,\r\n                note: row.note\r\n            }, {\r\n                params: {\r\n                    token: userStore.getAccessToken()\r\n                }\r\n            }).then((response) => {\r\n                recordToRow(response.data['record'], row);\r\n                setRows(rows.slice());\r\n                setSeverity('success');\r\n                setMessage('更新しました。');\r\n                setSnackbarOpen(true);\r\n                loadSummary();\r\n            }).catch((error) => {\r\n                setSeverity('error');\r\n                setMessage(error['message']);\r\n                setSnackbarOpen(true);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * サービスから取得した勤怠記録情報を行データに設定します。\r\n     *\r\n     * @param record 勤怠記録情報\r\n     * @param row 行データ\r\n     */\r\n    const recordToRow = (record, row) => {\r\n        row.edit = false;\r\n        row.id = record['time_record_id'];\r\n        row.customer = record['customer'];\r\n        row.kind = record['kind'];\r\n        row.start_time = record['start_time'];\r\n        row.end_time = record['end_time'];\r\n        row.total_time = record['total_time'];\r\n        row.note = record['note'];\r\n    };\r\n\r\n    /**\r\n     * 編集ボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 勤怠情報\r\n     */\r\n    const handleClickEdit = (row) => {\r\n        delete oldRows[String(row.date)];\r\n        setOldRows(oldRows);\r\n        row.edit = true;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * キャンセルボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 勤怠情報\r\n     */\r\n    const handleClickCancel = (row) => {\r\n        const oldRow = oldRows[String(row.date)];\r\n        if (oldRow) {\r\n            row.customer = oldRow.customer;\r\n            row.kind = oldRow.kind;\r\n            row.start_time = oldRow.start_time;\r\n            row.end_time = oldRow.end_time;\r\n            row.total_time = oldRow.total_time;\r\n            row.note = oldRow.note;\r\n            delete oldRows[String(row.date)];\r\n            setOldRows(oldRows);\r\n        }\r\n        row.edit = false;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 削除ボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 勤怠情報\r\n     */\r\n    const handleClickDelete = (row) => {\r\n        const rowYear = row.year;\r\n        const rowMonth = row.month;\r\n        const rowDate = row.date;\r\n        axios.delete(`${process.env.REACT_APP_REST_URI}/time_records/${rowYear}/${rowMonth}/${rowDate}`, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then(() => {\r\n            row.id = 0;\r\n            row.customer = null;\r\n            row.kind = 0;\r\n            row.start_time = null;\r\n            row.end_time = null;\r\n            row.total_time = null;\r\n            row.note = null;\r\n            setRows(rows.slice());\r\n            setSeverity('success');\r\n            setMessage('削除しました。');\r\n            setSnackbarOpen(true);\r\n            loadSummary();\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * 勤怠情報をバックアップします。\r\n     *\r\n     * @param row 勤怠情報\r\n     */\r\n    const backupRow = (row) => {\r\n        if (!oldRows.hasOwnProperty(String(row.date))) {\r\n            oldRows[String(row.date)] = Object.assign({}, row);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 客先が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 勤怠情報\r\n     * @param customer 客先\r\n     */\r\n    const handleChangeCustomer = (row, customer) => {\r\n        backupRow(row);\r\n        row.customer = customer;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 勤休が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 勤怠情報\r\n     * @param kind 勤休\r\n     */\r\n    const handleChangeKind = (row, kind) => {\r\n        backupRow(row);\r\n        row.kind = kind;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 始業が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 勤怠情報\r\n     * @param start_time 始業\r\n     */\r\n    const handleChangeStartTime = (row, start_time) => {\r\n        backupRow(row);\r\n        row.start_time = start_time;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 終業が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 勤怠情報\r\n     * @param end_time 終業\r\n     */\r\n    const handleChangeEndTime = (row, end_time) => {\r\n        backupRow(row);\r\n        row.end_time = end_time;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 備考が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 勤怠情報\r\n     * @param note 備考\r\n     */\r\n    const handleChangeNote = (row, note) => {\r\n        backupRow(row);\r\n        row.note = note;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 勤休の選択肢を描画するコンポーネントです。\r\n     *\r\n     * @returns {[]} 選択肢リスト\r\n     * @constructor\r\n     */\r\n    const KindOptions = () => {\r\n        const options = [];\r\n        for (let [key, value] of Object.entries(kindMap)) {\r\n            options.push(<option key={key} value={key}>{value}</option>);\r\n        }\r\n        return options;\r\n    };\r\n\r\n    /**\r\n     * スナックバーの閉じるイベント時に呼ばれます。\r\n     *\r\n     * @param event イベント\r\n     * @param reason 理由\r\n     */\r\n    const handleCloseSnackbar = (event, reason) => {\r\n        if ('clickaway' === reason) {\r\n            return;\r\n        }\r\n        setSnackbarOpen(false);\r\n    };\r\n\r\n    /**\r\n     * 時間の前後検証を実施します。\r\n     *\r\n     * @param start 始業\r\n     * @param end 終業\r\n     * @returns {boolean} true: 検証OK, false: 検証NG\r\n     */\r\n    const validationTime = (start, end) => {\r\n        const now = new Date();\r\n        const starts = start.split(':');\r\n        const ends = end.split(':');\r\n        const sdt = new Date(now.getFullYear(), now.getMonth(), now.getDate(), Number(starts[0]), Number(starts[1]));\r\n        const edt = new Date(now.getFullYear(), now.getMonth(), now.getDate(), Number(ends[0]), Number(ends[1]));\r\n        return sdt < edt;\r\n    };\r\n\r\n    /**\r\n     * 詳細ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickDetails = (row) => {\r\n        setDetailDialogOpen(true);\r\n        setDetailRow(row);\r\n    };\r\n\r\n    /**\r\n     * 時間情報アイテムコンポーネント\r\n     *\r\n     * @param props プロパティ\r\n     * @returns {*}\r\n     * @constructor\r\n     */\r\n    const TimeItem = (props) => {\r\n        return (\r\n            <ListItem>\r\n                <ListItemAvatar>\r\n                    <Avatar>\r\n                        <AccessTimeIcon />\r\n                    </Avatar>\r\n                </ListItemAvatar>\r\n                <ListItemText primary={props.primary} secondary={props.secondary} />\r\n            </ListItem>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <form className={classes.root}>\r\n            <CssBaseline />\r\n            \r\n            <AppBar position=\"sticky\">\r\n                <Toolbar>\r\n                    <SideMenu/>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        株式会社ベイクラフト\r\n                    </Typography>\r\n                    <UserAvatar/>\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            <Snackbar open={snackbarOpen} autoHideDuration={6000} onClose={handleCloseSnackbar}>\r\n                <Alert severity={severity} variant=\"filled\" onClose={handleCloseSnackbar}>{message}</Alert>\r\n            </Snackbar>\r\n\r\n            <Dialog open={detailDialogOpen} onClose={() => setDetailDialogOpen(false)} fullWidth={true} maxWidth=\"xs\">\r\n                <DialogTitle>{detailRow.year}/{detailRow.month}/{detailRow.date}</DialogTitle>\r\n                <DialogContent>\r\n                    <List>\r\n                        <TimeItem primary=\"合計\" secondary={detailRow.total_time} />\r\n                        <Divider variant=\"inset\" component=\"li\" />\r\n                        <TimeItem primary=\"残業\" secondary={detailRow.over_time} />\r\n                        <Divider variant=\"inset\" component=\"li\" />\r\n                        <TimeItem primary=\"深夜残業\" secondary={detailRow.midnight_time} />\r\n                        <Divider variant=\"inset\" component=\"li\" />\r\n                        <TimeItem primary=\"控除\" secondary={detailRow.deduction_time} />\r\n                    </List>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => setDetailDialogOpen(false)} color=\"primary\">\r\n                        閉じる\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Container maxWidth=\"lg\" className={classes.container}>\r\n                <Toolbar className={classes.tableToolbar}>\r\n                    <Typography variant=\"h5\" className={classes.title}>\r\n                        勤怠記録\r\n                    </Typography>\r\n                    <TextField required={true} label=\"年\" margin=\"normal\" defaultValue={year} onChange={(event) => setYear(event.target.value)} />\r\n                    <FormControl required={true} margin=\"normal\">\r\n                        <InputLabel htmlFor=\"select-month\">月</InputLabel>\r\n                        <NativeSelect value={month} inputProps={{id: 'select-month'}}\r\n                                      onChange={(event) => setMonth(event.target.value)}>\r\n                            <MonthOptions />\r\n                        </NativeSelect>\r\n                    </FormControl>\r\n                    <Tooltip title=\"検索\">\r\n                        <IconButton onClick={handleClickSearch}>\r\n                            <SearchIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title=\"ダウンロード\">\r\n                        <IconButton onClick={handleClickDownload}>\r\n                            <GetAppIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </Toolbar>\r\n                <TableContainer component={Paper} className={classes.summaryContainer}>\r\n                    <Table size=\"small\" className={classes.table}>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell align=\"center\">客先</TableCell>\r\n                                <TableCell align=\"center\">所定時間</TableCell>\r\n                                <TableCell align=\"center\">実働時間</TableCell>\r\n                                <TableCell align=\"center\">普通残業</TableCell>\r\n                                <TableCell align=\"center\">深夜残業</TableCell>\r\n                                <TableCell align=\"center\">法休普残</TableCell>\r\n                                <TableCell align=\"center\">法休深残</TableCell>\r\n                                <TableCell align=\"center\">控除</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {summaryRows.map(row => (\r\n                                <TableRow key={row.customer}>\r\n                                    <TableCell align=\"center\">{row.customer}</TableCell>\r\n                                    <TableCell align=\"center\">{row.fixed_time}</TableCell>\r\n                                    <TableCell align=\"center\">{row.actual_time}</TableCell>\r\n                                    <TableCell align=\"center\">{row.over_time}</TableCell>\r\n                                    <TableCell align=\"center\">{row.midnight_time}</TableCell>\r\n                                    <TableCell align=\"center\">{row.statutory_time}</TableCell>\r\n                                    <TableCell align=\"center\">{row.statutory_midnight_time}</TableCell>\r\n                                    <TableCell align=\"center\">{row.deduction_time}</TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n                <TableContainer component={Paper}>\r\n                    <Table className={classes.table} aria-label=\"timerecords\" size=\"small\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell align=\"center\" scope=\"row\">日付</TableCell>\r\n                                <TableCell align=\"center\">曜日</TableCell>\r\n                                <TableCell align=\"center\">休日</TableCell>\r\n                                <TableCell align=\"center\">客先</TableCell>\r\n                                <TableCell align=\"center\">勤休</TableCell>\r\n                                <TableCell align=\"center\">始業</TableCell>\r\n                                <TableCell align=\"center\">終業</TableCell>\r\n                                <TableCell align=\"center\">備考</TableCell>\r\n                                <TableCell align=\"center\">操作</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {rows.map(row => (\r\n                                <TableRow key={row.date}>\r\n                                    <TableCell align=\"center\">{row.date}</TableCell>\r\n                                    <TableCell align=\"center\">{row.day}</TableCell>\r\n                                    <TableCell align=\"center\" className={classes.holidayCell}>{row.holiday}</TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <TextField defaultValue={row.customer} className={classes.customerField}\r\n                                                       inputProps={{style: {textAlign: 'center'}}}\r\n                                                       autoFocus={true}\r\n                                                       onChange={(event) => handleChangeCustomer(row, event.target.value)} />\r\n                                        ) : (\r\n                                            <span>{row.customer}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <NativeSelect value={row.kind}\r\n                                                          onChange={(event) => handleChangeKind(row, event.target.value)}>\r\n                                                <KindOptions />\r\n                                            </NativeSelect>\r\n                                        ) : (\r\n                                            <span>{kindMap[row.kind]}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <TextField defaultValue={row.start_time} className={classes.dateField}\r\n                                                       inputProps={{style: {textAlign: 'center'}}}\r\n                                                       onChange={(event) => handleChangeStartTime(row, event.target.value)} />\r\n                                        ) : (\r\n                                            <span>{row.start_time}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <TextField defaultValue={row.end_time} className={classes.dateField}\r\n                                                       inputProps={{style: {textAlign: 'center'}}}\r\n                                                       onChange={(event) => handleChangeEndTime(row, event.target.value)} />\r\n                                        ) : (\r\n                                            <span>{row.end_time}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    {row.edit ? (\r\n                                        <TableCell align=\"center\">\r\n                                            <TextField defaultValue={row.note}\r\n                                                       onChange={(event) => handleChangeNote(row, event.target.value)} />\r\n                                        </TableCell>\r\n                                    ) : (\r\n                                        <TableCell><span>{row.note}</span></TableCell>\r\n                                    )}\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <div>\r\n                                                <IconButton aria-label=\"done\" onClick={() => handleClickDone(row)}>\r\n                                                    <DoneIcon />\r\n                                                </IconButton>\r\n                                                <IconButton aria-label=\"cancel\" onClick={() => handleClickCancel(row)}>\r\n                                                    <CancelIcon />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div>\r\n                                                <IconButton aria-label=\"edit\" onClick={() => handleClickEdit(row)}>\r\n                                                    <EditIcon />\r\n                                                </IconButton>\r\n                                                <IconButton aria-label=\"delete\" onClick={() => handleClickDelete(row)}>\r\n                                                    <DeleteIcon />\r\n                                                </IconButton>\r\n                                                <Tooltip title=\"詳細\">\r\n                                                    <IconButton aria-label=\"details\" onClick={() => handleClickDetails(row)}>\r\n                                                        <DetailsIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                            </div>\r\n                                        )}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Container>\r\n        </form>\r\n    );\r\n}\r\n","import React, {useState, useEffect, useCallback} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport userStore from '../stores/UserStore';\r\nimport Container from '@material-ui/core/Container';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport axios from 'axios';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport NativeSelect from '@material-ui/core/NativeSelect';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport UserAvatar from '../components/UserAvatar';\r\nimport SideMenu from '../components/SideMenu';\r\nimport MonthOptions from '../components/MonthOptions';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        '& .MuiTypography-h5': {\r\n            fontWeight: 600\r\n        },\r\n        '& .MuiTypography-h6': {\r\n            fontWeight: 600\r\n        }\r\n    },\r\n    title: {\r\n        flexGrow: 1\r\n    },\r\n    container: {\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    tableToolbar: {\r\n        '& .MuiFormControl-root': {\r\n            marginRight: theme.spacing(2),\r\n            marginLeft: theme.spacing(1),\r\n            width: 100\r\n        },\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    table: {\r\n        '& .MuiTableCell-root': {\r\n            whiteSpace: 'nowrap',\r\n            '& .MuiTextField-root': {\r\n                width: 100\r\n            }\r\n        },\r\n        '& .MuiTableHead-root': {\r\n            '& .MuiTableRow-root': {\r\n                '& .MuiTableCell-root': {\r\n                    fontWeight: 600\r\n                }\r\n            }\r\n        }\r\n    },\r\n    dialogTitle: {\r\n        '& .MuiTypography-h6': {\r\n            fontWeight: 600\r\n        }\r\n    }\r\n}));\r\n\r\nexport default function BreakTime() {\r\n    const classes = useStyles();\r\n    const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\r\n    const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth() + 1);\r\n    const [rows, setRows] = useState([]);\r\n    const [oldRows, setOldRows] = useState({});\r\n    const [addModalOpen, setAddModelOpen] = useState(false);\r\n    const [year, setYear] = useState(selectedYear);\r\n    const [month, setMonth] = useState(selectedMonth);\r\n    const [customer, setCustomer] = useState('');\r\n    const [startTime, setStartTime] = useState('');\r\n    const [endTime, setEndTime] = useState('');\r\n    const [severity, setSeverity] = useState('error');\r\n    const [message, setMessage] = useState('');\r\n    const [snackbarOpen, setSnackbarOpen] = useState(false);\r\n\r\n    /**\r\n     * 休憩時間リストを取得します。\r\n     */\r\n    const loadBreakTimes = useCallback(() => {\r\n        axios.get(`${process.env.REACT_APP_REST_URI}/break_times/${selectedYear}/${selectedMonth}`, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const records = response.data['records'];\r\n            const rows = records.map(record => {\r\n                return {\r\n                    edit: false,\r\n                    id: record['break_time_id'],\r\n                    year: record['year'],\r\n                    month: record['month'],\r\n                    customer: record['customer'],\r\n                    start_time: record['start_time'],\r\n                    end_time: record['end_time']\r\n                };\r\n            });\r\n            setRows(rows);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    }, [selectedYear, selectedMonth]);\r\n\r\n    /**\r\n     * 画面ロード時に呼ばれます。\r\n     */\r\n    useEffect(() => {\r\n        if (selectedYear > 0) {\r\n            loadBreakTimes();\r\n        }\r\n    }, [selectedYear, selectedMonth, loadBreakTimes]);\r\n\r\n    /**\r\n     * 検索ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickSearch = () => {\r\n        // 年の入力がない場合はエラー\r\n        if (!selectedYear) {\r\n            setSeverity('error');\r\n            setMessage('年が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        loadBreakTimes();\r\n    };\r\n\r\n    /**\r\n     * 追加ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickAdd = () => {\r\n        setYear(selectedYear);\r\n        setMonth(selectedMonth);\r\n        setCustomer('');\r\n        setStartTime('');\r\n        setEndTime('');\r\n        setAddModelOpen(true);\r\n    };\r\n\r\n    /**\r\n     * 前月流用ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickCopy = () => {\r\n        // 年の入力がない場合はエラー\r\n        if (!selectedYear) {\r\n            setSeverity('error');\r\n            setMessage('年が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        axios.post(`${process.env.REACT_APP_REST_URI}/break_times/copy`, {\r\n            from_year: 1 === Number(selectedMonth) ? Number(selectedYear) - 1 : Number(selectedYear),\r\n            from_month: Number(selectedMonth) - 1,\r\n            to_year: Number(selectedYear),\r\n            to_month: Number(selectedMonth)\r\n        },{\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const records = response.data['records'];\r\n            const rows = records.map(record => {\r\n                return {\r\n                    edit: false,\r\n                    id: record['break_time_id'],\r\n                    year: record['year'],\r\n                    month: record['month'],\r\n                    customer: record['customer'],\r\n                    start_time: record['start_time'],\r\n                    end_time: record['end_time']\r\n                };\r\n            });\r\n            setRows(rows);\r\n            setSeverity('success');\r\n            setMessage('前月の設定をコピーしました。');\r\n            setSnackbarOpen(true);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * 休憩時間追加ダイアログでキャンセルボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickDialogCancel = () => {\r\n        setAddModelOpen(false);\r\n    };\r\n\r\n    /**\r\n     * 休憩時間追加ダイアログで追加ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickDialogAdd = () => {\r\n        if (!customer) {\r\n            setSeverity('error');\r\n            setMessage('客先が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!startTime) {\r\n            setSeverity('error');\r\n            setMessage('開始時間が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!endTime) {\r\n            setSeverity('error');\r\n            setMessage('終了時間が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        const regex = RegExp(/\\d{1,2}:\\d{1,2}/);\r\n        if (!regex.test(startTime)) {\r\n            setSeverity('error');\r\n            setMessage('開始時間は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!regex.test(endTime)) {\r\n            setSeverity('error');\r\n            setMessage('終了時間は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!validationTime(startTime, endTime)) {\r\n            setSeverity('error');\r\n            setMessage('開始時間は終了時間よりも前の時間を入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        axios.post(`${process.env.REACT_APP_REST_URI}/break_times`, {\r\n            year: year,\r\n            month: month,\r\n            customer: customer,\r\n            start_time: startTime,\r\n            end_time: endTime\r\n        }, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const record = response.data['record'];\r\n            rows.push({\r\n                edit: false,\r\n                id: record['break_time_id'],\r\n                year: record['year'],\r\n                month: record['month'],\r\n                customer: record['customer'],\r\n                start_time: record['start_time'],\r\n                end_time: record['end_time']\r\n            });\r\n            setRows(rows.slice());\r\n            setAddModelOpen(false);\r\n            setSeverity('success');\r\n            setMessage('休憩時間を追加しました。');\r\n            setSnackbarOpen(true);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * 確定ボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 休憩時間情報\r\n     */\r\n    const handleClickDone = (row) => {\r\n        if (!row.customer) {\r\n            setSeverity('error');\r\n            setMessage('客先が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!row.start_time) {\r\n            setSeverity('error');\r\n            setMessage('開始時間が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!row.end_time) {\r\n            setSeverity('error');\r\n            setMessage('終了時間が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        const regex = RegExp(/\\d{1,2}:\\d{1,2}/);\r\n        if (!regex.test(row.start_time)) {\r\n            setSeverity('error');\r\n            setMessage('開始時間は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!regex.test(row.end_time)) {\r\n            setSeverity('error');\r\n            setMessage('終了時間は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!validationTime(row.start_time, row.end_time)) {\r\n            setSeverity('error');\r\n            setMessage('開始時間は終了時間よりも前の時間を入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        axios.put(`${process.env.REACT_APP_REST_URI}/break_times/${row.id}`, {\r\n            year: row.year,\r\n            month: row.month,\r\n            customer: row.customer,\r\n            start_time: row.start_time,\r\n            end_time: row.end_time\r\n        }, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const record = response.data['record'];\r\n            row.edit = false;\r\n            row.year = record['year'];\r\n            row.month = record['month'];\r\n            row.customer = record['customer'];\r\n            row.start_time = record['start_time'];\r\n            row.end_time = record['end_time'];\r\n            setRows(rows.slice());\r\n            setSeverity('success');\r\n            setMessage('更新しました。');\r\n            setSnackbarOpen(true);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * キャンセルボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 休憩時間情報\r\n     */\r\n    const handleClickCancel = (row) => {\r\n        const oldRow = oldRows[String(row.id)];\r\n        if (oldRow) {\r\n            row.customer = oldRow.customer;\r\n            row.start_time = oldRow.start_time;\r\n            row.end_time = oldRow.end_time;\r\n            delete oldRows[String(row.id)];\r\n            setOldRows(oldRows);\r\n        }\r\n        row.edit = false;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 編集ボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 休憩時間情報\r\n     */\r\n    const handleClickEdit = (row) => {\r\n        delete oldRows[String(row.id)];\r\n        setOldRows(oldRows);\r\n        row.edit = true;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 削除ボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 休憩時間情報\r\n     */\r\n    const handleClickDelete = (row) => {\r\n        axios.delete(`${process.env.REACT_APP_REST_URI}/break_times/${row.id}`, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then(() => {\r\n            delete rows[rows.indexOf(row)];\r\n            setRows(rows.slice());\r\n            setSeverity('success');\r\n            setMessage('削除しました。');\r\n            setSnackbarOpen(true);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * 客先が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 休憩時間情報\r\n     * @param customer 客先\r\n     */\r\n    const handleChangeCustomer = (row, customer) => {\r\n        backupRow(row);\r\n        row.customer = customer;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 開始時間が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 休憩時間情報\r\n     * @param start_time 開始時間\r\n     */\r\n    const handleChangeStartTime = (row, start_time) => {\r\n        backupRow(row);\r\n        row.start_time = start_time;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 終了時間が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 休憩時間情報\r\n     * @param end_time 終了時間\r\n     */\r\n    const handleChangeEndTime = (row, end_time) => {\r\n        backupRow(row);\r\n        row.end_time = end_time;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 休憩時間情報をバックアップします。\r\n     *\r\n     * @param row 休憩時間情報\r\n     */\r\n    const backupRow = (row) => {\r\n        if (!oldRows.hasOwnProperty(String(row.id))) {\r\n            oldRows[String(row.id)] = Object.assign({}, row);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * スナックバーの閉じるイベント時に呼ばれます。\r\n     *\r\n     * @param event イベント\r\n     * @param reason 理由\r\n     */\r\n    const handleCloseSnackbar = (event, reason) => {\r\n        if ('clickaway' === reason) {\r\n            return;\r\n        }\r\n        setSnackbarOpen(false);\r\n    };\r\n\r\n    /**\r\n     * 時間の前後検証を実施します。\r\n     *\r\n     * @param start 開始時間\r\n     * @param end 終了時間\r\n     * @returns {boolean} true: 検証OK, false: 検証NG\r\n     */\r\n    const validationTime = (start, end) => {\r\n        const now = new Date();\r\n        const starts = start.split(':');\r\n        const ends = end.split(':');\r\n        const sdt = new Date(now.getFullYear(), now.getMonth(), now.getDate(), Number(starts[0]), Number(starts[1]));\r\n        const edt = new Date(now.getFullYear(), now.getMonth(), now.getDate(), Number(ends[0]), Number(ends[1]));\r\n        return sdt < edt;\r\n    };\r\n\r\n    return (\r\n        <form className={classes.root}>\r\n            <CssBaseline />\r\n\r\n            <AppBar position='sticky'>\r\n                <Toolbar>\r\n                    <SideMenu/>\r\n                    <Typography variant='h6' className={classes.title}>\r\n                        株式会社ベイクラフト\r\n                    </Typography>\r\n                    <UserAvatar/>\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            <Dialog open={addModalOpen} onClose={() => setAddModelOpen(false)}>\r\n                <DialogTitle className={classes.dialogTitle}>休憩時間追加</DialogTitle>\r\n                <DialogContent>\r\n                    <Grid container={true} spacing={2}>\r\n                        <Grid item={true} xs={3}>\r\n                            <TextField label=\"年\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       defaultValue={year} disabled={true} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={3}>\r\n                            <TextField label=\"月\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       defaultValue={month} disabled={true} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={6}/>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField autoFocus={true} label=\"客先\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setCustomer(event.target.value)} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField label=\"開始時間\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setStartTime(event.target.value)} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField label=\"終了時間\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setEndTime(event.target.value)} />\r\n                        </Grid>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClickDialogCancel} color=\"primary\">\r\n                        キャンセル\r\n                    </Button>\r\n                    <Button onClick={handleClickDialogAdd} color=\"primary\">\r\n                        追加\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Snackbar open={snackbarOpen} autoHideDuration={6000} onClose={handleCloseSnackbar}>\r\n                <Alert severity={severity} variant=\"filled\" onClose={handleCloseSnackbar}>{message}</Alert>\r\n            </Snackbar>\r\n\r\n            <Container maxWidth='lg' className={classes.container}>\r\n                <Toolbar className={classes.tableToolbar}>\r\n                    <Typography variant=\"h5\" className={classes.title}>\r\n                        休憩時間設定\r\n                    </Typography>\r\n                    <TextField required={true} label=\"年\" margin=\"normal\" defaultValue={selectedYear} \r\n                               onChange={(event) => setSelectedYear(event.target.value)} />\r\n                    <FormControl required={true} margin=\"normal\">\r\n                        <InputLabel htmlFor=\"select-month\">月</InputLabel>\r\n                        <NativeSelect value={selectedMonth} inputProps={{id: 'select-month'}}\r\n                                      onChange={(event) => setSelectedMonth(event.target.value)}>\r\n                            <MonthOptions />\r\n                        </NativeSelect>\r\n                    </FormControl>\r\n                    <Tooltip title=\"検索\">\r\n                        <IconButton onClick={handleClickSearch}>\r\n                            <SearchIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title=\"追加\">\r\n                        <IconButton onClick={handleClickAdd}>\r\n                            <AddIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title=\"前月流用\">\r\n                        <IconButton onClick={handleClickCopy}>\r\n                            <FileCopyIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </Toolbar>\r\n                <TableContainer component={Paper}>\r\n                    <Table size=\"small\" className={classes.table} aria-label=\"breaktime\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell align=\"center\">年</TableCell>\r\n                                <TableCell align=\"center\">月</TableCell>\r\n                                <TableCell align=\"center\">客先</TableCell>\r\n                                <TableCell align=\"center\">開始時間</TableCell>\r\n                                <TableCell align=\"center\">終了時間</TableCell>\r\n                                <TableCell align=\"center\">操作</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {rows.map(row => (\r\n                                <TableRow key={row.id}>\r\n                                    <TableCell align=\"center\"><span>{row.year}</span></TableCell>\r\n                                    <TableCell align=\"center\"><span>{row.month}</span></TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <TextField defaultValue={row.customer}\r\n                                                       inputProps={{style: {textAlign: 'center'}}}\r\n                                                       autoFocus={true}\r\n                                                       onChange={(event) => handleChangeCustomer(row, event.target.value)} />\r\n                                        ) : (\r\n                                            <span>{row.customer}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <TextField defaultValue={row.start_time}\r\n                                                       inputProps={{style: {textAlign: 'center'}}}\r\n                                                       onChange={(event) => handleChangeStartTime(row, event.target.value)} />\r\n                                        ) : (\r\n                                            <span>{row.start_time}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <TextField defaultValue={row.end_time}\r\n                                                       inputProps={{style: {textAlign: 'center'}}}\r\n                                                       onChange={(event) => handleChangeEndTime(row, event.target.value)} />\r\n                                        ) : (\r\n                                            <span>{row.end_time}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <div>\r\n                                                <IconButton aria-label=\"done\" onClick={() => handleClickDone(row)}>\r\n                                                    <DoneIcon />\r\n                                                </IconButton>\r\n                                                <IconButton aria-label=\"cancel\" onClick={() => handleClickCancel(row)}>\r\n                                                    <CancelIcon />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div>\r\n                                                <IconButton aria-label=\"edit\" onClick={() => handleClickEdit(row)}>\r\n                                                    <EditIcon />\r\n                                                </IconButton>\r\n                                                <IconButton aria-label=\"delete\" onClick={() => handleClickDelete(row)}>\r\n                                                    <DeleteIcon />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        )}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Container>\r\n        </form>\r\n    );\r\n}\r\n","import React, {useState, useEffect, useCallback} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport NativeSelect from '@material-ui/core/NativeSelect';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Container from '@material-ui/core/Container';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport userStore from '../stores/UserStore';\r\nimport axios from 'axios';\r\nimport UserAvatar from '../components/UserAvatar';\r\nimport SideMenu from '../components/SideMenu';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport MonthOptions from '../components/MonthOptions';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        '& .MuiTypography-h5': {\r\n            fontWeight: 600\r\n        },\r\n        '& .MuiTypography-h6': {\r\n            fontWeight: 600\r\n        }\r\n    },\r\n    title: {\r\n        flexGrow: 1\r\n    },\r\n    container: {\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    tableToolbar: {\r\n        '& .MuiFormControl-root': {\r\n            marginRight: theme.spacing(2),\r\n            marginLeft: theme.spacing(1),\r\n            width: 100\r\n        },\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    table: {\r\n        '& .MuiTableCell-root': {\r\n            whiteSpace: 'nowrap',\r\n            '& .MuiTextField-root': {\r\n                width: 100\r\n            }\r\n        },\r\n        '& .MuiTableHead-root': {\r\n            '& .MuiTableRow-root': {\r\n                '& .MuiTableCell-root': {\r\n                    fontWeight: 600\r\n                }\r\n            }\r\n        }\r\n    },\r\n    dialogTitle: {\r\n        '& .MuiTypography-h6': {\r\n            fontWeight: 600\r\n        }\r\n    }\r\n}));\r\n\r\nexport default function FixedTime() {\r\n    const classes = useStyles();\r\n    const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\r\n    const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth() + 1);\r\n    const [rows, setRows] = useState([]);\r\n    const [oldRows, setOldRows] = useState({});\r\n    const [addModalOpen, setAddModelOpen] = useState(false);\r\n    const [year, setYear] = useState(selectedYear);\r\n    const [month, setMonth] = useState(selectedMonth);\r\n    const [customer, setCustomer] = useState('');\r\n    const [startTime, setStartTime] = useState('');\r\n    const [endTime, setEndTime] = useState('');\r\n    const [severity, setSeverity] = useState('error');\r\n    const [message, setMessage] = useState('');\r\n    const [snackbarOpen, setSnackbarOpen] = useState(false);\r\n\r\n    /**\r\n     * 所定時間リストを取得します。\r\n     */\r\n    const loadFixedTimes = useCallback(() => {\r\n        axios.get(`${process.env.REACT_APP_REST_URI}/fixed_times/${selectedYear}/${selectedMonth}`, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const records = response.data['records'];\r\n            const rows = records.map(record => {\r\n                return {\r\n                    edit: false,\r\n                    id: record['fixed_time_id'],\r\n                    year: record['year'],\r\n                    month: record['month'],\r\n                    customer: record['customer'],\r\n                    start_time: record['start_time'],\r\n                    end_time: record['end_time']\r\n                };\r\n            });\r\n            setRows(rows);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    }, [selectedYear, selectedMonth]);\r\n\r\n    /**\r\n     * 画面ロード時に呼ばれます。\r\n     */\r\n    useEffect(() => {\r\n        if (selectedYear > 0) {\r\n            loadFixedTimes();\r\n        }\r\n    }, [selectedYear, selectedMonth, loadFixedTimes]);\r\n\r\n    /**\r\n     * 検索ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickSearch = () => {\r\n        // 年の入力がない場合はエラー\r\n        if (!selectedYear) {\r\n            setSeverity('error');\r\n            setMessage('年が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        loadFixedTimes();\r\n    };\r\n\r\n    /**\r\n     * 追加ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickAdd = () => {\r\n        setYear(selectedYear);\r\n        setMonth(selectedMonth);\r\n        setCustomer('');\r\n        setStartTime('');\r\n        setEndTime('');\r\n        setAddModelOpen(true);\r\n    };\r\n\r\n    /**\r\n     * 前月流用ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickCopy = () => {\r\n        // 年の入力がない場合はエラー\r\n        if (!selectedYear) {\r\n            setSeverity('error');\r\n            setMessage('年が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        axios.post(`${process.env.REACT_APP_REST_URI}/fixed_times/copy`, {\r\n            from_year: 1 === Number(selectedMonth) ? Number(selectedYear) - 1 : Number(selectedYear),\r\n            from_month: Number(selectedMonth) - 1,\r\n            to_year: Number(selectedYear),\r\n            to_month: Number(selectedMonth)\r\n        },{\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const records = response.data['records'];\r\n            const rows = records.map(record => {\r\n                return {\r\n                    edit: false,\r\n                    id: record['fixed_time_id'],\r\n                    year: record['year'],\r\n                    month: record['month'],\r\n                    customer: record['customer'],\r\n                    start_time: record['start_time'],\r\n                    end_time: record['end_time']\r\n                };\r\n            });\r\n            setRows(rows);\r\n            setSeverity('success');\r\n            setMessage('前月の設定をコピーしました。');\r\n            setSnackbarOpen(true);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * 所定時間追加ダイアログでキャンセルボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickDialogCancel = () => {\r\n        setAddModelOpen(false);\r\n    };\r\n\r\n    /**\r\n     * 所定時間追加ダイアログで追加ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickDialogAdd = () => {\r\n        if (!customer) {\r\n            setSeverity('error');\r\n            setMessage('客先が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!startTime) {\r\n            setSeverity('error');\r\n            setMessage('開始時間が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!endTime) {\r\n            setSeverity('error');\r\n            setMessage('終了時間が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        const regex = RegExp(/\\d{1,2}:\\d{1,2}/);\r\n        if (!regex.test(startTime)) {\r\n            setSeverity('error');\r\n            setMessage('開始時間は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!regex.test(endTime)) {\r\n            setSeverity('error');\r\n            setMessage('終了時間は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!validationTime(startTime, endTime)) {\r\n            setSeverity('error');\r\n            setMessage('開始時間は終了時間よりも前の時間を入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        axios.post(`${process.env.REACT_APP_REST_URI}/fixed_times`, {\r\n            year: year,\r\n            month: month,\r\n            customer: customer,\r\n            start_time: startTime,\r\n            end_time: endTime\r\n        }, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const record = response.data['record'];\r\n            rows.push({\r\n                edit: false,\r\n                id: record['fixed_time_id'],\r\n                year: record['year'],\r\n                month: record['month'],\r\n                customer: record['customer'],\r\n                start_time: record['start_time'],\r\n                end_time: record['end_time']\r\n            });\r\n            setRows(rows.slice());\r\n            setAddModelOpen(false);\r\n            setSeverity('success');\r\n            setMessage('所定時間を追加しました。');\r\n            setSnackbarOpen(true);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * 確定ボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 所定時間情報\r\n     */\r\n    const handleClickDone = (row) => {\r\n        if (!row.customer) {\r\n            setSeverity('error');\r\n            setMessage('客先が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!row.start_time) {\r\n            setSeverity('error');\r\n            setMessage('開始時間が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!row.end_time) {\r\n            setSeverity('error');\r\n            setMessage('終了時間が入力されていません。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        const regex = RegExp(/\\d{1,2}:\\d{1,2}/);\r\n        if (!regex.test(row.start_time)) {\r\n            setSeverity('error');\r\n            setMessage('開始時間は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!regex.test(row.end_time)) {\r\n            setSeverity('error');\r\n            setMessage('終了時間は「HH:mm」形式で入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n        if (!validationTime(row.start_time, row.end_time)) {\r\n            setSeverity('error');\r\n            setMessage('開始時間は終了時間よりも前の時間を入力してください。');\r\n            setSnackbarOpen(true);\r\n            return;\r\n        }\r\n\r\n        axios.put(`${process.env.REACT_APP_REST_URI}/fixed_times/${row.id}`, {\r\n            year: row.year,\r\n            month: row.month,\r\n            customer: row.customer,\r\n            start_time: row.start_time,\r\n            end_time: row.end_time\r\n        }, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then((response) => {\r\n            const record = response.data['record'];\r\n            row.edit = false;\r\n            row.year = record['year'];\r\n            row.month = record['month'];\r\n            row.customer = record['customer'];\r\n            row.start_time = record['start_time'];\r\n            row.end_time = record['end_time'];\r\n            setRows(rows.slice());\r\n            setSeverity('success');\r\n            setMessage('更新しました。');\r\n            setSnackbarOpen(true);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * キャンセルボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 所定時間情報\r\n     */\r\n    const handleClickCancel = (row) => {\r\n        const oldRow = oldRows[String(row.id)];\r\n        if (oldRow) {\r\n            row.customer = oldRow.customer;\r\n            row.start_time = oldRow.start_time;\r\n            row.end_time = oldRow.end_time;\r\n            delete oldRows[String(row.id)];\r\n            setOldRows(oldRows);\r\n        }\r\n        row.edit = false;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 編集ボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 所定時間情報\r\n     */\r\n    const handleClickEdit = (row) => {\r\n        delete oldRows[String(row.id)];\r\n        setOldRows(oldRows);\r\n        row.edit = true;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 削除ボタンがクリックされた場合に呼ばれます。\r\n     *\r\n     * @param row 所定時間情報\r\n     */\r\n    const handleClickDelete = (row) => {\r\n        axios.delete(`${process.env.REACT_APP_REST_URI}/fixed_times/${row.id}`, {\r\n            params: {\r\n                token: userStore.getAccessToken()\r\n            }\r\n        }).then(() => {\r\n            delete rows[rows.indexOf(row)];\r\n            setRows(rows.slice());\r\n            setSeverity('success');\r\n            setMessage('削除しました。');\r\n            setSnackbarOpen(true);\r\n        }).catch((error) => {\r\n            setSeverity('error');\r\n            setMessage(error['message']);\r\n            setSnackbarOpen(true);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * 客先が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 所定時間情報\r\n     * @param customer 客先\r\n     */\r\n    const handleChangeCustomer = (row, customer) => {\r\n        backupRow(row);\r\n        row.customer = customer;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 開始時間が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 所定時間情報\r\n     * @param start_time 開始時間\r\n     */\r\n    const handleChangeStartTime = (row, start_time) => {\r\n        backupRow(row);\r\n        row.start_time = start_time;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 終了時間が変更された場合に呼ばれます。\r\n     *\r\n     * @param row 所定時間情報\r\n     * @param end_time 終了時間\r\n     */\r\n    const handleChangeEndTime = (row, end_time) => {\r\n        backupRow(row);\r\n        row.end_time = end_time;\r\n        setRows(rows.slice());\r\n    };\r\n\r\n    /**\r\n     * 所定時間情報をバックアップします。\r\n     *\r\n     * @param row 所定時間情報\r\n     */\r\n    const backupRow = (row) => {\r\n        if (!oldRows.hasOwnProperty(String(row.id))) {\r\n            oldRows[String(row.id)] = Object.assign({}, row);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * スナックバーの閉じるイベント時に呼ばれます。\r\n     *\r\n     * @param event イベント\r\n     * @param reason 理由\r\n     */\r\n    const handleCloseSnackbar = (event, reason) => {\r\n        if ('clickaway' === reason) {\r\n            return;\r\n        }\r\n        setSnackbarOpen(false);\r\n    };\r\n\r\n    /**\r\n     * 時間の前後検証を実施します。\r\n     *\r\n     * @param start 開始時間\r\n     * @param end 終了時間\r\n     * @returns {boolean} true: 検証OK, false: 検証NG\r\n     */\r\n    const validationTime = (start, end) => {\r\n        const now = new Date();\r\n        const starts = start.split(':');\r\n        const ends = end.split(':');\r\n        const sdt = new Date(now.getFullYear(), now.getMonth(), now.getDate(), Number(starts[0]), Number(starts[1]));\r\n        const edt = new Date(now.getFullYear(), now.getMonth(), now.getDate(), Number(ends[0]), Number(ends[1]));\r\n        return sdt < edt;\r\n    };\r\n\r\n    return (\r\n        <form className={classes.root}>\r\n            <CssBaseline />\r\n\r\n            <AppBar position='sticky'>\r\n                <Toolbar>\r\n                    <SideMenu/>\r\n                    <Typography variant='h6' className={classes.title}>\r\n                        株式会社ベイクラフト\r\n                    </Typography>\r\n                    <UserAvatar/>\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            <Dialog open={addModalOpen} onClose={() => setAddModelOpen(false)}>\r\n                <DialogTitle className={classes.dialogTitle}>所定時間追加</DialogTitle>\r\n                <DialogContent>\r\n                    <Grid container={true} spacing={2}>\r\n                        <Grid item={true} xs={3}>\r\n                            <TextField label=\"年\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       defaultValue={year} disabled={true} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={3}>\r\n                            <TextField label=\"月\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       defaultValue={month} disabled={true} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={6} />\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField autoFocus={true} label=\"客先\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setCustomer(event.target.value)} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField label=\"開始時間\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setStartTime(event.target.value)} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField label=\"終了時間\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setEndTime(event.target.value)} />\r\n                        </Grid>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClickDialogCancel} color=\"primary\">\r\n                        キャンセル\r\n                    </Button>\r\n                    <Button onClick={handleClickDialogAdd} color=\"primary\">\r\n                        追加\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Snackbar open={snackbarOpen} autoHideDuration={6000} onClose={handleCloseSnackbar}>\r\n                <Alert severity={severity} variant=\"filled\" onClose={handleCloseSnackbar}>{message}</Alert>\r\n            </Snackbar>\r\n\r\n            <Container maxWidth='lg' className={classes.container}>\r\n                <Toolbar className={classes.tableToolbar}>\r\n                    <Typography variant=\"h5\" className={classes.title}>\r\n                        所定時間設定\r\n                    </Typography>\r\n                    <TextField required={true} label=\"年\" margin=\"normal\" defaultValue={selectedYear}\r\n                               onChange={(event) => setSelectedYear(event.target.value)} />\r\n                    <FormControl required={true} margin=\"normal\">\r\n                        <InputLabel htmlFor=\"select-month\">月</InputLabel>\r\n                        <NativeSelect value={selectedMonth} inputProps={{id: 'select-month'}}\r\n                                      onChange={(event) => setSelectedMonth(event.target.value)}>\r\n                            <MonthOptions />\r\n                        </NativeSelect>\r\n                    </FormControl>\r\n                    <Tooltip title=\"検索\">\r\n                        <IconButton onClick={handleClickSearch}>\r\n                            <SearchIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title=\"追加\">\r\n                        <IconButton onClick={handleClickAdd}>\r\n                            <AddIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title=\"前月流用\">\r\n                        <IconButton onClick={handleClickCopy}>\r\n                            <FileCopyIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </Toolbar>\r\n                <TableContainer component={Paper}>\r\n                    <Table size=\"small\" className={classes.table} aria-label=\"breaktime\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell align=\"center\">年</TableCell>\r\n                                <TableCell align=\"center\">月</TableCell>\r\n                                <TableCell align=\"center\">客先</TableCell>\r\n                                <TableCell align=\"center\">開始時間</TableCell>\r\n                                <TableCell align=\"center\">終了時間</TableCell>\r\n                                <TableCell align=\"center\">操作</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {rows.map(row => (\r\n                                <TableRow key={row.id}>\r\n                                    <TableCell align=\"center\"><span>{row.year}</span></TableCell>\r\n                                    <TableCell align=\"center\"><span>{row.month}</span></TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <TextField defaultValue={row.customer}\r\n                                                       inputProps={{style: {textAlign: 'center'}}}\r\n                                                       autoFocus={true}\r\n                                                       onChange={(event) => handleChangeCustomer(row, event.target.value)} />\r\n                                        ) : (\r\n                                            <span>{row.customer}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <TextField defaultValue={row.start_time}\r\n                                                       inputProps={{style: {textAlign: 'center'}}}\r\n                                                       onChange={(event) => handleChangeStartTime(row, event.target.value)} />\r\n                                        ) : (\r\n                                            <span>{row.start_time}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <TextField defaultValue={row.end_time}\r\n                                                       inputProps={{style: {textAlign: 'center'}}}\r\n                                                       onChange={(event) => handleChangeEndTime(row, event.target.value)} />\r\n                                        ) : (\r\n                                            <span>{row.end_time}</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {row.edit ? (\r\n                                            <div>\r\n                                                <IconButton aria-label=\"done\" onClick={() => handleClickDone(row)}>\r\n                                                    <DoneIcon />\r\n                                                </IconButton>\r\n                                                <IconButton aria-label=\"cancel\" onClick={() => handleClickCancel(row)}>\r\n                                                    <CancelIcon />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div>\r\n                                                <IconButton aria-label=\"edit\" onClick={() => handleClickEdit(row)}>\r\n                                                    <EditIcon />\r\n                                                </IconButton>\r\n                                                <IconButton aria-label=\"delete\" onClick={() => handleClickDelete(row)}>\r\n                                                    <DeleteIcon />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        )}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Container>\r\n        </form>\r\n    );\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Container from '@material-ui/core/Container';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link as ReactLink, Redirect} from 'react-router-dom';\r\nimport userStore from '../stores/UserStore';\r\nimport qs from 'query-string';\r\nimport axios from 'axios';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        '& .MuiTypography-h5': {\r\n            fontWeight: 600\r\n        },\r\n        '& .MuiTypography-h6': {\r\n            fontWeight: 600\r\n        }\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    title: {\r\n        flexGrow: 1\r\n    },\r\n    slack: {\r\n        width: 32,\r\n        height: 32,\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    container: {\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(5),\r\n        paddingTop: theme.spacing(3),\r\n        paddingBottom: theme.spacing(3),\r\n        paddingLeft: theme.spacing(10),\r\n        paddingRight: theme.spacing(10),\r\n        '& .MuiButton-root': {\r\n            marginTop: theme.spacing(2)\r\n        }\r\n    }\r\n}));\r\n\r\nexport default function OAuth() {\r\n    const classes = useStyles();\r\n    const [authenticated, setAuthenticated] = useState(false);\r\n    const [severity, setSeverity] = useState('success');\r\n    const [message, setMessage] = useState('ログイン中です...');\r\n\r\n    useEffect(() => {\r\n        userStore.on('change', () => {\r\n            setAuthenticated(userStore.isAuthenticated());\r\n        });\r\n        const code = qs.parse(window.location.search).code;\r\n        if (code !== undefined) {\r\n            axios.get('https://slack.com/api/oauth.access', {\r\n                params: {\r\n                    client_id: process.env.REACT_APP_OAUTH_CLIENT_ID,\r\n                    client_secret: process.env.REACT_APP_OAUTH_CLIENT_SECRET,\r\n                    code: code,\r\n                    redirect_uri: process.env.REACT_APP_OAUTH_REDIRECT\r\n                }\r\n            }).then((response) => {\r\n                if (response.data['ok']) {\r\n                    const accessToken = response.data['access_token'];\r\n                    const userId = response.data['user_id'];\r\n                    axios.get('https://slack.com/api/users.info', {\r\n                        params: {\r\n                            token: accessToken,\r\n                            user: userId\r\n                        }\r\n                    }).then((response) => {\r\n                        if (response.data['ok']) {\r\n                            userStore.setUser(response.data['user']);\r\n                            userStore.setAccessToken(accessToken);\r\n                            userStore.setAuthenticated(true);\r\n                            userStore.removeAllListeners('change');\r\n                        }\r\n                        else {\r\n                            setSeverity('error');\r\n                            setMessage(response.data['error']);\r\n                        }\r\n                    }).catch((error) => {\r\n                        setSeverity('error');\r\n                        setMessage(error['message']);\r\n                    });\r\n                }\r\n                else {\r\n                    setSeverity('error');\r\n                    setMessage(response.data['error']);\r\n                }\r\n            }).catch((error) => {\r\n                setSeverity('error');\r\n                setMessage(error['message']);\r\n            });\r\n        }\r\n        else {\r\n            setSeverity('error');\r\n            setMessage('codeの指定がないため認証できません。');\r\n        }\r\n    },[]);\r\n\r\n    return authenticated ? (<Redirect to='/timerecord'/>) : (\r\n        <div className={classes.root}>\r\n            <AppBar position=\"sticky\">\r\n                <Toolbar>\r\n                    <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        株式会社ベイクラフト\r\n                    </Typography>\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            <Container maxWidth=\"md\" className={classes.container}>\r\n                {'success' === severity ? (<div>{message}</div>) : (\r\n                    <div>\r\n                        <Alert severity={severity}>{message}</Alert>\r\n                        <div><Button component={ReactLink} to=\"/\" color=\"primary\">TOP画面に戻る</Button></div>\r\n                    </div>\r\n                )}\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n","import React, {useState} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport SideMenu from '../components/SideMenu';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport UserAvatar from '../components/UserAvatar';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Container from '@material-ui/core/Container';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport NativeSelect from '@material-ui/core/NativeSelect';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        '& .MuiTypography-h5': {\r\n            fontWeight: 600\r\n        },\r\n        '& .MuiTypography-h6': {\r\n            fontWeight: 600\r\n        }\r\n    },\r\n    title: {\r\n        flexGrow: 1\r\n    },\r\n    container: {\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    tableToolbar: {\r\n        '& .MuiFormControl-root': {\r\n            marginRight: theme.spacing(2),\r\n            marginLeft: theme.spacing(1),\r\n            width: 100\r\n        },\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    tableContainer: {\r\n        marginBottom: theme.spacing(3)\r\n    },\r\n    table: {\r\n        '& .MuiTableCell-root': {\r\n            whiteSpace: 'nowrap',\r\n            '& .MuiTextField-root': {\r\n                width: 100\r\n            }\r\n        },\r\n        '& .MuiTableHead-root': {\r\n            '& .MuiTableRow-root': {\r\n                '& .MuiTableCell-root': {\r\n                    fontWeight: 600\r\n                }\r\n            }\r\n        }\r\n    },\r\n    dialogTitle: {\r\n        '& .MuiTypography-h6': {\r\n            fontWeight: 600\r\n        }\r\n    }\r\n}));\r\n\r\nexport default function Expense() {\r\n    const classes = useStyles();\r\n    const [severity, setSeverity] = useState('error');\r\n    const [message, setMessage] = useState('');\r\n    const [snackbarOpen, setSnackbarOpen] = useState(false);\r\n    const [addTransportOpen, setAddTransportOpen] = useState(false);\r\n    const [year, setYear] = useState(new Date().getFullYear());\r\n    const [month, setMonth] = useState(new Date().getMonth() + 1);\r\n    const [date, setDate] = useState(new Date().getDate());\r\n    const [customer, setCustomer] = useState('');\r\n    const [journal, setJournal] = useState(1);\r\n    const [breakdown, setBreakdown] = useState(1);\r\n    const [billTo, setBillTo] = useState(1);\r\n    const [cost, setCost] = useState(0);\r\n    const [transport, setTransport] = useState('');\r\n    const [departure, setDeparture] = useState('');\r\n    const [arrival, setArrival] = useState('');\r\n\r\n    /**\r\n     * 日の選択肢を描画するコンポーネントです。\r\n     *\r\n     * @returns {[]} 選択肢リスト\r\n     * @constructor\r\n     */\r\n    const DateOptions = () => {\r\n        const options = [];\r\n        const now = new Date();\r\n        const work = new Date(now.getFullYear(), now.getMonth(), 1);\r\n        while (true) {\r\n            const date = work.getDate();\r\n            options.push(<option key={`${work.getFullYear()}-${work.getMonth()}-${date}`}>{date}</option>);\r\n            work.setDate(date + 1);\r\n            if (now.getMonth() !== work.getMonth()) {\r\n                break;\r\n            }\r\n        }\r\n        return options;\r\n    };\r\n\r\n    /**\r\n     * スナックバーの閉じるイベント時に呼ばれます。\r\n     *\r\n     * @param event イベント\r\n     * @param reason 理由\r\n     */\r\n    const handleCloseSnackbar = (event, reason) => {\r\n        if ('clickaway' === reason) {\r\n            return;\r\n        }\r\n        setSnackbarOpen(false);\r\n    };\r\n\r\n    /**\r\n     * 交通費の追加ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickAddTransport = () => {\r\n        const now = new Date();\r\n        setYear(String(now.getFullYear()));\r\n        setMonth(String(now.getMonth() + 1));\r\n        setDate(String(now.getDate()));\r\n        setCustomer('');\r\n        setJournal(1);\r\n        setBreakdown(1);\r\n        setBillTo(1);\r\n        setCost(0);\r\n        setTransport('');\r\n        setDeparture('');\r\n        setArrival('');\r\n        setAddTransportOpen(true);\r\n    };\r\n\r\n    /**\r\n     * 交通費金額の値が変更された場合に呼ばれます。\r\n     *\r\n     * @param event イベント\r\n     */\r\n    const handleChangeCost = (event) => {\r\n        if (/^([1-9]\\d*|0)$/.test(event.target.value)) {\r\n            setCost(Number(event.target.value));\r\n        }\r\n        else {\r\n            event.target.value = '';\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 交通費追加ダイアログの追加ボタンがクリックされた場合に呼ばれます。\r\n     */\r\n    const handleClickDialogAddTransport = () => {\r\n\r\n    };\r\n\r\n    return (\r\n        <form className={classes.root}>\r\n            <CssBaseline/>\r\n\r\n            <AppBar position='sticky'>\r\n                <Toolbar>\r\n                    <SideMenu/>\r\n                    <Typography variant='h6' className={classes.title}>\r\n                        株式会社ベイクラフト\r\n                    </Typography>\r\n                    <UserAvatar/>\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            <Snackbar open={snackbarOpen} autoHideDuration={6000} onClose={handleCloseSnackbar}>\r\n                <Alert severity={severity} variant=\"filled\" onClose={handleCloseSnackbar}>{message}</Alert>\r\n            </Snackbar>\r\n\r\n            <Dialog open={addTransportOpen} onClose={() => setAddTransportOpen(false)}>\r\n                <DialogTitle className={classes.dialogTitle}>交通費追加</DialogTitle>\r\n                <DialogContent>\r\n                    <Grid container={true} spacing={2}>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField label=\"年\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       defaultValue={year} disabled={true} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField label=\"月\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       defaultValue={month} disabled={true} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <FormControl required={true} fullWidth={true} margin=\"dense\">\r\n                                <InputLabel htmlFor=\"select-date\">日</InputLabel>\r\n                                <NativeSelect value={date} inputProps={{id: 'select-date'}}\r\n                                              onChange={(event) => setDate(event.target.value)}>\r\n                                    <DateOptions />\r\n                                </NativeSelect>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        <Grid item={true} xs={12}>\r\n                            <TextField autoFocus={true} label=\"客先\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setCustomer(event.target.value)} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <FormControl required={true} fullWidth={true} margin=\"dense\">\r\n                                <InputLabel htmlFor=\"select-journal\">仕訳</InputLabel>\r\n                                <NativeSelect value={journal} inputProps={{id: 'select-journal'}}\r\n                                              onChange={(event) => setDate(event.target.value)}>\r\n                                    <option value={1}>通勤</option>\r\n                                    <option value={2}>出張</option>\r\n                                </NativeSelect>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <FormControl required={true} fullWidth={true} margin=\"dense\">\r\n                                <InputLabel htmlFor=\"select-breakdown\">内訳</InputLabel>\r\n                                <NativeSelect value={breakdown} inputProps={{id: 'select-breakdown'}}\r\n                                              onChange={(event) => setBreakdown(event.target.value)}>\r\n                                    <option value={1}>定期</option>\r\n                                    <option value={2}>切符</option>\r\n                                    <option value={3}>ICカード</option>\r\n                                    <option value={4}>現金</option>\r\n                                </NativeSelect>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <FormControl required={true} fullWidth={true} margin=\"dense\">\r\n                                <InputLabel htmlFor=\"select-bill-to\">請求先</InputLabel>\r\n                                <NativeSelect value={billTo} inputProps={{id: 'select-bill-to'}}\r\n                                              onChange={(event) => setBillTo(event.target.value)}>\r\n                                    <option value={1}>社内</option>\r\n                                    <option value={2}>社外</option>\r\n                                </NativeSelect>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        <Grid item={true} xs={12}>\r\n                            <TextField label=\"金額\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => handleChangeCost(event)} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField label=\"交通機関\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setTransport(event.target.value)} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField label=\"出発経路\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setDeparture(event.target.value)} />\r\n                        </Grid>\r\n                        <Grid item={true} xs={4}>\r\n                            <TextField label=\"到着経路\" fullWidth={true} required={true} margin=\"dense\"\r\n                                       onChange={(event) => setArrival(event.target.value)} />\r\n                        </Grid>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button color=\"primary\" onClick={() => setAddTransportOpen(false)}>\r\n                        キャンセル\r\n                    </Button>\r\n                    <Button color=\"primary\" onClick={handleClickDialogAddTransport}>\r\n                        追加\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Container maxWidth='lg' className={classes.container}>\r\n                <Toolbar className={classes.tableToolbar}>\r\n                    <Typography variant=\"h5\" className={classes.title}>\r\n                        経費記録\r\n                    </Typography>\r\n                </Toolbar>\r\n                <TableContainer component={Paper} className={classes.tableContainer}>\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" className={classes.title}>交通費</Typography>\r\n                        <Tooltip title=\"追加\">\r\n                            <IconButton onClick={handleClickAddTransport}>\r\n                                <AddIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </Toolbar>\r\n                    <Table size=\"small\" className={classes.table} aria-label=\"expenses\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell align=\"center\">日付</TableCell>\r\n                                <TableCell align=\"center\">客先</TableCell>\r\n                                <TableCell align=\"center\">仕訳</TableCell>\r\n                                <TableCell align=\"center\">内訳</TableCell>\r\n                                <TableCell align=\"center\">金額</TableCell>\r\n                                <TableCell align=\"center\">請求先</TableCell>\r\n                                <TableCell align=\"center\">交通機関</TableCell>\r\n                                <TableCell align=\"center\">出発経路</TableCell>\r\n                                <TableCell align=\"center\">到着経路</TableCell>\r\n                                <TableCell align=\"center\">操作</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                    </Table>\r\n                </TableContainer>\r\n                <TableContainer component={Paper} className={classes.tableContainer}>\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" className={classes.title}>経費</Typography>\r\n                        <Tooltip title=\"追加\">\r\n                            <IconButton>\r\n                                <AddIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </Toolbar>\r\n                    <Table size=\"small\" className={classes.table} aria-label=\"expenses\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell align=\"center\">日付</TableCell>\r\n                                <TableCell align=\"center\">客先</TableCell>\r\n                                <TableCell align=\"center\">金額</TableCell>\r\n                                <TableCell align=\"center\">請求先</TableCell>\r\n                                <TableCell align=\"center\">領収書</TableCell>\r\n                                <TableCell align=\"center\">購入物品</TableCell>\r\n                                <TableCell align=\"center\">操作</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Container>\r\n        </form>\r\n    );\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import React from 'react';\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\nimport Main from './routes/Main';\r\nimport PrivateRoute from './PrivateRoute';\r\nimport TimeRecord from './routes/TimeRecord';\r\nimport BreakTime from './routes/BreakTime';\r\nimport FixedTime from './routes/FixedTime';\r\nimport OAuth from './routes/OAuth';\r\nimport Expense from './routes/Expense';\r\n\r\nexport default function App() {\r\n    return (\r\n        <BrowserRouter>\r\n            <Switch>\r\n                <Route exact path=\"/\"><Main/></Route>\r\n                <Route exact path=\"/oauth\"><OAuth/></Route>\r\n                <PrivateRoute exact path=\"/timerecord\">\r\n                    <TimeRecord/>\r\n                </PrivateRoute>\r\n                <PrivateRoute exact path=\"/expense\">\r\n                    <Expense/>\r\n                </PrivateRoute>\r\n                <PrivateRoute exact path=\"/fixedtime\">\r\n                    <FixedTime/>\r\n                </PrivateRoute>\r\n                <PrivateRoute exact path=\"/breaktime\">\r\n                    <BreakTime/>\r\n                </PrivateRoute>\r\n                <Route path=\"*\"><Main/></Route>\r\n            </Switch>\r\n        </BrowserRouter>\r\n    );\r\n}\r\n"],"sourceRoot":""}