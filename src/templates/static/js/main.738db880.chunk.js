(this["webpackJsonptime-recorder-view"]=this["webpackJsonptime-recorder-view"]||[]).push([[0],{176:function(e,t,a){e.exports=a.p+"static/media/slack_icon.c0dbdffe.svg"},210:function(e,t,a){e.exports=a(396)},215:function(e,t,a){},396:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),i=(a(215),a(16)),o=a(38),m=a(179),u=a(433),s=a(429),d=a(431),g=a(70),E=a(432),f=a(35),h=a.n(f),p=a(176),b=a.n(p),v=a(434),k=a(193),_=a(177),y=a.n(_),O=a(178),j=a.n(O),w=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},slack:{width:32,height:32,marginRight:e.spacing(2)},container:{marginTop:e.spacing(2),marginBottom:e.spacing(5),paddingTop:e.spacing(3),paddingBottom:e.spacing(3),paddingLeft:e.spacing(10),paddingRight:e.spacing(10)}}})),C=y()().use(j.a);var N=function(){var e=w();return r.a.createElement("div",{className:e.root},r.a.createElement(s.a,{position:"sticky"},r.a.createElement(d.a,null,r.a.createElement(E.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(h.a,null)),r.a.createElement(g.a,{variant:"h6",className:e.title},"\u682a\u5f0f\u4f1a\u793e\u30d9\u30a4\u30af\u30e9\u30d5\u30c8"),r.a.createElement(u.a,{color:"inherit",onClick:function(){window.location="https://slack.com/oauth/authorize?client_id=".concat("3246745826.923685300119","&scope=users:read&redirect_uri=").concat("https://baykraft.herokuapp.com/oauth")}},r.a.createElement("img",{src:b.a,className:e.slack,alt:"slack"}),"Login with Slack"))),r.a.createElement(v.a,{maxWidth:"md",className:e.container,component:k.a},r.a.createElement("div",null,C.processSync('## Slack\u30dc\u30c3\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u3064\u3044\u3066\n### \u51fa\u52e4\u8a18\u9332\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a00\u8449\u3092\u542b\u3080\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u53cd\u5fdc\u3057\u307e\u3059\u3002\n\n* \u30e2\u30fc\u30cb\u30f3\u30b0\n* \u30e2\u301c\u30cb\u30f3\u30b0\n* \u3082\u30fc\u306b\u3093\u3050\n* \u3082\u301c\u306b\u3093\u3050\n* \u304a\u3063\u306f\n* \u304a\u306f\n* \u3078\u308d\n* \u306f\u308d\n* \u30d8\u30ed\n* \u30cf\u30ed\n* hi\n* hello\n* morning\n* \u51fa\u52e4\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u306f\u65e5\u6642\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u65e5\u6642\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u73fe\u5728\u65e5\u6642\u3067\u8a18\u9332\u3055\u308c\u307e\u3059\u3002\n\n* \u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059 2020/1/29 9:00\n* \u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059 1/29 9:00\n* \u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059 1/29\n* \u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059 9:00\n* \u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059\n\n### \u9000\u52e4\u8a18\u9332\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a00\u8449\u3092\u542b\u3080\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u53cd\u5fdc\u3057\u307e\u3059\u3002\n\n* \u30d0\u30a4\n* \u30d0\u30fc\u30a4\n* \u30d0\u301c\u30a4\n* \u30d0\u30a1\u30a4\n* \u3070\u3044\n* \u3070\u30fc\u3044\n* \u3070\u301c\u3044\n* \u3070\u3041\u3044\n* \u304a\u3084\u3059\u307f\n* \u304a\u3064\n* \u304a\u3063\u30fc\n* \u3055\u3089\u3070\n* \u304a\u5148\n* \u304a\u75b2\n* \u5e30\n* \u4e59\n* bye\n* night\n* cu\n* c u\n* cyou\n* c you\n* seeu\n* see u\n* seeyou\n* see you\n* \u9000\u52e4\n* \u3054\u304d\u3052\u3093\u3088\n* \u30b0\u30c3\u30d0\u30a4\n* \u30b0\u30d0\u30a4\n* \u3055\u3088\u3046\u306a\u3089\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u306f\u65e5\u6642\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u65e5\u6642\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u73fe\u5728\u65e5\u6642\u3067\u8a18\u9332\u3055\u308c\u307e\u3059\u3002\n\n* \u304a\u75b2\u308c\u69d8\u3067\u3057\u305f 2020/1/29 17:30\n* \u304a\u75b2\u308c\u69d8\u3067\u3057\u305f 1/29 17:30\n* \u304a\u75b2\u308c\u69d8\u3067\u3057\u305f 1/29\n* \u304a\u75b2\u308c\u69d8\u3067\u3057\u305f 17:30\n* \u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\n\n### \u4f11\u6687\u8a18\u9332\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a00\u8449\u3092\u542b\u3080\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u53cd\u5fdc\u3057\u307e\u3059\u3002\n\n* \u4f11\n* \u3084\u3059\u307e\n* \u3084\u3059\u307f\n* \u3084\u3059\u3080\n* \u4f11\u6687\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u306f\u65e5\u4ed8\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u65e5\u4ed8\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u73fe\u5728\u65e5\u4ed8\u3067\u8a18\u9332\u3055\u308c\u307e\u3059\u3002\n\n* \u4f11\u307f 2020/1/29\n* \u4f11\u307f 1/29\n* \u4f11\u307f\n\n\u307e\u305f\u3001\u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c8\u3067\u6587\u5b57\u5217\u3092\u62ec\u308b\u3053\u3068\u3067\u30e1\u30e2\u60c5\u5831\u3092\u8a18\u9332\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n* \u4f11\u307f 1/30 "\u3053\u3053\u304c\u30e1\u30e2\u3068\u3057\u3066\u8a18\u9332\u3055\u308c\u308b"\n* \u4f11\u307f "\u3053\u3053\u304c\u30e1\u30e2\u3068\u3057\u3066\u8a18\u9332\u3055\u308c\u308b"').contents)))},S=a(6),x=a(2),T=a(82),A=a(42),D=a(180),F=a(181),M=a(192),H=new(function(e){function t(){var e;return Object(T.a)(this,t),(e=Object(D.a)(this,Object(F.a)(t).call(this))).authenticated=!1,e.accessToken="",e.user={},e}return Object(M.a)(t,e),Object(A.a)(t,[{key:"isAuthenticated",value:function(){return this.authenticated}},{key:"setAuthenticated",value:function(e){this.authenticated=e,this.emit("change")}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setAccessToken",value:function(e){this.accessToken=e,this.emit("change")}},{key:"getUser",value:function(){return this.user}},{key:"setUser",value:function(e){this.user=e,this.emit("change")}}]),t}(a(182).EventEmitter));function R(e){var t=e.children,a=Object(x.a)(e,["children"]),c=Object(n.useState)(H.isAuthenticated()),l=Object(S.a)(c,1)[0];return r.a.createElement(o.Route,Object.assign({},a,{render:function(e){var a=e.location;return l?t:r.a.createElement(o.Redirect,{to:{pathname:"/",state:{from:a}}})}}))}var B=a(446),P=a(450),Y=a(449),V=a(445),W=a(447),q=a(448),L=a(455),G=a(88),U=a.n(G),z=a(13),K=a.n(z),I=a(61),J=a.n(I),$=a(59),Q=a.n($),X=a(187),Z=a(457),ee=a(456),te=a(459),ae=a(60),ne=a.n(ae),re=a(62),ce=a.n(re),le=a(458),ie=a(399),oe=a(400),me=a(439),ue=a(440),se=a(58),de=a.n(se),ge=a(441),Ee=a(56),fe=a.n(Ee),he=a(435),pe=a(443),be=a(460),ve=a(442),ke=a(444),_e=a(57),ye=a.n(_e),Oe=a(188),je=a.n(Oe),we=a(184),Ce=a(397),Ne=a(437),Se=a(438),xe=a(436),Te=a(185),Ae=a.n(Te),De=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},userAvatar:{marginRight:e.spacing(2)},table:{"& .MuiTableCell-root":{whiteSpace:"nowrap"},"& .MuiTableHead-root":{"& .MuiTableRow-root":{"& .MuiTableCell-root":{backgroundColor:e.palette.success.main}}}},container:{marginTop:e.spacing(2),marginBottom:e.spacing(5)},gridContainer:{marginBottom:e.spacing(3)},tableToolbar:{"& .MuiFormControl-root":{marginRight:e.spacing(2),marginLeft:e.spacing(1),width:100},marginBottom:e.spacing(1)},disableCell:{},holidayCell:{color:"#f44336"},customerField:{width:50},dateField:{width:50},drawerList:{width:250}}})),Fe=["\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f","\u65e5"],Me={0:"",10:"\u6709\u4f11",11:"\u6709\u4f11(AM)",12:"\u6709\u4f11(PM)",20:"\u6b20\u52e4",21:"\u6b20\u52e4(AM)",22:"\u6b20\u52e4(PM)",30:"\u7279\u4f11",31:"\u7279\u4f11(AM)",32:"\u7279\u4f11(PM)",40:"\u4ee3\u4f11",41:"\u4ee3\u4f11(AM)",42:"\u4ee3\u4f11(PM)",50:"\u4f11\u51fa"};function He(){var e=De(),t=Object(n.useState)(H.getUser()),a=Object(S.a)(t,1)[0],c=Object(n.useState)((new Date).getFullYear()),l=Object(S.a)(c,2),o=l[0],m=l[1],f=Object(n.useState)((new Date).getMonth()+1),p=Object(S.a)(f,2),b=p[0],_=p[1],y=Object(n.useState)([]),O=Object(S.a)(y,2),j=O[0],w=O[1],C=Object(n.useState)("error"),N=Object(S.a)(C,2),x=N[0],T=N[1],A=Object(n.useState)(""),D=Object(S.a)(A,2),F=D[0],M=D[1],R=Object(n.useState)(!1),G=Object(S.a)(R,2),z=G[0],I=G[1],$=Object(n.useState)({}),ae=Object(S.a)($,2),re=ae[0],se=ae[1],Ee=Object(n.useState)(!1),_e=Object(S.a)(Ee,2),Oe=_e[0],Te=_e[1],He=Object(n.useState)("0:00"),Re=Object(S.a)(He,2),Be=Re[0],Pe=Re[1],Ye=Object(n.useState)(null),Ve=Object(S.a)(Ye,2),We=Ve[0],qe=Ve[1],Le=Ae()().history,Ge=function(e,t,a,n,r,c,l,i,o,m,u,s,d){return{edit:e,id:t,year:a,month:n,date:r,day:c,holiday:l,customer:i,kind:o,start_time:m,end_time:u,total_time:s,note:d}};Object(n.useEffect)((function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;K.a.get("".concat("https://baykraft.herokuapp.com/rest","/time_records/").concat(t,"/").concat(a),{params:{token:H.getAccessToken()}}).then((function(e){var t=e.data.records,a=[];t.forEach((function(e){a.push(Ge(!1,e.time_record_id,e.year,e.month,e.date,Fe[e.day],e.holiday?"H":"",e.customer,e.kind,e.start_time,e.end_time,e.total_time,e.note))})),Pe(Ue(a)),w(a),se({})})).catch((function(e){T("error"),M(e.message),I(!0)}))}),[]);var Ue=function(e){var t=0,a=0;return e.forEach((function(e){e.total_time&&(t+=Number(e.total_time.split(":")[0]),a+=Number(e.total_time.split(":")[1]))})),(t+=Math.floor(a/60))+":"+("00"+(a%=60)).slice(-2)},ze=function(e,t){t.edit=!1,t.id=e.time_record_id,t.customer=e.customer,t.kind=e.kind,t.start_time=e.start_time,t.end_time=e.end_time,t.total_time=e.total_time,t.note=e.note},Ke=function(e){re.hasOwnProperty(String(e.date))||(re[String(e.date)]=Object.assign({},e))},Ie=function(){for(var e=[],t=0,a=Object.entries(Me);t<a.length;t++){var n=a[t],c=Object(S.a)(n,2),l=c[0],i=c[1];e.push(r.a.createElement("option",{key:l,value:l},i))}return e},Je=function(e,t){"clickaway"!==t&&I(!1)},$e=function(e,t){var a=new Date,n=e.split(":"),r=t.split(":");return new Date(a.getFullYear(),a.getMonth(),a.getDate(),Number(n[0]),Number(n[1]))<new Date(a.getFullYear(),a.getMonth(),a.getDate(),Number(r[0]),Number(r[1]))};return r.a.createElement("form",{className:e.root},r.a.createElement(he.a,null),r.a.createElement(s.a,{position:"sticky"},r.a.createElement(d.a,null,r.a.createElement(E.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return Te(!0)}},r.a.createElement(h.a,null)),r.a.createElement(g.a,{variant:"h6",className:e.title},"\u682a\u5f0f\u4f1a\u793e\u30d9\u30a4\u30af\u30e9\u30d5\u30c8"),r.a.createElement(u.a,{color:"inherit",onClick:function(e){qe(We?null:e.currentTarget)}},r.a.createElement(Z.a,{alt:"avatar",src:a.profile.image_48,className:e.userAvatar}),a.profile.real_name),r.a.createElement(Ce.a,{open:Boolean(We),anchorEl:We},r.a.createElement(k.a,null,r.a.createElement(xe.a,{onClickAway:function(){qe(null)}},r.a.createElement(Ne.a,{autoFocusItem:Boolean(We),onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),qe(null))}},r.a.createElement(Se.a,{onClick:function(){H.setUser(null),H.setAccessToken(null),H.setAuthenticated(!1),Le.push("/")}},"\u30ed\u30b0\u30a2\u30a6\u30c8"))))))),r.a.createElement(le.a,{open:Oe,onClose:function(){return Te(!1)}},r.a.createElement("div",{className:e.drawerList,onClick:function(){return Te(!1)},onKeyDown:function(){return Te(!1)}},r.a.createElement(ie.a,{component:"nav"},r.a.createElement(oe.a,{button:!0,component:i.b,to:"/timerecord"},r.a.createElement(me.a,null,r.a.createElement(fe.a,null)),r.a.createElement(ue.a,{primary:"\u52e4\u6020\u8a18\u9332"})),r.a.createElement(ge.a,null),r.a.createElement(oe.a,{button:!0,component:i.b,to:"/fixedtime"},r.a.createElement(me.a,null,r.a.createElement(ye.a,null)),r.a.createElement(ue.a,{primary:"\u6240\u5b9a\u6642\u9593\u8a2d\u5b9a"})),r.a.createElement(oe.a,{button:!0,component:i.b,to:"/breaktime"},r.a.createElement(me.a,null,r.a.createElement(de.a,null)),r.a.createElement(ue.a,{primary:"\u4f11\u61a9\u6642\u9593\u8a2d\u5b9a"}))))),r.a.createElement(te.a,{open:z,autoHideDuration:6e3,onClose:Je},r.a.createElement(ee.a,{severity:x,variant:"filled",onClose:Je},F)),r.a.createElement(v.a,{maxWidth:"lg",className:e.container},r.a.createElement(d.a,{className:e.tableToolbar},r.a.createElement(g.a,{variant:"h6",className:e.title},"\u52e4\u6020\u8a18\u9332"),r.a.createElement(L.a,{required:!0,label:"\u5e74",margin:"normal",defaultValue:o,onChange:function(e){return m(e.target.value)}}),r.a.createElement(ve.a,{required:!0,margin:"normal"},r.a.createElement(be.a,{htmlFor:"select-month"},"\u6708"),r.a.createElement(X.a,{value:b,inputProps:{id:"select-month"},onChange:function(e){return _(e.target.value)}},r.a.createElement((function(){for(var e=[],t=1;t<=12;t++)e.push(r.a.createElement("option",{key:t,value:t},t));return e}),null))),r.a.createElement(pe.a,{title:"\u691c\u7d22"},r.a.createElement(E.a,{onClick:function(){return o?Number(o)<2020||Number(o)>(new Date).getFullYear()?(T("error"),M("\u5e74\u306f\u300c2020\u2266\u5165\u529b\u5e74\u2266\u73fe\u5728\u5e74\u300d\u306e\u7bc4\u56f2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void I(!0)):void K.a.get("".concat("https://baykraft.herokuapp.com/rest","/time_records/").concat(o,"/").concat(b),{params:{token:H.getAccessToken()}}).then((function(e){var t=e.data.records,a=[];t.forEach((function(e){a.push(Ge(!1,e.time_record_id,e.year,e.month,e.date,Fe[e.day],e.holiday?"H":"",e.customer,e.kind,e.start_time,e.end_time,e.total_time,e.note))})),Pe(Ue(a)),w(a),se({})})).catch((function(e){T("error"),M(e.message),I(!0)})):(T("error"),M("\u5e74\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void I(!0))}},r.a.createElement(U.a,null))),r.a.createElement(pe.a,{title:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"},r.a.createElement(E.a,{onClick:function(){return o?Number(o)<2020||Number(o)>(new Date).getFullYear()?(T("error"),M("\u5e74\u306f\u300c2020\u2266\u5165\u529b\u5e74\u2266\u73fe\u5728\u5e74\u300d\u306e\u7bc4\u56f2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void I(!0)):void K.a.get("".concat("https://baykraft.herokuapp.com/rest","/time_records/").concat(o,"/").concat(b,"/download"),{params:{token:H.getAccessToken()},responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:e.data.type});Object(we.saveAs)(t,"\u52e4\u6020".concat(o).concat(b,".xlsx"))})).catch((function(e){T("error"),M(e.message),I(!0)})):(T("error"),M("\u5e74\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void I(!0))}},r.a.createElement(je.a,null)))),r.a.createElement(ke.a,{container:!0,spacing:1,className:e.gridContainer},r.a.createElement(ke.a,{item:!0,xs:7},r.a.createElement(V.a,null,r.a.createElement(B.a,{size:"small",className:e.table},r.a.createElement(W.a,null,r.a.createElement(q.a,null,r.a.createElement(Y.a,{align:"center"},"\u6240\u5b9a\u6642\u9593"),r.a.createElement(Y.a,{align:"center"},"\u5b9f\u50cd\u6642\u9593"),r.a.createElement(Y.a,{align:"center"},"\u666e\u901a\u6b8b\u696d"),r.a.createElement(Y.a,{align:"center"},"\u6df1\u591c\u6b8b\u696d"),r.a.createElement(Y.a,{align:"center"},"\u6cd5\u4f11\u666e\u6b8b"),r.a.createElement(Y.a,{align:"center"},"\u6cd5\u4f11\u6df1\u6b8b"),r.a.createElement(Y.a,{align:"center"},"\u63a7\u9664"))),r.a.createElement(P.a,null,r.a.createElement(q.a,null,r.a.createElement(Y.a,{align:"center"}),r.a.createElement(Y.a,{align:"center"},Be),r.a.createElement(Y.a,{align:"center"}),r.a.createElement(Y.a,{align:"center"}),r.a.createElement(Y.a,{align:"center"}),r.a.createElement(Y.a,{align:"center"}),r.a.createElement(Y.a,{align:"center"}))))))),r.a.createElement(V.a,null,r.a.createElement(B.a,{className:e.table,"aria-label":"timerecords",size:"small"},r.a.createElement(W.a,null,r.a.createElement(q.a,null,r.a.createElement(Y.a,{align:"center",scope:"row"},"\u65e5\u4ed8"),r.a.createElement(Y.a,{align:"center"},"\u66dc\u65e5"),r.a.createElement(Y.a,{align:"center"},"\u4f11\u65e5"),r.a.createElement(Y.a,{align:"center"},"\u5ba2\u5148"),r.a.createElement(Y.a,{align:"center"},"\u52e4\u4f11"),r.a.createElement(Y.a,{align:"center"},"\u59cb\u696d"),r.a.createElement(Y.a,{align:"center"},"\u7d42\u696d"),r.a.createElement(Y.a,{align:"center"},"\u5408\u8a08"),r.a.createElement(Y.a,{align:"center"},"\u5099\u8003"),r.a.createElement(Y.a,{align:"center"},"\u64cd\u4f5c"))),r.a.createElement(P.a,null,j.map((function(t){return r.a.createElement(q.a,{key:t.date},r.a.createElement(Y.a,{align:"center",className:e.disableCell},t.date),r.a.createElement(Y.a,{align:"center",className:e.disableCell},t.day),r.a.createElement(Y.a,{align:"center",className:e.holidayCell},t.holiday),r.a.createElement(Y.a,{align:"center"},t.edit?r.a.createElement(L.a,{defaultValue:t.customer,className:e.customerField,inputProps:{style:{textAlign:"center"}},autoFocus:!0,onChange:function(e){return function(e,t){Ke(e),e.customer=t,w(j.slice())}(t,e.target.value)}}):r.a.createElement("span",null,t.customer)),r.a.createElement(Y.a,{align:"center"},t.edit?r.a.createElement(X.a,{value:t.kind,onChange:function(e){return function(e,t){Ke(e),e.kind=t,w(j.slice())}(t,e.target.value)}},r.a.createElement(Ie,null)):r.a.createElement("span",null,Me[t.kind])),r.a.createElement(Y.a,{align:"center"},t.edit?r.a.createElement(L.a,{defaultValue:t.start_time,className:e.dateField,inputProps:{style:{textAlign:"center"}},onChange:function(e){return function(e,t){Ke(e),e.start_time=t,w(j.slice())}(t,e.target.value)}}):r.a.createElement("span",null,t.start_time)),r.a.createElement(Y.a,{align:"center"},t.edit?r.a.createElement(L.a,{defaultValue:t.end_time,className:e.dateField,inputProps:{style:{textAlign:"center"}},onChange:function(e){return function(e,t){Ke(e),e.end_time=t,w(j.slice())}(t,e.target.value)}}):r.a.createElement("span",null,t.end_time)),r.a.createElement(Y.a,{align:"center",className:e.disableCell},t.total_time),t.edit?r.a.createElement(Y.a,{align:"center"},r.a.createElement(L.a,{defaultValue:t.note,onChange:function(e){return function(e,t){Ke(e),e.note=t,w(j.slice())}(t,e.target.value)}})):r.a.createElement(Y.a,null,r.a.createElement("span",null,t.note)),r.a.createElement(Y.a,{align:"center"},t.edit?r.a.createElement("div",null,r.a.createElement(E.a,{"aria-label":"done",onClick:function(){return function(e){var t=RegExp(/\d{1,2}:\d{1,2}/);if(e.start_time&&!t.test(e.start_time))return T("error"),M("\u59cb\u696d\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void I(!0);if(e.end_time&&!t.test(e.end_time))return T("error"),M("\u7d42\u696d\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void I(!0);if(e.start_time&&e.end_time&&!$e(e.start_time,e.end_time))return T("error"),M("\u59cb\u696d\u306f\u7d42\u696d\u3088\u308a\u3082\u524d\u306e\u6642\u9593\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void I(!0);var a=e.year,n=e.month,r=e.date;0===e.id?K.a.post("".concat("https://baykraft.herokuapp.com/rest","/time_records/").concat(a,"/").concat(n,"/").concat(r),{customer:e.customer,kind:e.kind,start_time:e.start_time,end_time:e.end_time,note:e.note},{params:{token:H.getAccessToken()}}).then((function(t){ze(t.data.record,e),Pe(Ue(j)),w(j.slice()),T("success"),M("\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002"),I(!0)})).catch((function(e){T("error"),M(e.message),I(!0)})):K.a.put("".concat("https://baykraft.herokuapp.com/rest","/time_records/").concat(a,"/").concat(n,"/").concat(r),{customer:e.customer,kind:e.kind,start_time:e.start_time,end_time:e.end_time,note:e.note},{params:{token:H.getAccessToken()}}).then((function(t){ze(t.data.record,e),Pe(Ue(j)),w(j.slice()),T("success"),M("\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002"),I(!0)})).catch((function(e){T("error"),M(e.message),I(!0)}))}(t)}},r.a.createElement(Q.a,null)),r.a.createElement(E.a,{"aria-label":"cancel",onClick:function(){return function(e){var t=re[String(e.date)];t&&(e.customer=t.customer,e.kind=t.kind,e.start_time=t.start_time,e.end_time=t.end_time,e.total_time=t.total_time,e.note=t.note,delete re[String(e.date)],se(re)),e.edit=!1,w(j.slice())}(t)}},r.a.createElement(ne.a,null))):r.a.createElement("div",null,r.a.createElement(E.a,{"aria-label":"edit",onClick:function(){return function(e){delete re[String(e.date)],se(re),e.edit=!0,w(j.slice())}(t)}},r.a.createElement(J.a,null)),r.a.createElement(E.a,{"aria-label":"delete",onClick:function(){return function(e){var t=e.year,a=e.month,n=e.date;K.a.delete("".concat("https://baykraft.herokuapp.com/rest","/time_records/").concat(t,"/").concat(a,"/").concat(n),{params:{token:H.getAccessToken()}}).then((function(){e.id=0,e.customer=null,e.kind=0,e.start_time=null,e.end_time=null,e.total_time=null,e.note=null,Pe(Ue(j)),w(j.slice()),T("success"),M("\u524a\u9664\u3057\u307e\u3057\u305f\u3002"),I(!0)})).catch((function(e){T("error"),M(e.message),I(!0)}))}(t)}},r.a.createElement(ce.a,null)))))})))))))}var Re=a(90),Be=a.n(Re),Pe=a(451),Ye=a(452),Ve=a(453),We=a(454),qe=a(189),Le=a.n(qe),Ge=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},userAvatar:{marginRight:e.spacing(2)},drawerList:{width:250},container:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},tableToolbar:{"& .MuiFormControl-root":{marginRight:e.spacing(2),marginLeft:e.spacing(1),width:100},marginBottom:e.spacing(1)},table:{"& .MuiTableCell-root":{whiteSpace:"nowrap","& .MuiTextField-root":{width:100}},"& .MuiTableHead-root":{"& .MuiTableRow-root":{"& .MuiTableCell-root":{backgroundColor:e.palette.success.main}}}}}}));function Ue(){var e=Ge(),t=Object(n.useState)(H.getUser()),a=Object(S.a)(t,1)[0],c=Object(n.useState)(!1),l=Object(S.a)(c,2),o=l[0],m=l[1],f=Object(n.useState)([]),p=Object(S.a)(f,2),b=p[0],k=p[1],_=Object(n.useState)({}),y=Object(S.a)(_,2),O=y[0],j=y[1],w=Object(n.useState)(!1),C=Object(S.a)(w,2),N=C[0],x=C[1],T=Object(n.useState)("2020"),A=Object(S.a)(T,2),D=A[0],F=A[1],M=Object(n.useState)("1"),R=Object(S.a)(M,2),G=R[0],z=R[1],I=Object(n.useState)(""),$=Object(S.a)(I,2),ae=$[0],re=$[1],se=Object(n.useState)(""),Ee=Object(S.a)(se,2),ke=Ee[0],_e=Ee[1],Oe=Object(n.useState)(""),je=Object(S.a)(Oe,2),we=je[0],Ce=je[1],Ne=Object(n.useState)("error"),Se=Object(S.a)(Ne,2),xe=Se[0],Te=Se[1],Ae=Object(n.useState)(""),De=Object(S.a)(Ae,2),Fe=De[0],Me=De[1],He=Object(n.useState)(!1),Re=Object(S.a)(He,2),qe=Re[0],Ue=Re[1],ze=Object(n.useState)((new Date).getFullYear()),Ke=Object(S.a)(ze,2),Ie=Ke[0],Je=Ke[1],$e=Object(n.useState)((new Date).getMonth()+1),Qe=Object(S.a)($e,2),Xe=Qe[0],Ze=Qe[1],et=function(e,t,a,n,r,c,l){return{edit:e,id:t,year:a,month:n,customer:r,start_time:c,end_time:l}};Object(n.useEffect)((function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;K.a.get("".concat("https://baykraft.herokuapp.com/rest","/break_times/").concat(t,"/").concat(a),{params:{token:H.getAccessToken()}}).then((function(e){var t=e.data.records.map((function(e){return et(!1,e.break_time_id,e.year,e.month,e.customer,e.start_time,e.end_time)}));k(t)})).catch((function(e){Te("error"),Me(e.message),Ue(!0)}))}),[]);var tt=function(e){O.hasOwnProperty(String(e.id))||(O[String(e.id)]=Object.assign({},e))},at=function(){for(var e=[],t=1;t<=12;t++)e.push(r.a.createElement("option",{key:t,value:t},t));return e},nt=function(e,t){"clickaway"!==t&&Ue(!1)},rt=function(e,t){var a=new Date,n=e.split(":"),r=t.split(":");return new Date(a.getFullYear(),a.getMonth(),a.getDate(),Number(n[0]),Number(n[1]))<new Date(a.getFullYear(),a.getMonth(),a.getDate(),Number(r[0]),Number(r[1]))};return r.a.createElement("form",{className:e.root},r.a.createElement(he.a,null),r.a.createElement(s.a,{position:"sticky"},r.a.createElement(d.a,null,r.a.createElement(E.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return m(!0)}},r.a.createElement(h.a,null)),r.a.createElement(g.a,{variant:"h6",className:e.title},"\u682a\u5f0f\u4f1a\u793e\u30d9\u30a4\u30af\u30e9\u30d5\u30c8"),r.a.createElement(u.a,{color:"inherit"},r.a.createElement(Z.a,{alt:"avatar",src:a.profile.image_48,className:e.userAvatar}),a.profile.real_name))),r.a.createElement(le.a,{open:o,onClose:function(){return m(!1)}},r.a.createElement("div",{className:e.drawerList,onClick:function(){return m(!1)},onKeyDown:function(){return m(!1)}},r.a.createElement(ie.a,{component:"nav"},r.a.createElement(oe.a,{button:!0,component:i.b,to:"/timerecord"},r.a.createElement(me.a,null,r.a.createElement(fe.a,null)),r.a.createElement(ue.a,{primary:"\u52e4\u6020\u8a18\u9332"})),r.a.createElement(ge.a,null),r.a.createElement(oe.a,{button:!0,component:i.b,to:"/fixedtime"},r.a.createElement(me.a,null,r.a.createElement(ye.a,null)),r.a.createElement(ue.a,{primary:"\u6240\u5b9a\u6642\u9593\u8a2d\u5b9a"})),r.a.createElement(oe.a,{button:!0,component:i.b,to:"/breaktime"},r.a.createElement(me.a,null,r.a.createElement(de.a,null)),r.a.createElement(ue.a,{primary:"\u4f11\u61a9\u6642\u9593\u8a2d\u5b9a"}))))),r.a.createElement(Pe.a,{open:N,onClose:function(){return x(!1)}},r.a.createElement(Ye.a,null,"\u4f11\u61a9\u6642\u9593\u8ffd\u52a0"),r.a.createElement(Ve.a,null,r.a.createElement(L.a,{label:"\u5e74",fullWidth:!0,required:!0,margin:"dense",defaultValue:D,onChange:function(e){return F(e.target.value)}}),r.a.createElement(ve.a,{required:!0,margin:"dense"},r.a.createElement(be.a,{htmlFor:"select-month"},"\u6708"),r.a.createElement(X.a,{value:G,inputProps:{id:"select-month"},onChange:function(e){return z(e.target.value)}},r.a.createElement(at,null))),r.a.createElement(L.a,{autoFocus:!0,label:"\u5ba2\u5148",fullWidth:!0,required:!0,margin:"dense",onChange:function(e){return re(e.target.value)}}),r.a.createElement(L.a,{label:"\u958b\u59cb\u6642\u9593",fullWidth:!0,required:!0,margin:"dense",onChange:function(e){return _e(e.target.value)}}),r.a.createElement(L.a,{label:"\u7d42\u4e86\u6642\u9593",fullWidth:!0,required:!0,margin:"dense",onChange:function(e){return Ce(e.target.value)}})),r.a.createElement(We.a,null,r.a.createElement(u.a,{onClick:function(){x(!1)},color:"primary"},"\u30ad\u30e3\u30f3\u30bb\u30eb"),r.a.createElement(u.a,{onClick:function(){if(!D)return Te("error"),Me("\u5e74\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0);if(!ae)return Te("error"),Me("\u5ba2\u5148\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0);if(Number(D)<2020||Number(D)>(new Date).getFullYear())return Te("error"),Me("\u5e74\u306f\u300c2020\u2266\u5165\u529b\u5e74\u2266\u73fe\u5728\u5e74\u300d\u306e\u7bc4\u56f2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0);if(!ke)return Te("error"),Me("\u958b\u59cb\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0);if(!we)return Te("error"),Me("\u7d42\u4e86\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0);var e=RegExp(/\d{1,2}:\d{1,2}/);return e.test(ke)?e.test(we)?rt(ke,we)?void K.a.post("".concat("https://baykraft.herokuapp.com/rest","/break_times"),{year:D,month:G,customer:ae,start_time:ke,end_time:we},{params:{token:H.getAccessToken()}}).then((function(e){var t=e.data.record,a=et(!1,t.break_time_id,t.year,t.month,t.customer,t.start_time,t.end_time);b.push(a),k(b.slice()),x(!1),Te("success"),Me("\u4f11\u61a9\u6642\u9593\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"),Ue(!0)})).catch((function(e){Te("error"),Me(e.message),Ue(!0)})):(Te("error"),Me("\u958b\u59cb\u6642\u9593\u306f\u7d42\u4e86\u6642\u9593\u3088\u308a\u3082\u524d\u306e\u6642\u9593\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0)):(Te("error"),Me("\u7d42\u4e86\u6642\u9593\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0)):(Te("error"),Me("\u958b\u59cb\u6642\u9593\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0))},color:"primary"},"\u8ffd\u52a0"))),r.a.createElement(te.a,{open:qe,autoHideDuration:6e3,onClose:nt},r.a.createElement(ee.a,{severity:xe,variant:"filled",onClose:nt},Fe)),r.a.createElement(v.a,{maxWidth:"lg",className:e.container},r.a.createElement(d.a,{className:e.tableToolbar},r.a.createElement(g.a,{variant:"h6",className:e.title},"\u4f11\u61a9\u6642\u9593\u8a2d\u5b9a"),r.a.createElement(L.a,{required:!0,label:"\u5e74",margin:"normal",defaultValue:Ie,onChange:function(e){return Je(e.target.value)}}),r.a.createElement(ve.a,{required:!0,margin:"normal"},r.a.createElement(be.a,{htmlFor:"select-month"},"\u6708"),r.a.createElement(X.a,{value:Xe,inputProps:{id:"select-month"},onChange:function(e){return Ze(e.target.value)}},r.a.createElement(at,null))),r.a.createElement(pe.a,{title:"\u691c\u7d22"},r.a.createElement(E.a,{onClick:function(){return Ie?Number(Ie)<2020||Number(Ie)>(new Date).getFullYear()?(Te("error"),Me("\u5e74\u306f\u300c2020\u2266\u5165\u529b\u5e74\u2266\u73fe\u5728\u5e74\u300d\u306e\u7bc4\u56f2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0)):void K.a.get("".concat("https://baykraft.herokuapp.com/rest","/break_times/").concat(Ie,"/").concat(Xe),{params:{token:H.getAccessToken()}}).then((function(e){var t=e.data.records.map((function(e){return et(!1,e.break_time_id,e.year,e.month,e.customer,e.start_time,e.end_time)}));k(t)})).catch((function(e){Te("error"),Me(e.message),Ue(!0)})):(Te("error"),Me("\u5e74\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0))}},r.a.createElement(U.a,null))),r.a.createElement(pe.a,{title:"\u8ffd\u52a0"},r.a.createElement(E.a,{onClick:function(){var e=new Date;F(String(e.getFullYear())),z(String(e.getMonth()+1)),re(""),_e(""),Ce(""),x(!0)}},r.a.createElement(Be.a,null))),r.a.createElement(pe.a,{title:"\u524d\u6708\u6d41\u7528"},r.a.createElement(E.a,{onClick:function(){return Ie?Number(Ie)<2020||Number(Ie)>(new Date).getFullYear()?(Te("error"),Me("\u5e74\u306f\u300c2020\u2266\u5165\u529b\u5e74\u2266\u73fe\u5728\u5e74\u300d\u306e\u7bc4\u56f2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0)):void K.a.post("".concat("https://baykraft.herokuapp.com/rest","/break_times/copy"),{from_year:1===Number(Xe)?Number(Ie)-1:Number(Ie),from_month:Number(Xe)-1,to_year:Number(Ie),to_month:Number(Xe)},{params:{token:H.getAccessToken()}}).then((function(e){var t=e.data.records.map((function(e){return et(!1,e.break_time_id,e.year,e.month,e.customer,e.start_time,e.end_time)}));k(t),Te("success"),Me("\u524d\u6708\u306e\u8a2d\u5b9a\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002"),Ue(!0)})).catch((function(e){Te("error"),Me(e.message),Ue(!0)})):(Te("error"),Me("\u5e74\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0))}},r.a.createElement(Le.a,null)))),r.a.createElement(V.a,null,r.a.createElement(B.a,{size:"small",className:e.table,"aria-label":"breaktime"},r.a.createElement(W.a,null,r.a.createElement(q.a,null,r.a.createElement(Y.a,{align:"center"},"\u5e74"),r.a.createElement(Y.a,{align:"center"},"\u6708"),r.a.createElement(Y.a,{align:"center"},"\u5ba2\u5148"),r.a.createElement(Y.a,{align:"center"},"\u958b\u59cb\u6642\u9593"),r.a.createElement(Y.a,{align:"center"},"\u7d42\u4e86\u6642\u9593"),r.a.createElement(Y.a,{align:"center"},"\u64cd\u4f5c"))),r.a.createElement(P.a,null,b.map((function(e){return r.a.createElement(q.a,{key:e.id},r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(L.a,{defaultValue:e.year,inputProps:{style:{textAlign:"center"}},onChange:function(t){return function(e,t){tt(e),e.year=t,k(b.slice())}(e,t.target.value)}}):r.a.createElement("span",null,e.year)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(X.a,{value:e.month,onChange:function(t){return function(e,t){tt(e),e.month=t,k(b.slice())}(e,t.target.value)}},r.a.createElement(at,null)):r.a.createElement("span",null,e.month)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(L.a,{defaultValue:e.customer,inputProps:{style:{textAlign:"center"}},autoFocus:!0,onChange:function(t){return function(e,t){tt(e),e.customer=t,k(b.slice())}(e,t.target.value)}}):r.a.createElement("span",null,e.customer)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(L.a,{defaultValue:e.start_time,inputProps:{style:{textAlign:"center"}},onChange:function(t){return function(e,t){tt(e),e.start_time=t,k(b.slice())}(e,t.target.value)}}):r.a.createElement("span",null,e.start_time)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(L.a,{defaultValue:e.end_time,inputProps:{style:{textAlign:"center"}},onChange:function(t){return function(e,t){tt(e),e.end_time=t,k(b.slice())}(e,t.target.value)}}):r.a.createElement("span",null,e.end_time)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement("div",null,r.a.createElement(E.a,{"aria-label":"done",onClick:function(){return function(e){if(!e.year)return Te("error"),Me("\u5e74\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0);if(!e.customer)return Te("error"),Me("\u5ba2\u5148\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0);if(Number(e.year)<2020||Number(e.year)>(new Date).getFullYear())return Te("error"),Me("\u5e74\u306f\u300c2020\u2266\u5165\u529b\u5e74\u2266\u73fe\u5728\u5e74\u300d\u306e\u7bc4\u56f2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0);if(!e.start_time)return Te("error"),Me("\u958b\u59cb\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0);if(!e.end_time)return Te("error"),Me("\u7d42\u4e86\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void Ue(!0);var t=RegExp(/\d{1,2}:\d{1,2}/);return t.test(e.start_time)?t.test(e.end_time)?rt(e.start_time,e.end_time)?void K.a.put("".concat("https://baykraft.herokuapp.com/rest","/break_times/").concat(e.id),{year:e.year,month:e.month,customer:e.customer,start_time:e.start_time,end_time:e.end_time},{params:{token:H.getAccessToken()}}).then((function(t){var a=t.data.record;e.edit=!1,e.year=a.year,e.month=a.month,e.customer=a.customer,e.start_time=a.start_time,e.end_time=a.end_time,k(b.slice()),Te("success"),Me("\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002"),Ue(!0)})).catch((function(e){Te("error"),Me(e.message),Ue(!0)})):(Te("error"),Me("\u958b\u59cb\u6642\u9593\u306f\u7d42\u4e86\u6642\u9593\u3088\u308a\u3082\u524d\u306e\u6642\u9593\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0)):(Te("error"),Me("\u7d42\u4e86\u6642\u9593\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0)):(Te("error"),Me("\u958b\u59cb\u6642\u9593\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void Ue(!0))}(e)}},r.a.createElement(Q.a,null)),r.a.createElement(E.a,{"aria-label":"cancel",onClick:function(){return function(e){var t=O[String(e.id)];t&&(e.customer=t.customer,e.start_time=t.start_time,e.end_time=t.end_time,delete O[String(e.id)],j(O)),e.edit=!1,k(b.slice())}(e)}},r.a.createElement(ne.a,null))):r.a.createElement("div",null,r.a.createElement(E.a,{"aria-label":"edit",onClick:function(){return function(e){delete O[String(e.id)],j(O),e.edit=!0,k(b.slice())}(e)}},r.a.createElement(J.a,null)),r.a.createElement(E.a,{"aria-label":"delete",onClick:function(){return function(e){K.a.delete("".concat("https://baykraft.herokuapp.com/rest","/break_times/").concat(e.id),{params:{token:H.getAccessToken()}}).then((function(){delete b[b.indexOf(e)],k(b.slice()),Te("success"),Me("\u524a\u9664\u3057\u307e\u3057\u305f\u3002"),Ue(!0)})).catch((function(e){Te("error"),Me(e.message),Ue(!0)}))}(e)}},r.a.createElement(ce.a,null)))))})))))))}var ze=a(190),Ke=a.n(ze),Ie=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},userAvatar:{marginRight:e.spacing(2)},drawerList:{width:250},container:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},tableToolbar:{marginBottom:e.spacing(1)},table:{"& .MuiTableCell-root":{whiteSpace:"nowrap","& .MuiTextField-root":{width:100}},"& .MuiTableHead-root":{"& .MuiTableRow-root":{"& .MuiTableCell-root":{backgroundColor:e.palette.success.main}}}}}}));function Je(){var e=Ie(),t=Object(n.useState)(H.getUser()),a=Object(S.a)(t,1)[0],c=Object(n.useState)(!1),l=Object(S.a)(c,2),o=l[0],m=l[1],f=Object(n.useState)([]),p=Object(S.a)(f,2),b=p[0],k=p[1],_=Object(n.useState)({}),y=Object(S.a)(_,2),O=y[0],j=y[1],w=Object(n.useState)(!1),C=Object(S.a)(w,2),N=C[0],x=C[1],T=Object(n.useState)("2020"),A=Object(S.a)(T,2),D=A[0],F=A[1],M=Object(n.useState)("1"),R=Object(S.a)(M,2),G=R[0],U=R[1],z=Object(n.useState)(""),I=Object(S.a)(z,2),$=I[0],ae=I[1],re=Object(n.useState)(""),se=Object(S.a)(re,2),Ee=se[0],ke=se[1],_e=Object(n.useState)(""),Oe=Object(S.a)(_e,2),je=Oe[0],we=Oe[1],Ce=Object(n.useState)("error"),Ne=Object(S.a)(Ce,2),Se=Ne[0],xe=Ne[1],Te=Object(n.useState)(""),Ae=Object(S.a)(Te,2),De=Ae[0],Fe=Ae[1],Me=Object(n.useState)(!1),He=Object(S.a)(Me,2),Re=He[0],qe=He[1],Le=function(e,t,a,n,r,c,l){return{edit:e,id:t,year:a,month:n,customer:r,start_time:c,end_time:l}};Object(n.useEffect)((function(){K.a.get("".concat("https://baykraft.herokuapp.com/rest","/fixed_times"),{params:{token:H.getAccessToken()}}).then((function(e){var t=e.data.records.map((function(e){return Le(!1,e.fixed_time_id,e.year,e.month,e.customer,e.start_time,e.end_time)}));k(t)})).catch((function(e){xe("error"),Fe(e.message),qe(!0)}))}),[]);var Ge=function(e){O.hasOwnProperty(String(e.id))||(O[String(e.id)]=Object.assign({},e))},Ue=function(){for(var e=[],t=1;t<=12;t++)e.push(r.a.createElement("option",{key:t,value:t},t));return e},ze=function(e,t){"clickaway"!==t&&qe(!1)},Je=function(e,t){var a=new Date,n=e.split(":"),r=t.split(":");return new Date(a.getFullYear(),a.getMonth(),a.getDate(),Number(n[0]),Number(n[1]))<new Date(a.getFullYear(),a.getMonth(),a.getDate(),Number(r[0]),Number(r[1]))};return r.a.createElement("form",{className:e.root},r.a.createElement(he.a,null),r.a.createElement(s.a,{position:"sticky"},r.a.createElement(d.a,null,r.a.createElement(E.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return m(!0)}},r.a.createElement(h.a,null)),r.a.createElement(g.a,{variant:"h6",className:e.title},"\u682a\u5f0f\u4f1a\u793e\u30d9\u30a4\u30af\u30e9\u30d5\u30c8"),r.a.createElement(u.a,{color:"inherit"},r.a.createElement(Z.a,{alt:"avatar",src:a.profile.image_48,className:e.userAvatar}),a.profile.real_name))),r.a.createElement(le.a,{open:o,onClose:function(){return m(!1)}},r.a.createElement("div",{className:e.drawerList,onClick:function(){return m(!1)},onKeyDown:function(){return m(!1)}},r.a.createElement(ie.a,{component:"nav"},r.a.createElement(oe.a,{button:!0,component:i.b,to:"/timerecord"},r.a.createElement(me.a,null,r.a.createElement(fe.a,null)),r.a.createElement(ue.a,{primary:"\u52e4\u6020\u8a18\u9332"})),r.a.createElement(ge.a,null),r.a.createElement(oe.a,{button:!0,component:i.b,to:"/fixedtime"},r.a.createElement(me.a,null,r.a.createElement(ye.a,null)),r.a.createElement(ue.a,{primary:"\u6240\u5b9a\u6642\u9593\u8a2d\u5b9a"})),r.a.createElement(oe.a,{button:!0,component:i.b,to:"/breaktime"},r.a.createElement(me.a,null,r.a.createElement(de.a,null)),r.a.createElement(ue.a,{primary:"\u4f11\u61a9\u6642\u9593\u8a2d\u5b9a"}))))),r.a.createElement(Pe.a,{open:N,onClose:function(){return x(!1)}},r.a.createElement(Ye.a,null,"\u6240\u5b9a\u6642\u9593\u8ffd\u52a0"),r.a.createElement(Ve.a,null,r.a.createElement(L.a,{label:"\u5e74",fullWidth:!0,required:!0,margin:"dense",defaultValue:D,onChange:function(e){return F(e.target.value)}}),r.a.createElement(ve.a,{required:!0,margin:"dense"},r.a.createElement(be.a,{htmlFor:"select-month"},"\u6708"),r.a.createElement(X.a,{value:G,inputProps:{id:"select-month"},onChange:function(e){return U(e.target.value)}},r.a.createElement(Ue,null))),r.a.createElement(L.a,{autoFocus:!0,label:"\u5ba2\u5148",fullWidth:!0,required:!0,margin:"dense",onChange:function(e){return ae(e.target.value)}}),r.a.createElement(L.a,{label:"\u958b\u59cb\u6642\u9593",fullWidth:!0,required:!0,margin:"dense",onChange:function(e){return ke(e.target.value)}}),r.a.createElement(L.a,{label:"\u7d42\u4e86\u6642\u9593",fullWidth:!0,required:!0,margin:"dense",onChange:function(e){return we(e.target.value)}})),r.a.createElement(We.a,null,r.a.createElement(u.a,{onClick:function(){x(!1)},color:"primary"},"\u30ad\u30e3\u30f3\u30bb\u30eb"),r.a.createElement(u.a,{onClick:function(){if(!D)return xe("error"),Fe("\u5e74\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void qe(!0);if(!$)return xe("error"),Fe("\u5ba2\u5148\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void qe(!0);if(Number(D)<2020||Number(D)>(new Date).getFullYear())return xe("error"),Fe("\u5e74\u306f\u300c2020\u2266\u5165\u529b\u5e74\u2266\u73fe\u5728\u5e74\u300d\u306e\u7bc4\u56f2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void qe(!0);if(!Ee)return xe("error"),Fe("\u958b\u59cb\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void qe(!0);if(!je)return xe("error"),Fe("\u7d42\u4e86\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void qe(!0);var e=RegExp(/\d{1,2}:\d{1,2}/);return e.test(Ee)?e.test(je)?Je(Ee,je)?void K.a.post("".concat("https://baykraft.herokuapp.com/rest","/fixed_times"),{year:D,month:G,customer:$,start_time:Ee,end_time:je},{params:{token:H.getAccessToken()}}).then((function(e){var t=e.data.record,a=Le(!1,t.fixed_time_id,t.year,t.month,t.customer,t.start_time,t.end_time);b.push(a),k(b.slice()),x(!1),xe("success"),Fe("\u6240\u5b9a\u6642\u9593\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"),qe(!0)})).catch((function(e){xe("error"),Fe(e.message),qe(!0)})):(xe("error"),Fe("\u958b\u59cb\u6642\u9593\u306f\u7d42\u4e86\u6642\u9593\u3088\u308a\u3082\u524d\u306e\u6642\u9593\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void qe(!0)):(xe("error"),Fe("\u7d42\u4e86\u6642\u9593\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void qe(!0)):(xe("error"),Fe("\u958b\u59cb\u6642\u9593\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void qe(!0))},color:"primary"},"\u8ffd\u52a0"))),r.a.createElement(te.a,{open:Re,autoHideDuration:6e3,onClose:ze},r.a.createElement(ee.a,{severity:Se,variant:"filled",onClose:ze},De)),r.a.createElement(v.a,{maxWidth:"lg",className:e.container},r.a.createElement(d.a,{className:e.tableToolbar},r.a.createElement(g.a,{variant:"h6",className:e.title},"\u6240\u5b9a\u6642\u9593\u8a2d\u5b9a"),r.a.createElement(pe.a,{title:"\u8ffd\u52a0"},r.a.createElement(E.a,{onClick:function(){var e=new Date;F(String(e.getFullYear())),U(String(e.getMonth()+1)),ae(""),ke(""),we(""),x(!0)}},r.a.createElement(Be.a,null))),r.a.createElement(pe.a,{title:"\u30ea\u30ed\u30fc\u30c9"},r.a.createElement(E.a,{onClick:function(){K.a.get("".concat("https://baykraft.herokuapp.com/rest","/fixed_times"),{params:{token:H.getAccessToken()}}).then((function(e){var t=e.data.records.map((function(e){return Le(!1,e.fixed_time_id,e.year,e.month,e.customer,e.start_time,e.end_time)}));k(t)})).catch((function(e){xe("error"),Fe(e.message),qe(!0)}))}},r.a.createElement(Ke.a,null)))),r.a.createElement(V.a,null,r.a.createElement(B.a,{size:"small",className:e.table,"aria-label":"breaktime"},r.a.createElement(W.a,null,r.a.createElement(q.a,null,r.a.createElement(Y.a,{align:"center"},"\u5e74"),r.a.createElement(Y.a,{align:"center"},"\u6708"),r.a.createElement(Y.a,{align:"center"},"\u5ba2\u5148"),r.a.createElement(Y.a,{align:"center"},"\u958b\u59cb\u6642\u9593"),r.a.createElement(Y.a,{align:"center"},"\u7d42\u4e86\u6642\u9593"),r.a.createElement(Y.a,{align:"center"},"\u64cd\u4f5c"))),r.a.createElement(P.a,null,b.map((function(e){return r.a.createElement(q.a,{key:e.id},r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(L.a,{defaultValue:e.year,inputProps:{style:{textAlign:"center"}},onChange:function(t){return function(e,t){Ge(e),e.year=t,k(b.slice())}(e,t.target.value)}}):r.a.createElement("span",null,e.year)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(X.a,{value:e.month,onChange:function(t){return function(e,t){Ge(e),e.month=t,k(b.slice())}(e,t.target.value)}},r.a.createElement(Ue,null)):r.a.createElement("span",null,e.month)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(L.a,{defaultValue:e.customer,inputProps:{style:{textAlign:"center"}},autoFocus:!0,onChange:function(t){return function(e,t){Ge(e),e.customer=t,k(b.slice())}(e,t.target.value)}}):r.a.createElement("span",null,e.customer)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(L.a,{defaultValue:e.start_time,inputProps:{style:{textAlign:"center"}},onChange:function(t){return function(e,t){Ge(e),e.start_time=t,k(b.slice())}(e,t.target.value)}}):r.a.createElement("span",null,e.start_time)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement(L.a,{defaultValue:e.end_time,inputProps:{style:{textAlign:"center"}},onChange:function(t){return function(e,t){Ge(e),e.end_time=t,k(b.slice())}(e,t.target.value)}}):r.a.createElement("span",null,e.end_time)),r.a.createElement(Y.a,{align:"center"},e.edit?r.a.createElement("div",null,r.a.createElement(E.a,{"aria-label":"done",onClick:function(){return function(e){if(!e.year)return xe("error"),Fe("\u5e74\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void qe(!0);if(!e.customer)return xe("error"),Fe("\u5ba2\u5148\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void qe(!0);if(Number(e.year)<2020||Number(e.year)>(new Date).getFullYear())return xe("error"),Fe("\u5e74\u306f\u300c2020\u2266\u5165\u529b\u5e74\u2266\u73fe\u5728\u5e74\u300d\u306e\u7bc4\u56f2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void qe(!0);if(!e.start_time)return xe("error"),Fe("\u958b\u59cb\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void qe(!0);if(!e.end_time)return xe("error"),Fe("\u7d42\u4e86\u6642\u9593\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"),void qe(!0);var t=RegExp(/\d{1,2}:\d{1,2}/);return t.test(e.start_time)?t.test(e.end_time)?Je(e.start_time,e.end_time)?void K.a.put("".concat("https://baykraft.herokuapp.com/rest","/fixed_times/").concat(e.id),{year:e.year,month:e.month,customer:e.customer,start_time:e.start_time,end_time:e.end_time},{params:{token:H.getAccessToken()}}).then((function(t){var a=t.data.record;e.edit=!1,e.year=a.year,e.month=a.month,e.customer=a.customer,e.start_time=a.start_time,e.end_time=a.end_time,k(b.slice()),xe("success"),Fe("\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002"),qe(!0)})).catch((function(e){xe("error"),Fe(e.message),qe(!0)})):(xe("error"),Fe("\u958b\u59cb\u6642\u9593\u306f\u7d42\u4e86\u6642\u9593\u3088\u308a\u3082\u524d\u306e\u6642\u9593\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void qe(!0)):(xe("error"),Fe("\u7d42\u4e86\u6642\u9593\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void qe(!0)):(xe("error"),Fe("\u958b\u59cb\u6642\u9593\u306f\u300cHH:mm\u300d\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),void qe(!0))}(e)}},r.a.createElement(Q.a,null)),r.a.createElement(E.a,{"aria-label":"cancel",onClick:function(){return function(e){var t=O[String(e.id)];t&&(e.customer=t.customer,e.start_time=t.start_time,e.end_time=t.end_time,delete O[String(e.id)],j(O)),e.edit=!1,k(b.slice())}(e)}},r.a.createElement(ne.a,null))):r.a.createElement("div",null,r.a.createElement(E.a,{"aria-label":"edit",onClick:function(){return function(e){delete O[String(e.id)],j(O),e.edit=!0,k(b.slice())}(e)}},r.a.createElement(J.a,null)),r.a.createElement(E.a,{"aria-label":"delete",onClick:function(){return function(e){K.a.delete("".concat("https://baykraft.herokuapp.com/rest","/fixed_times/").concat(e.id),{params:{token:H.getAccessToken()}}).then((function(){delete b[b.indexOf(e)],k(b.slice()),xe("success"),Fe("\u524a\u9664\u3057\u307e\u3057\u305f\u3002"),qe(!0)})).catch((function(e){xe("error"),Fe(e.message),qe(!0)}))}(e)}},r.a.createElement(ce.a,null)))))})))))))}var $e=a(191),Qe=a.n($e),Xe=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},slack:{width:32,height:32,marginRight:e.spacing(2)},container:{marginTop:e.spacing(2),marginBottom:e.spacing(5),paddingTop:e.spacing(3),paddingBottom:e.spacing(3),paddingLeft:e.spacing(10),paddingRight:e.spacing(10),"& .MuiButton-root":{marginTop:e.spacing(2)}}}}));function Ze(){var e=Xe(),t=Object(n.useState)(!1),a=Object(S.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)("success"),f=Object(S.a)(m,2),p=f[0],b=f[1],k=Object(n.useState)("\u30ed\u30b0\u30a4\u30f3\u4e2d\u3067\u3059..."),_=Object(S.a)(k,2),y=_[0],O=_[1];return Object(n.useEffect)((function(){H.on("change",(function(){l(H.isAuthenticated())}));var e=Qe.a.parse(window.location.search).code;void 0!==e?K.a.get("https://slack.com/api/oauth.access",{params:{client_id:"3246745826.923685300119",client_secret:"0f959af4f1b0e43cd06a021d5390e188",code:e,redirect_uri:"https://baykraft.herokuapp.com/oauth"}}).then((function(e){if(e.data.ok){var t=e.data.access_token,a=e.data.user_id;K.a.get("https://slack.com/api/users.info",{params:{token:t,user:a}}).then((function(e){e.data.ok?(H.setUser(e.data.user),H.setAccessToken(t),H.setAuthenticated(!0),H.removeAllListeners("change")):(b("error"),O(e.data.error))})).catch((function(e){b("error"),O(e.message)}))}else b("error"),O(e.data.error)})).catch((function(e){b("error"),O(e.message)})):(b("error"),O("code\u306e\u6307\u5b9a\u304c\u306a\u3044\u305f\u3081\u8a8d\u8a3c\u3067\u304d\u307e\u305b\u3093\u3002"))}),[]),c?r.a.createElement(o.Redirect,{to:"/timerecord"}):r.a.createElement("div",{className:e.root},r.a.createElement(s.a,{position:"sticky"},r.a.createElement(d.a,null,r.a.createElement(E.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(h.a,null)),r.a.createElement(g.a,{variant:"h6",className:e.title},"\u682a\u5f0f\u4f1a\u793e\u30d9\u30a4\u30af\u30e9\u30d5\u30c8"))),r.a.createElement(v.a,{maxWidth:"md",className:e.container},"success"===p?r.a.createElement("div",null,y):r.a.createElement("div",null,r.a.createElement(ee.a,{severity:p},y),r.a.createElement("div",null,r.a.createElement(u.a,{component:i.b,to:"/",color:"primary"},"TOP\u753b\u9762\u306b\u623b\u308b")))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement((function(){return r.a.createElement(i.a,null,r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{exact:!0,path:"/"},r.a.createElement(N,null)),r.a.createElement(o.Route,{exact:!0,path:"/oauth"},r.a.createElement(Ze,null)),r.a.createElement(R,{exact:!0,path:"/timerecord"},r.a.createElement(He,null)),r.a.createElement(R,{exact:!0,path:"/fixedtime"},r.a.createElement(Je,null)),r.a.createElement(R,{exact:!0,path:"/breaktime"},r.a.createElement(Ue,null)),r.a.createElement(o.Route,{path:"*"},r.a.createElement(N,null))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[210,1,2]]]);
//# sourceMappingURL=main.738db880.chunk.js.map