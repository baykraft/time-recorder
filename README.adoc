== Baykraft 勤怠記録アプリ

=== 環境構築

1. https://baykraft.slack.com にアクセス
2. 左側メニューの「アプリを追加する」を選択
3. 検索欄に「Hubot」と入力
4. Hubotをインストール

=== Herokuへの環境変数設定

[source,sh]
----
heroku config:set BOT_API_TOKEN="hubotのaccess_token"
----

=== Heroku上のPostgreSQLへのアクセス

[source,sh]
----
heroku pg:psql
----

=== Viewモジュールのコピー

time-recorder-viewリポジトリをビルドし、生成されたbuildフォルダをtemplatesフォルダとして
time-recorderへコピーする。

=== DB定義

.time_records
|===
|物理名|論理名|型|サイズ|PK|UK|FK|NN|備考

|time_record_id|ID|serial||X|||X|
|user|ユーザID|varchar|9||X||X|SlackのユーザID
|date|日付|date|||X||X|
|start_time|始業|time||||||
|end_time|終業|time||||||
|note|備考|varchar||||||
|kind|勤休|integer|||||X|
|customer|客先|varchar||||||
|===

Indexes::
    "time_records_pkey" PRIMARY KEY, btree (time_record_id) +
    "time_records_user_date_key" UNIQUE CONSTRAINT, btree ("user", date)

.break_times
|===
|物理名|論理名|型|サイズ|PK|UK|FK|NN|備考

|break_time_id|ID|serial||X|||X|
|user|ユーザID|varchar|9||||X|SlackのユーザID
|year|年|integer|||||X|
|month|月|integer|||||X|
|customer|客先|varchar|||||X|
|start_time|始業|time|||||X|
|end_time|終業|time|||||X|
|===

Indexes::
    "break_times_pkey" PRIMARY KEY, btree (break_time_id)
